(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function xf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _o={exports:{}};var Df=_o.exports,du;function Nf(){return du||(du=1,(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:Df,function(e,t){var r=[],i=Object.getPrototypeOf,a=r.slice,u=r.flat?function(s){return r.flat.call(s)}:function(s){return r.concat.apply([],s)},p=r.push,_=r.indexOf,v={},I=v.toString,P=v.hasOwnProperty,M=P.toString,Q=M.call(Object),L={},$=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},G=function(c){return c!=null&&c===c.window},X=e.document,le={type:!0,src:!0,nonce:!0,noModule:!0};function pe(s,c,h){h=h||X;var f,m,y=h.createElement("script");if(y.text=s,c)for(f in le)m=c[f]||c.getAttribute&&c.getAttribute(f),m&&y.setAttribute(f,m);h.head.appendChild(y).parentNode.removeChild(y)}function Re(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?v[I.call(s)]||"object":typeof s}var Be="3.7.1",Me=/HTML$/i,l=function(s,c){return new l.fn.init(s,c)};l.fn=l.prototype={jquery:Be,constructor:l,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var c=l.merge(this.constructor(),s);return c.prevObject=this,c},each:function(s){return l.each(this,s)},map:function(s){return this.pushStack(l.map(this,function(c,h){return s.call(c,h,c)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(s,c){return(c+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(s,c){return c%2}))},eq:function(s){var c=this.length,h=+s+(s<0?c:0);return this.pushStack(h>=0&&h<c?[this[h]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:r.sort,splice:r.splice},l.extend=l.fn.extend=function(){var s,c,h,f,m,y,E=arguments[0]||{},R=1,A=arguments.length,D=!1;for(typeof E=="boolean"&&(D=E,E=arguments[R]||{},R++),typeof E!="object"&&!$(E)&&(E={}),R===A&&(E=this,R--);R<A;R++)if((s=arguments[R])!=null)for(c in s)f=s[c],!(c==="__proto__"||E===f)&&(D&&f&&(l.isPlainObject(f)||(m=Array.isArray(f)))?(h=E[c],m&&!Array.isArray(h)?y=[]:!m&&!l.isPlainObject(h)?y={}:y=h,m=!1,E[c]=l.extend(D,y,f)):f!==void 0&&(E[c]=f));return E},l.extend({expando:"jQuery"+(Be+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var c,h;return!s||I.call(s)!=="[object Object]"?!1:(c=i(s),c?(h=P.call(c,"constructor")&&c.constructor,typeof h=="function"&&M.call(h)===Q):!0)},isEmptyObject:function(s){var c;for(c in s)return!1;return!0},globalEval:function(s,c,h){pe(s,{nonce:c&&c.nonce},h)},each:function(s,c){var h,f=0;if(C(s))for(h=s.length;f<h&&c.call(s[f],f,s[f])!==!1;f++);else for(f in s)if(c.call(s[f],f,s[f])===!1)break;return s},text:function(s){var c,h="",f=0,m=s.nodeType;if(!m)for(;c=s[f++];)h+=l.text(c);return m===1||m===11?s.textContent:m===9?s.documentElement.textContent:m===3||m===4?s.nodeValue:h},makeArray:function(s,c){var h=c||[];return s!=null&&(C(Object(s))?l.merge(h,typeof s=="string"?[s]:s):p.call(h,s)),h},inArray:function(s,c,h){return c==null?-1:_.call(c,s,h)},isXMLDoc:function(s){var c=s&&s.namespaceURI,h=s&&(s.ownerDocument||s).documentElement;return!Me.test(c||h&&h.nodeName||"HTML")},merge:function(s,c){for(var h=+c.length,f=0,m=s.length;f<h;f++)s[m++]=c[f];return s.length=m,s},grep:function(s,c,h){for(var f,m=[],y=0,E=s.length,R=!h;y<E;y++)f=!c(s[y],y),f!==R&&m.push(s[y]);return m},map:function(s,c,h){var f,m,y=0,E=[];if(C(s))for(f=s.length;y<f;y++)m=c(s[y],y,h),m!=null&&E.push(m);else for(y in s)m=c(s[y],y,h),m!=null&&E.push(m);return u(E)},guid:1,support:L}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=r[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,c){v["[object "+c+"]"]=c.toLowerCase()});function C(s){var c=!!s&&"length"in s&&s.length,h=Re(s);return $(s)||G(s)?!1:h==="array"||c===0||typeof c=="number"&&c>0&&c-1 in s}function S(s,c){return s.nodeName&&s.nodeName.toLowerCase()===c.toLowerCase()}var N=r.pop,x=r.sort,F=r.splice,b="[\\x20\\t\\r\\n\\f]",Ge=new RegExp("^"+b+"+|((?:^|[^\\\\])(?:\\\\.)*)"+b+"+$","g");l.contains=function(s,c){var h=c&&c.parentNode;return s===h||!!(h&&h.nodeType===1&&(s.contains?s.contains(h):s.compareDocumentPosition&&s.compareDocumentPosition(h)&16))};var an=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function pa(s,c){return c?s==="\0"?"ï¿½":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}l.escapeSelector=function(s){return(s+"").replace(an,pa)};var xt=X,Rn=p;(function(){var s,c,h,f,m,y=Rn,E,R,A,D,B,H=l.expando,j=0,J=0,oe=ao(),Te=ao(),ve=ao(),Fe=ao(),o=function(w,k){return w===k&&(m=!0),0},d="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",g="(?:\\\\[\\da-fA-F]{1,6}"+b+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",T="\\["+b+"*("+g+")(?:"+b+"*([*^$|!~]?=)"+b+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+g+"))|)"+b+"*\\]",O=":("+g+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+T+")*)|.*)\\)|)",V=new RegExp(b+"+","g"),Y=new RegExp("^"+b+"*,"+b+"*"),ge=new RegExp("^"+b+"*([>+~]|"+b+")"+b+"*"),je=new RegExp(b+"|>"),Ee=new RegExp(O),Ue=new RegExp("^"+g+"$"),He={ID:new RegExp("^#("+g+")"),CLASS:new RegExp("^\\.("+g+")"),TAG:new RegExp("^("+g+"|[*])"),ATTR:new RegExp("^"+T),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+b+"*(even|odd|(([+-]|)(\\d*)n|)"+b+"*(?:([+-]|)"+b+"*(\\d+)|))"+b+"*\\)|)","i"),bool:new RegExp("^(?:"+d+")$","i"),needsContext:new RegExp("^"+b+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+b+"*((?:-\\d)?\\d*)"+b+"*\\)|)(?=[^-]|$)","i")},lt=/^(?:input|select|textarea|button)$/i,it=/^h\d$/i,ze=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$n=/[+~]/,wt=new RegExp("\\\\[\\da-fA-F]{1,6}"+b+"?|\\\\([^\\r\\n\\f])","g"),pn=function(w,k){var U="0x"+w.slice(1)-65536;return k||(U<0?String.fromCharCode(U+65536):String.fromCharCode(U>>10|55296,U&1023|56320))},Af=function(){Hn()},bf=uo(function(w){return w.disabled===!0&&S(w,"fieldset")},{dir:"parentNode",next:"legend"});function Sf(){try{return E.activeElement}catch{}}try{y.apply(r=a.call(xt.childNodes),xt.childNodes),r[xt.childNodes.length].nodeType}catch{y={apply:function(k,U){Rn.apply(k,a.call(U))},call:function(k){Rn.apply(k,a.call(arguments,1))}}}function ke(w,k,U,q){var z,ee,te,ae,ne,we,fe,me=k&&k.ownerDocument,Ie=k?k.nodeType:9;if(U=U||[],typeof w!="string"||!w||Ie!==1&&Ie!==9&&Ie!==11)return U;if(!q&&(Hn(k),k=k||E,A)){if(Ie!==11&&(ne=ze.exec(w)))if(z=ne[1]){if(Ie===9)if(te=k.getElementById(z)){if(te.id===z)return y.call(U,te),U}else return U;else if(me&&(te=me.getElementById(z))&&ke.contains(k,te)&&te.id===z)return y.call(U,te),U}else{if(ne[2])return y.apply(U,k.getElementsByTagName(w)),U;if((z=ne[3])&&k.getElementsByClassName)return y.apply(U,k.getElementsByClassName(z)),U}if(!Fe[w+" "]&&(!D||!D.test(w))){if(fe=w,me=k,Ie===1&&(je.test(w)||ge.test(w))){for(me=$n.test(w)&&Ia(k.parentNode)||k,(me!=k||!L.scope)&&((ae=k.getAttribute("id"))?ae=l.escapeSelector(ae):k.setAttribute("id",ae=H)),we=ss(w),ee=we.length;ee--;)we[ee]=(ae?"#"+ae:":scope")+" "+co(we[ee]);fe=we.join(",")}try{return y.apply(U,me.querySelectorAll(fe)),U}catch{Fe(w,!0)}finally{ae===H&&k.removeAttribute("id")}}}return hu(w.replace(Ge,"$1"),k,U,q)}function ao(){var w=[];function k(U,q){return w.push(U+" ")>c.cacheLength&&delete k[w.shift()],k[U+" "]=q}return k}function Lt(w){return w[H]=!0,w}function Yr(w){var k=E.createElement("fieldset");try{return!!w(k)}catch{return!1}finally{k.parentNode&&k.parentNode.removeChild(k),k=null}}function Cf(w){return function(k){return S(k,"input")&&k.type===w}}function Rf(w){return function(k){return(S(k,"input")||S(k,"button"))&&k.type===w}}function uu(w){return function(k){return"form"in k?k.parentNode&&k.disabled===!1?"label"in k?"label"in k.parentNode?k.parentNode.disabled===w:k.disabled===w:k.isDisabled===w||k.isDisabled!==!w&&bf(k)===w:k.disabled===w:"label"in k?k.disabled===w:!1}}function br(w){return Lt(function(k){return k=+k,Lt(function(U,q){for(var z,ee=w([],U.length,k),te=ee.length;te--;)U[z=ee[te]]&&(U[z]=!(q[z]=U[z]))})})}function Ia(w){return w&&typeof w.getElementsByTagName<"u"&&w}function Hn(w){var k,U=w?w.ownerDocument||w:xt;return U==E||U.nodeType!==9||!U.documentElement||(E=U,R=E.documentElement,A=!l.isXMLDoc(E),B=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&xt!=E&&(k=E.defaultView)&&k.top!==k&&k.addEventListener("unload",Af),L.getById=Yr(function(q){return R.appendChild(q).id=l.expando,!E.getElementsByName||!E.getElementsByName(l.expando).length}),L.disconnectedMatch=Yr(function(q){return B.call(q,"*")}),L.scope=Yr(function(){return E.querySelectorAll(":scope")}),L.cssHas=Yr(function(){try{return E.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),L.getById?(c.filter.ID=function(q){var z=q.replace(wt,pn);return function(ee){return ee.getAttribute("id")===z}},c.find.ID=function(q,z){if(typeof z.getElementById<"u"&&A){var ee=z.getElementById(q);return ee?[ee]:[]}}):(c.filter.ID=function(q){var z=q.replace(wt,pn);return function(ee){var te=typeof ee.getAttributeNode<"u"&&ee.getAttributeNode("id");return te&&te.value===z}},c.find.ID=function(q,z){if(typeof z.getElementById<"u"&&A){var ee,te,ae,ne=z.getElementById(q);if(ne){if(ee=ne.getAttributeNode("id"),ee&&ee.value===q)return[ne];for(ae=z.getElementsByName(q),te=0;ne=ae[te++];)if(ee=ne.getAttributeNode("id"),ee&&ee.value===q)return[ne]}return[]}}),c.find.TAG=function(q,z){return typeof z.getElementsByTagName<"u"?z.getElementsByTagName(q):z.querySelectorAll(q)},c.find.CLASS=function(q,z){if(typeof z.getElementsByClassName<"u"&&A)return z.getElementsByClassName(q)},D=[],Yr(function(q){var z;R.appendChild(q).innerHTML="<a id='"+H+"' href='' disabled='disabled'></a><select id='"+H+"-\r\\' disabled='disabled'><option selected=''></option></select>",q.querySelectorAll("[selected]").length||D.push("\\["+b+"*(?:value|"+d+")"),q.querySelectorAll("[id~="+H+"-]").length||D.push("~="),q.querySelectorAll("a#"+H+"+*").length||D.push(".#.+[+~]"),q.querySelectorAll(":checked").length||D.push(":checked"),z=E.createElement("input"),z.setAttribute("type","hidden"),q.appendChild(z).setAttribute("name","D"),R.appendChild(q).disabled=!0,q.querySelectorAll(":disabled").length!==2&&D.push(":enabled",":disabled"),z=E.createElement("input"),z.setAttribute("name",""),q.appendChild(z),q.querySelectorAll("[name='']").length||D.push("\\["+b+"*name"+b+"*="+b+`*(?:''|"")`)}),L.cssHas||D.push(":has"),D=D.length&&new RegExp(D.join("|")),o=function(q,z){if(q===z)return m=!0,0;var ee=!q.compareDocumentPosition-!z.compareDocumentPosition;return ee||(ee=(q.ownerDocument||q)==(z.ownerDocument||z)?q.compareDocumentPosition(z):1,ee&1||!L.sortDetached&&z.compareDocumentPosition(q)===ee?q===E||q.ownerDocument==xt&&ke.contains(xt,q)?-1:z===E||z.ownerDocument==xt&&ke.contains(xt,z)?1:f?_.call(f,q)-_.call(f,z):0:ee&4?-1:1)}),E}ke.matches=function(w,k){return ke(w,null,null,k)},ke.matchesSelector=function(w,k){if(Hn(w),A&&!Fe[k+" "]&&(!D||!D.test(k)))try{var U=B.call(w,k);if(U||L.disconnectedMatch||w.document&&w.document.nodeType!==11)return U}catch{Fe(k,!0)}return ke(k,E,null,[w]).length>0},ke.contains=function(w,k){return(w.ownerDocument||w)!=E&&Hn(w),l.contains(w,k)},ke.attr=function(w,k){(w.ownerDocument||w)!=E&&Hn(w);var U=c.attrHandle[k.toLowerCase()],q=U&&P.call(c.attrHandle,k.toLowerCase())?U(w,k,!A):void 0;return q!==void 0?q:w.getAttribute(k)},ke.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},l.uniqueSort=function(w){var k,U=[],q=0,z=0;if(m=!L.sortStable,f=!L.sortStable&&a.call(w,0),x.call(w,o),m){for(;k=w[z++];)k===w[z]&&(q=U.push(z));for(;q--;)F.call(w,U[q],1)}return f=null,w},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(a.apply(this)))},c=l.expr={cacheLength:50,createPseudo:Lt,match:He,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(wt,pn),w[3]=(w[3]||w[4]||w[5]||"").replace(wt,pn),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||ke.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&ke.error(w[0]),w},PSEUDO:function(w){var k,U=!w[6]&&w[2];return He.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":U&&Ee.test(U)&&(k=ss(U,!0))&&(k=U.indexOf(")",U.length-k)-U.length)&&(w[0]=w[0].slice(0,k),w[2]=U.slice(0,k)),w.slice(0,3))}},filter:{TAG:function(w){var k=w.replace(wt,pn).toLowerCase();return w==="*"?function(){return!0}:function(U){return S(U,k)}},CLASS:function(w){var k=oe[w+" "];return k||(k=new RegExp("(^|"+b+")"+w+"("+b+"|$)"))&&oe(w,function(U){return k.test(typeof U.className=="string"&&U.className||typeof U.getAttribute<"u"&&U.getAttribute("class")||"")})},ATTR:function(w,k,U){return function(q){var z=ke.attr(q,w);return z==null?k==="!=":k?(z+="",k==="="?z===U:k==="!="?z!==U:k==="^="?U&&z.indexOf(U)===0:k==="*="?U&&z.indexOf(U)>-1:k==="$="?U&&z.slice(-U.length)===U:k==="~="?(" "+z.replace(V," ")+" ").indexOf(U)>-1:k==="|="?z===U||z.slice(0,U.length+1)===U+"-":!1):!0}},CHILD:function(w,k,U,q,z){var ee=w.slice(0,3)!=="nth",te=w.slice(-4)!=="last",ae=k==="of-type";return q===1&&z===0?function(ne){return!!ne.parentNode}:function(ne,we,fe){var me,Ie,ue,De,_t,ht=ee!==te?"nextSibling":"previousSibling",Ct=ne.parentNode,Xt=ae&&ne.nodeName.toLowerCase(),Jr=!fe&&!ae,yt=!1;if(Ct){if(ee){for(;ht;){for(ue=ne;ue=ue[ht];)if(ae?S(ue,Xt):ue.nodeType===1)return!1;_t=ht=w==="only"&&!_t&&"nextSibling"}return!0}if(_t=[te?Ct.firstChild:Ct.lastChild],te&&Jr){for(Ie=Ct[H]||(Ct[H]={}),me=Ie[w]||[],De=me[0]===j&&me[1],yt=De&&me[2],ue=De&&Ct.childNodes[De];ue=++De&&ue&&ue[ht]||(yt=De=0)||_t.pop();)if(ue.nodeType===1&&++yt&&ue===ne){Ie[w]=[j,De,yt];break}}else if(Jr&&(Ie=ne[H]||(ne[H]={}),me=Ie[w]||[],De=me[0]===j&&me[1],yt=De),yt===!1)for(;(ue=++De&&ue&&ue[ht]||(yt=De=0)||_t.pop())&&!((ae?S(ue,Xt):ue.nodeType===1)&&++yt&&(Jr&&(Ie=ue[H]||(ue[H]={}),Ie[w]=[j,yt]),ue===ne)););return yt-=z,yt===q||yt%q===0&&yt/q>=0}}},PSEUDO:function(w,k){var U,q=c.pseudos[w]||c.setFilters[w.toLowerCase()]||ke.error("unsupported pseudo: "+w);return q[H]?q(k):q.length>1?(U=[w,w,"",k],c.setFilters.hasOwnProperty(w.toLowerCase())?Lt(function(z,ee){for(var te,ae=q(z,k),ne=ae.length;ne--;)te=_.call(z,ae[ne]),z[te]=!(ee[te]=ae[ne])}):function(z){return q(z,0,U)}):q}},pseudos:{not:Lt(function(w){var k=[],U=[],q=Ca(w.replace(Ge,"$1"));return q[H]?Lt(function(z,ee,te,ae){for(var ne,we=q(z,null,ae,[]),fe=z.length;fe--;)(ne=we[fe])&&(z[fe]=!(ee[fe]=ne))}):function(z,ee,te){return k[0]=z,q(k,null,te,U),k[0]=null,!U.pop()}}),has:Lt(function(w){return function(k){return ke(w,k).length>0}}),contains:Lt(function(w){return w=w.replace(wt,pn),function(k){return(k.textContent||l.text(k)).indexOf(w)>-1}}),lang:Lt(function(w){return Ue.test(w||"")||ke.error("unsupported lang: "+w),w=w.replace(wt,pn).toLowerCase(),function(k){var U;do if(U=A?k.lang:k.getAttribute("xml:lang")||k.getAttribute("lang"))return U=U.toLowerCase(),U===w||U.indexOf(w+"-")===0;while((k=k.parentNode)&&k.nodeType===1);return!1}}),target:function(w){var k=e.location&&e.location.hash;return k&&k.slice(1)===w.id},root:function(w){return w===R},focus:function(w){return w===Sf()&&E.hasFocus()&&!!(w.type||w.href||~w.tabIndex)},enabled:uu(!1),disabled:uu(!0),checked:function(w){return S(w,"input")&&!!w.checked||S(w,"option")&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!c.pseudos.empty(w)},header:function(w){return it.test(w.nodeName)},input:function(w){return lt.test(w.nodeName)},button:function(w){return S(w,"input")&&w.type==="button"||S(w,"button")},text:function(w){var k;return S(w,"input")&&w.type==="text"&&((k=w.getAttribute("type"))==null||k.toLowerCase()==="text")},first:br(function(){return[0]}),last:br(function(w,k){return[k-1]}),eq:br(function(w,k,U){return[U<0?U+k:U]}),even:br(function(w,k){for(var U=0;U<k;U+=2)w.push(U);return w}),odd:br(function(w,k){for(var U=1;U<k;U+=2)w.push(U);return w}),lt:br(function(w,k,U){var q;for(U<0?q=U+k:U>k?q=k:q=U;--q>=0;)w.push(q);return w}),gt:br(function(w,k,U){for(var q=U<0?U+k:U;++q<k;)w.push(q);return w})}},c.pseudos.nth=c.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[s]=Cf(s);for(s in{submit:!0,reset:!0})c.pseudos[s]=Rf(s);function lu(){}lu.prototype=c.filters=c.pseudos,c.setFilters=new lu;function ss(w,k){var U,q,z,ee,te,ae,ne,we=Te[w+" "];if(we)return k?0:we.slice(0);for(te=w,ae=[],ne=c.preFilter;te;){(!U||(q=Y.exec(te)))&&(q&&(te=te.slice(q[0].length)||te),ae.push(z=[])),U=!1,(q=ge.exec(te))&&(U=q.shift(),z.push({value:U,type:q[0].replace(Ge," ")}),te=te.slice(U.length));for(ee in c.filter)(q=He[ee].exec(te))&&(!ne[ee]||(q=ne[ee](q)))&&(U=q.shift(),z.push({value:U,type:ee,matches:q}),te=te.slice(U.length));if(!U)break}return k?te.length:te?ke.error(w):Te(w,ae).slice(0)}function co(w){for(var k=0,U=w.length,q="";k<U;k++)q+=w[k].value;return q}function uo(w,k,U){var q=k.dir,z=k.next,ee=z||q,te=U&&ee==="parentNode",ae=J++;return k.first?function(ne,we,fe){for(;ne=ne[q];)if(ne.nodeType===1||te)return w(ne,we,fe);return!1}:function(ne,we,fe){var me,Ie,ue=[j,ae];if(fe){for(;ne=ne[q];)if((ne.nodeType===1||te)&&w(ne,we,fe))return!0}else for(;ne=ne[q];)if(ne.nodeType===1||te)if(Ie=ne[H]||(ne[H]={}),z&&S(ne,z))ne=ne[q]||ne;else{if((me=Ie[ee])&&me[0]===j&&me[1]===ae)return ue[2]=me[2];if(Ie[ee]=ue,ue[2]=w(ne,we,fe))return!0}return!1}}function Aa(w){return w.length>1?function(k,U,q){for(var z=w.length;z--;)if(!w[z](k,U,q))return!1;return!0}:w[0]}function Pf(w,k,U){for(var q=0,z=k.length;q<z;q++)ke(w,k[q],U);return U}function lo(w,k,U,q,z){for(var ee,te=[],ae=0,ne=w.length,we=k!=null;ae<ne;ae++)(ee=w[ae])&&(!U||U(ee,q,z))&&(te.push(ee),we&&k.push(ae));return te}function ba(w,k,U,q,z,ee){return q&&!q[H]&&(q=ba(q)),z&&!z[H]&&(z=ba(z,ee)),Lt(function(te,ae,ne,we){var fe,me,Ie,ue,De=[],_t=[],ht=ae.length,Ct=te||Pf(k||"*",ne.nodeType?[ne]:ne,[]),Xt=w&&(te||!k)?lo(Ct,De,w,ne,we):Ct;if(U?(ue=z||(te?w:ht||q)?[]:ae,U(Xt,ue,ne,we)):ue=Xt,q)for(fe=lo(ue,_t),q(fe,[],ne,we),me=fe.length;me--;)(Ie=fe[me])&&(ue[_t[me]]=!(Xt[_t[me]]=Ie));if(te){if(z||w){if(z){for(fe=[],me=ue.length;me--;)(Ie=ue[me])&&fe.push(Xt[me]=Ie);z(null,ue=[],fe,we)}for(me=ue.length;me--;)(Ie=ue[me])&&(fe=z?_.call(te,Ie):De[me])>-1&&(te[fe]=!(ae[fe]=Ie))}}else ue=lo(ue===ae?ue.splice(ht,ue.length):ue),z?z(null,ae,ue,we):y.apply(ae,ue)})}function Sa(w){for(var k,U,q,z=w.length,ee=c.relative[w[0].type],te=ee||c.relative[" "],ae=ee?1:0,ne=uo(function(me){return me===k},te,!0),we=uo(function(me){return _.call(k,me)>-1},te,!0),fe=[function(me,Ie,ue){var De=!ee&&(ue||Ie!=h)||((k=Ie).nodeType?ne(me,Ie,ue):we(me,Ie,ue));return k=null,De}];ae<z;ae++)if(U=c.relative[w[ae].type])fe=[uo(Aa(fe),U)];else{if(U=c.filter[w[ae].type].apply(null,w[ae].matches),U[H]){for(q=++ae;q<z&&!c.relative[w[q].type];q++);return ba(ae>1&&Aa(fe),ae>1&&co(w.slice(0,ae-1).concat({value:w[ae-2].type===" "?"*":""})).replace(Ge,"$1"),U,ae<q&&Sa(w.slice(ae,q)),q<z&&Sa(w=w.slice(q)),q<z&&co(w))}fe.push(U)}return Aa(fe)}function kf(w,k){var U=k.length>0,q=w.length>0,z=function(ee,te,ae,ne,we){var fe,me,Ie,ue=0,De="0",_t=ee&&[],ht=[],Ct=h,Xt=ee||q&&c.find.TAG("*",we),Jr=j+=Ct==null?1:Math.random()||.1,yt=Xt.length;for(we&&(h=te==E||te||we);De!==yt&&(fe=Xt[De])!=null;De++){if(q&&fe){for(me=0,!te&&fe.ownerDocument!=E&&(Hn(fe),ae=!A);Ie=w[me++];)if(Ie(fe,te||E,ae)){y.call(ne,fe);break}we&&(j=Jr)}U&&((fe=!Ie&&fe)&&ue--,ee&&_t.push(fe))}if(ue+=De,U&&De!==ue){for(me=0;Ie=k[me++];)Ie(_t,ht,te,ae);if(ee){if(ue>0)for(;De--;)_t[De]||ht[De]||(ht[De]=N.call(ne));ht=lo(ht)}y.apply(ne,ht),we&&!ee&&ht.length>0&&ue+k.length>1&&l.uniqueSort(ne)}return we&&(j=Jr,h=Ct),_t};return U?Lt(z):z}function Ca(w,k){var U,q=[],z=[],ee=ve[w+" "];if(!ee){for(k||(k=ss(w)),U=k.length;U--;)ee=Sa(k[U]),ee[H]?q.push(ee):z.push(ee);ee=ve(w,kf(z,q)),ee.selector=w}return ee}function hu(w,k,U,q){var z,ee,te,ae,ne,we=typeof w=="function"&&w,fe=!q&&ss(w=we.selector||w);if(U=U||[],fe.length===1){if(ee=fe[0]=fe[0].slice(0),ee.length>2&&(te=ee[0]).type==="ID"&&k.nodeType===9&&A&&c.relative[ee[1].type]){if(k=(c.find.ID(te.matches[0].replace(wt,pn),k)||[])[0],k)we&&(k=k.parentNode);else return U;w=w.slice(ee.shift().value.length)}for(z=He.needsContext.test(w)?0:ee.length;z--&&(te=ee[z],!c.relative[ae=te.type]);)if((ne=c.find[ae])&&(q=ne(te.matches[0].replace(wt,pn),$n.test(ee[0].type)&&Ia(k.parentNode)||k))){if(ee.splice(z,1),w=q.length&&co(ee),!w)return y.apply(U,q),U;break}}return(we||Ca(w,fe))(q,k,!A,U,!k||$n.test(w)&&Ia(k.parentNode)||k),U}L.sortStable=H.split("").sort(o).join("")===H,Hn(),L.sortDetached=Yr(function(w){return w.compareDocumentPosition(E.createElement("fieldset"))&1}),l.find=ke,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,ke.compile=Ca,ke.select=hu,ke.setDocument=Hn,ke.tokenize=ss,ke.escape=l.escapeSelector,ke.getText=l.text,ke.isXML=l.isXMLDoc,ke.selectors=l.expr,ke.support=l.support,ke.uniqueSort=l.uniqueSort})();var Dt=function(s,c,h){for(var f=[],m=h!==void 0;(s=s[c])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&l(s).is(h))break;f.push(s)}return f},qs=function(s,c){for(var h=[];s;s=s.nextSibling)s.nodeType===1&&s!==c&&h.push(s);return h},Si=l.expr.match.needsContext,Ci=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function qr(s,c,h){return $(c)?l.grep(s,function(f,m){return!!c.call(f,m,f)!==h}):c.nodeType?l.grep(s,function(f){return f===c!==h}):typeof c!="string"?l.grep(s,function(f){return _.call(c,f)>-1!==h}):l.filter(c,s,h)}l.filter=function(s,c,h){var f=c[0];return h&&(s=":not("+s+")"),c.length===1&&f.nodeType===1?l.find.matchesSelector(f,s)?[f]:[]:l.find.matches(s,l.grep(c,function(m){return m.nodeType===1}))},l.fn.extend({find:function(s){var c,h,f=this.length,m=this;if(typeof s!="string")return this.pushStack(l(s).filter(function(){for(c=0;c<f;c++)if(l.contains(m[c],this))return!0}));for(h=this.pushStack([]),c=0;c<f;c++)l.find(s,m[c],h);return f>1?l.uniqueSort(h):h},filter:function(s){return this.pushStack(qr(this,s||[],!1))},not:function(s){return this.pushStack(qr(this,s||[],!0))},is:function(s){return!!qr(this,typeof s=="string"&&Si.test(s)?l(s):s||[],!1).length}});var ur,Ri=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pi=l.fn.init=function(s,c,h){var f,m;if(!s)return this;if(h=h||ur,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?f=[null,s,null]:f=Ri.exec(s),f&&(f[1]||!c))if(f[1]){if(c=c instanceof l?c[0]:c,l.merge(this,l.parseHTML(f[1],c&&c.nodeType?c.ownerDocument||c:X,!0)),Ci.test(f[1])&&l.isPlainObject(c))for(f in c)$(this[f])?this[f](c[f]):this.attr(f,c[f]);return this}else return m=X.getElementById(f[2]),m&&(this[0]=m,this.length=1),this;else return!c||c.jquery?(c||h).find(s):this.constructor(c).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if($(s))return h.ready!==void 0?h.ready(s):s(l)}return l.makeArray(s,this)};Pi.prototype=l.fn,ur=l(X);var ki=/^(?:parents|prev(?:Until|All))/,xi={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(s){var c=l(s,this),h=c.length;return this.filter(function(){for(var f=0;f<h;f++)if(l.contains(this,c[f]))return!0})},closest:function(s,c){var h,f=0,m=this.length,y=[],E=typeof s!="string"&&l(s);if(!Si.test(s)){for(;f<m;f++)for(h=this[f];h&&h!==c;h=h.parentNode)if(h.nodeType<11&&(E?E.index(h)>-1:h.nodeType===1&&l.find.matchesSelector(h,s))){y.push(h);break}}return this.pushStack(y.length>1?l.uniqueSort(y):y)},index:function(s){return s?typeof s=="string"?_.call(l(s),this[0]):_.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,c){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(s,c))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function Di(s,c){for(;(s=s[c])&&s.nodeType!==1;);return s}l.each({parent:function(s){var c=s.parentNode;return c&&c.nodeType!==11?c:null},parents:function(s){return Dt(s,"parentNode")},parentsUntil:function(s,c,h){return Dt(s,"parentNode",h)},next:function(s){return Di(s,"nextSibling")},prev:function(s){return Di(s,"previousSibling")},nextAll:function(s){return Dt(s,"nextSibling")},prevAll:function(s){return Dt(s,"previousSibling")},nextUntil:function(s,c,h){return Dt(s,"nextSibling",h)},prevUntil:function(s,c,h){return Dt(s,"previousSibling",h)},siblings:function(s){return qs((s.parentNode||{}).firstChild,s)},children:function(s){return qs(s.firstChild)},contents:function(s){return s.contentDocument!=null&&i(s.contentDocument)?s.contentDocument:(S(s,"template")&&(s=s.content||s),l.merge([],s.childNodes))}},function(s,c){l.fn[s]=function(h,f){var m=l.map(this,c,h);return s.slice(-5)!=="Until"&&(f=h),f&&typeof f=="string"&&(m=l.filter(f,m)),this.length>1&&(xi[s]||l.uniqueSort(m),ki.test(s)&&m.reverse()),this.pushStack(m)}});var It=/[^\x20\t\r\n\f]+/g;function ga(s){var c={};return l.each(s.match(It)||[],function(h,f){c[f]=!0}),c}l.Callbacks=function(s){s=typeof s=="string"?ga(s):l.extend({},s);var c,h,f,m,y=[],E=[],R=-1,A=function(){for(m=m||s.once,f=c=!0;E.length;R=-1)for(h=E.shift();++R<y.length;)y[R].apply(h[0],h[1])===!1&&s.stopOnFalse&&(R=y.length,h=!1);s.memory||(h=!1),c=!1,m&&(h?y=[]:y="")},D={add:function(){return y&&(h&&!c&&(R=y.length-1,E.push(h)),(function B(H){l.each(H,function(j,J){$(J)?(!s.unique||!D.has(J))&&y.push(J):J&&J.length&&Re(J)!=="string"&&B(J)})})(arguments),h&&!c&&A()),this},remove:function(){return l.each(arguments,function(B,H){for(var j;(j=l.inArray(H,y,j))>-1;)y.splice(j,1),j<=R&&R--}),this},has:function(B){return B?l.inArray(B,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return m=E=[],y=h="",this},disabled:function(){return!y},lock:function(){return m=E=[],!h&&!c&&(y=h=""),this},locked:function(){return!!m},fireWith:function(B,H){return m||(H=H||[],H=[B,H.slice?H.slice():H],E.push(H),c||A()),this},fire:function(){return D.fireWith(this,arguments),this},fired:function(){return!!f}};return D};function cn(s){return s}function Pn(s){throw s}function Ni(s,c,h,f){var m;try{s&&$(m=s.promise)?m.call(s).done(c).fail(h):s&&$(m=s.then)?m.call(s,c,h):c.apply(void 0,[s].slice(f))}catch(y){h.apply(void 0,[y])}}l.extend({Deferred:function(s){var c=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],h="pending",f={state:function(){return h},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return f.then(null,y)},pipe:function(){var y=arguments;return l.Deferred(function(E){l.each(c,function(R,A){var D=$(y[A[4]])&&y[A[4]];m[A[1]](function(){var B=D&&D.apply(this,arguments);B&&$(B.promise)?B.promise().progress(E.notify).done(E.resolve).fail(E.reject):E[A[0]+"With"](this,D?[B]:arguments)})}),y=null}).promise()},then:function(y,E,R){var A=0;function D(B,H,j,J){return function(){var oe=this,Te=arguments,ve=function(){var o,d;if(!(B<A)){if(o=j.apply(oe,Te),o===H.promise())throw new TypeError("Thenable self-resolution");d=o&&(typeof o=="object"||typeof o=="function")&&o.then,$(d)?J?d.call(o,D(A,H,cn,J),D(A,H,Pn,J)):(A++,d.call(o,D(A,H,cn,J),D(A,H,Pn,J),D(A,H,cn,H.notifyWith))):(j!==cn&&(oe=void 0,Te=[o]),(J||H.resolveWith)(oe,Te))}},Fe=J?ve:function(){try{ve()}catch(o){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(o,Fe.error),B+1>=A&&(j!==Pn&&(oe=void 0,Te=[o]),H.rejectWith(oe,Te))}};B?Fe():(l.Deferred.getErrorHook?Fe.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(Fe.error=l.Deferred.getStackHook()),e.setTimeout(Fe))}}return l.Deferred(function(B){c[0][3].add(D(0,B,$(R)?R:cn,B.notifyWith)),c[1][3].add(D(0,B,$(y)?y:cn)),c[2][3].add(D(0,B,$(E)?E:Pn))}).promise()},promise:function(y){return y!=null?l.extend(y,f):f}},m={};return l.each(c,function(y,E){var R=E[2],A=E[5];f[E[1]]=R.add,A&&R.add(function(){h=A},c[3-y][2].disable,c[3-y][3].disable,c[0][2].lock,c[0][3].lock),R.add(E[3].fire),m[E[0]]=function(){return m[E[0]+"With"](this===m?void 0:this,arguments),this},m[E[0]+"With"]=R.fireWith}),f.promise(m),s&&s.call(m,m),m},when:function(s){var c=arguments.length,h=c,f=Array(h),m=a.call(arguments),y=l.Deferred(),E=function(R){return function(A){f[R]=this,m[R]=arguments.length>1?a.call(arguments):A,--c||y.resolveWith(f,m)}};if(c<=1&&(Ni(s,y.done(E(h)).resolve,y.reject,!c),y.state()==="pending"||$(m[h]&&m[h].then)))return y.then();for(;h--;)Ni(m[h],E(h),y.reject);return y.promise()}});var ma=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(s,c){e.console&&e.console.warn&&s&&ma.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,c)},l.readyException=function(s){e.setTimeout(function(){throw s})};var lr=l.Deferred();l.fn.ready=function(s){return lr.then(s).catch(function(c){l.readyException(c)}),this},l.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(s!==!0&&--l.readyWait>0)&&lr.resolveWith(X,[l]))}}),l.ready.then=lr.then;function kn(){X.removeEventListener("DOMContentLoaded",kn),e.removeEventListener("load",kn),l.ready()}X.readyState==="complete"||X.readyState!=="loading"&&!X.documentElement.doScroll?e.setTimeout(l.ready):(X.addEventListener("DOMContentLoaded",kn),e.addEventListener("load",kn));var At=function(s,c,h,f,m,y,E){var R=0,A=s.length,D=h==null;if(Re(h)==="object"){m=!0;for(R in h)At(s,c,R,h[R],!0,y,E)}else if(f!==void 0&&(m=!0,$(f)||(E=!0),D&&(E?(c.call(s,f),c=null):(D=c,c=function(B,H,j){return D.call(l(B),j)})),c))for(;R<A;R++)c(s[R],h,E?f:f.call(s[R],R,c(s[R],h)));return m?s:D?c.call(s):A?c(s[0],h):y},Ze=/^-ms-/,nt=/-([a-z])/g;function Br(s,c){return c.toUpperCase()}function bt(s){return s.replace(Ze,"ms-").replace(nt,Br)}var xn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function hr(){this.expando=l.expando+hr.uid++}hr.uid=1,hr.prototype={cache:function(s){var c=s[this.expando];return c||(c={},xn(s)&&(s.nodeType?s[this.expando]=c:Object.defineProperty(s,this.expando,{value:c,configurable:!0}))),c},set:function(s,c,h){var f,m=this.cache(s);if(typeof c=="string")m[bt(c)]=h;else for(f in c)m[bt(f)]=c[f];return m},get:function(s,c){return c===void 0?this.cache(s):s[this.expando]&&s[this.expando][bt(c)]},access:function(s,c,h){return c===void 0||c&&typeof c=="string"&&h===void 0?this.get(s,c):(this.set(s,c,h),h!==void 0?h:c)},remove:function(s,c){var h,f=s[this.expando];if(f!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(bt):(c=bt(c),c=c in f?[c]:c.match(It)||[]),h=c.length;h--;)delete f[c[h]];(c===void 0||l.isEmptyObject(f))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var c=s[this.expando];return c!==void 0&&!l.isEmptyObject(c)}};var se=new hr,rt=new hr,Bs=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Vi=/[A-Z]/g;function ya(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:Bs.test(s)?JSON.parse(s):s}function $s(s,c,h){var f;if(h===void 0&&s.nodeType===1)if(f="data-"+c.replace(Vi,"-$&").toLowerCase(),h=s.getAttribute(f),typeof h=="string"){try{h=ya(h)}catch{}rt.set(s,c,h)}else h=void 0;return h}l.extend({hasData:function(s){return rt.hasData(s)||se.hasData(s)},data:function(s,c,h){return rt.access(s,c,h)},removeData:function(s,c){rt.remove(s,c)},_data:function(s,c,h){return se.access(s,c,h)},_removeData:function(s,c){se.remove(s,c)}}),l.fn.extend({data:function(s,c){var h,f,m,y=this[0],E=y&&y.attributes;if(s===void 0){if(this.length&&(m=rt.get(y),y.nodeType===1&&!se.get(y,"hasDataAttrs"))){for(h=E.length;h--;)E[h]&&(f=E[h].name,f.indexOf("data-")===0&&(f=bt(f.slice(5)),$s(y,f,m[f])));se.set(y,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){rt.set(this,s)}):At(this,function(R){var A;if(y&&R===void 0)return A=rt.get(y,s),A!==void 0||(A=$s(y,s),A!==void 0)?A:void 0;this.each(function(){rt.set(this,s,R)})},null,c,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){rt.remove(this,s)})}}),l.extend({queue:function(s,c,h){var f;if(s)return c=(c||"fx")+"queue",f=se.get(s,c),h&&(!f||Array.isArray(h)?f=se.access(s,c,l.makeArray(h)):f.push(h)),f||[]},dequeue:function(s,c){c=c||"fx";var h=l.queue(s,c),f=h.length,m=h.shift(),y=l._queueHooks(s,c),E=function(){l.dequeue(s,c)};m==="inprogress"&&(m=h.shift(),f--),m&&(c==="fx"&&h.unshift("inprogress"),delete y.stop,m.call(s,E,y)),!f&&y&&y.empty.fire()},_queueHooks:function(s,c){var h=c+"queueHooks";return se.get(s,h)||se.access(s,h,{empty:l.Callbacks("once memory").add(function(){se.remove(s,[c+"queue",h])})})}}),l.fn.extend({queue:function(s,c){var h=2;return typeof s!="string"&&(c=s,s="fx",h--),arguments.length<h?l.queue(this[0],s):c===void 0?this:this.each(function(){var f=l.queue(this,s,c);l._queueHooks(this,s),s==="fx"&&f[0]!=="inprogress"&&l.dequeue(this,s)})},dequeue:function(s){return this.each(function(){l.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,c){var h,f=1,m=l.Deferred(),y=this,E=this.length,R=function(){--f||m.resolveWith(y,[y])};for(typeof s!="string"&&(c=s,s=void 0),s=s||"fx";E--;)h=se.get(y[E],s+"queueHooks"),h&&h.empty&&(f++,h.empty.add(R));return R(),m.promise(c)}});var Oi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dn=new RegExp("^(?:([+-])=|)("+Oi+")([a-z%]*)$","i"),mt=["Top","Right","Bottom","Left"],Nt=X.documentElement,Bt=function(s){return l.contains(s.ownerDocument,s)},un={composed:!0};Nt.getRootNode&&(Bt=function(s){return l.contains(s.ownerDocument,s)||s.getRootNode(un)===s.ownerDocument});var dr=function(s,c){return s=c||s,s.style.display==="none"||s.style.display===""&&Bt(s)&&l.css(s,"display")==="none"};function fr(s,c,h,f){var m,y,E=20,R=f?function(){return f.cur()}:function(){return l.css(s,c,"")},A=R(),D=h&&h[3]||(l.cssNumber[c]?"":"px"),B=s.nodeType&&(l.cssNumber[c]||D!=="px"&&+A)&&Dn.exec(l.css(s,c));if(B&&B[3]!==D){for(A=A/2,D=D||B[3],B=+A||1;E--;)l.style(s,c,B+D),(1-y)*(1-(y=R()/A||.5))<=0&&(E=0),B=B/y;B=B*2,l.style(s,c,B+D),h=h||[]}return h&&(B=+B||+A||0,m=h[1]?B+(h[1]+1)*h[2]:+h[2],f&&(f.unit=D,f.start=B,f.end=m)),m}var Mi={};function pr(s){var c,h=s.ownerDocument,f=s.nodeName,m=Mi[f];return m||(c=h.body.appendChild(h.createElement(f)),m=l.css(c,"display"),c.parentNode.removeChild(c),m==="none"&&(m="block"),Mi[f]=m,m)}function ln(s,c){for(var h,f,m=[],y=0,E=s.length;y<E;y++)f=s[y],f.style&&(h=f.style.display,c?(h==="none"&&(m[y]=se.get(f,"display")||null,m[y]||(f.style.display="")),f.style.display===""&&dr(f)&&(m[y]=pr(f))):h!=="none"&&(m[y]="none",se.set(f,"display",h)));for(y=0;y<E;y++)m[y]!=null&&(s[y].style.display=m[y]);return s}l.fn.extend({show:function(){return ln(this,!0)},hide:function(){return ln(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){dr(this)?l(this).show():l(this).hide()})}});var $e=/^(?:checkbox|radio)$/i,Li=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Nn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=X.createDocumentFragment(),c=s.appendChild(X.createElement("div")),h=X.createElement("input");h.setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),c.appendChild(h),L.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",L.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",L.option=!!c.lastChild})();var et={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td,L.option||(et.optgroup=et.option=[1,"<select multiple='multiple'>","</select>"]);function ut(s,c){var h;return typeof s.getElementsByTagName<"u"?h=s.getElementsByTagName(c||"*"):typeof s.querySelectorAll<"u"?h=s.querySelectorAll(c||"*"):h=[],c===void 0||c&&S(s,c)?l.merge([s],h):h}function Fi(s,c){for(var h=0,f=s.length;h<f;h++)se.set(s[h],"globalEval",!c||se.get(c[h],"globalEval"))}var Vn=/<|&#?\w+;/;function Hs(s,c,h,f,m){for(var y,E,R,A,D,B,H=c.createDocumentFragment(),j=[],J=0,oe=s.length;J<oe;J++)if(y=s[J],y||y===0)if(Re(y)==="object")l.merge(j,y.nodeType?[y]:y);else if(!Vn.test(y))j.push(c.createTextNode(y));else{for(E=E||H.appendChild(c.createElement("div")),R=(Li.exec(y)||["",""])[1].toLowerCase(),A=et[R]||et._default,E.innerHTML=A[1]+l.htmlPrefilter(y)+A[2],B=A[0];B--;)E=E.lastChild;l.merge(j,E.childNodes),E=H.firstChild,E.textContent=""}for(H.textContent="",J=0;y=j[J++];){if(f&&l.inArray(y,f)>-1){m&&m.push(y);continue}if(D=Bt(y),E=ut(H.appendChild(y),"script"),D&&Fi(E),h)for(B=0;y=E[B++];)Nn.test(y.type||"")&&h.push(y)}return H}var zs=/^([^.]*)(?:\.(.+)|)/;function Vt(){return!0}function hn(){return!1}function $r(s,c,h,f,m,y){var E,R;if(typeof c=="object"){typeof h!="string"&&(f=f||h,h=void 0);for(R in c)$r(s,R,h,f,c[R],y);return s}if(f==null&&m==null?(m=h,f=h=void 0):m==null&&(typeof h=="string"?(m=f,f=void 0):(m=f,f=h,h=void 0)),m===!1)m=hn;else if(!m)return s;return y===1&&(E=m,m=function(A){return l().off(A),E.apply(this,arguments)},m.guid=E.guid||(E.guid=l.guid++)),s.each(function(){l.event.add(this,c,m,f,h)})}l.event={global:{},add:function(s,c,h,f,m){var y,E,R,A,D,B,H,j,J,oe,Te,ve=se.get(s);if(xn(s))for(h.handler&&(y=h,h=y.handler,m=y.selector),m&&l.find.matchesSelector(Nt,m),h.guid||(h.guid=l.guid++),(A=ve.events)||(A=ve.events=Object.create(null)),(E=ve.handle)||(E=ve.handle=function(Fe){return typeof l<"u"&&l.event.triggered!==Fe.type?l.event.dispatch.apply(s,arguments):void 0}),c=(c||"").match(It)||[""],D=c.length;D--;)R=zs.exec(c[D])||[],J=Te=R[1],oe=(R[2]||"").split(".").sort(),J&&(H=l.event.special[J]||{},J=(m?H.delegateType:H.bindType)||J,H=l.event.special[J]||{},B=l.extend({type:J,origType:Te,data:f,handler:h,guid:h.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:oe.join(".")},y),(j=A[J])||(j=A[J]=[],j.delegateCount=0,(!H.setup||H.setup.call(s,f,oe,E)===!1)&&s.addEventListener&&s.addEventListener(J,E)),H.add&&(H.add.call(s,B),B.handler.guid||(B.handler.guid=h.guid)),m?j.splice(j.delegateCount++,0,B):j.push(B),l.event.global[J]=!0)},remove:function(s,c,h,f,m){var y,E,R,A,D,B,H,j,J,oe,Te,ve=se.hasData(s)&&se.get(s);if(!(!ve||!(A=ve.events))){for(c=(c||"").match(It)||[""],D=c.length;D--;){if(R=zs.exec(c[D])||[],J=Te=R[1],oe=(R[2]||"").split(".").sort(),!J){for(J in A)l.event.remove(s,J+c[D],h,f,!0);continue}for(H=l.event.special[J]||{},J=(f?H.delegateType:H.bindType)||J,j=A[J]||[],R=R[2]&&new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"),E=y=j.length;y--;)B=j[y],(m||Te===B.origType)&&(!h||h.guid===B.guid)&&(!R||R.test(B.namespace))&&(!f||f===B.selector||f==="**"&&B.selector)&&(j.splice(y,1),B.selector&&j.delegateCount--,H.remove&&H.remove.call(s,B));E&&!j.length&&((!H.teardown||H.teardown.call(s,oe,ve.handle)===!1)&&l.removeEvent(s,J,ve.handle),delete A[J])}l.isEmptyObject(A)&&se.remove(s,"handle events")}},dispatch:function(s){var c,h,f,m,y,E,R=new Array(arguments.length),A=l.event.fix(s),D=(se.get(this,"events")||Object.create(null))[A.type]||[],B=l.event.special[A.type]||{};for(R[0]=A,c=1;c<arguments.length;c++)R[c]=arguments[c];if(A.delegateTarget=this,!(B.preDispatch&&B.preDispatch.call(this,A)===!1)){for(E=l.event.handlers.call(this,A,D),c=0;(m=E[c++])&&!A.isPropagationStopped();)for(A.currentTarget=m.elem,h=0;(y=m.handlers[h++])&&!A.isImmediatePropagationStopped();)(!A.rnamespace||y.namespace===!1||A.rnamespace.test(y.namespace))&&(A.handleObj=y,A.data=y.data,f=((l.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,R),f!==void 0&&(A.result=f)===!1&&(A.preventDefault(),A.stopPropagation()));return B.postDispatch&&B.postDispatch.call(this,A),A.result}},handlers:function(s,c){var h,f,m,y,E,R=[],A=c.delegateCount,D=s.target;if(A&&D.nodeType&&!(s.type==="click"&&s.button>=1)){for(;D!==this;D=D.parentNode||this)if(D.nodeType===1&&!(s.type==="click"&&D.disabled===!0)){for(y=[],E={},h=0;h<A;h++)f=c[h],m=f.selector+" ",E[m]===void 0&&(E[m]=f.needsContext?l(m,this).index(D)>-1:l.find(m,this,null,[D]).length),E[m]&&y.push(f);y.length&&R.push({elem:D,handlers:y})}}return D=this,A<c.length&&R.push({elem:D,handlers:c.slice(A)}),R},addProp:function(s,c){Object.defineProperty(l.Event.prototype,s,{enumerable:!0,configurable:!0,get:$(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(h){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:h})}})},fix:function(s){return s[l.expando]?s:new l.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var c=this||s;return $e.test(c.type)&&c.click&&S(c,"input")&&On(c,"click",!0),!1},trigger:function(s){var c=this||s;return $e.test(c.type)&&c.click&&S(c,"input")&&On(c,"click"),!0},_default:function(s){var c=s.target;return $e.test(c.type)&&c.click&&S(c,"input")&&se.get(c,"click")||S(c,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function On(s,c,h){if(!h){se.get(s,c)===void 0&&l.event.add(s,c,Vt);return}se.set(s,c,!1),l.event.add(s,c,{namespace:!1,handler:function(f){var m,y=se.get(this,c);if(f.isTrigger&1&&this[c]){if(y)(l.event.special[c]||{}).delegateType&&f.stopPropagation();else if(y=a.call(arguments),se.set(this,c,y),this[c](),m=se.get(this,c),se.set(this,c,!1),y!==m)return f.stopImmediatePropagation(),f.preventDefault(),m}else y&&(se.set(this,c,l.event.trigger(y[0],y.slice(1),this)),f.stopPropagation(),f.isImmediatePropagationStopped=Vt)}})}l.removeEvent=function(s,c,h){s.removeEventListener&&s.removeEventListener(c,h)},l.Event=function(s,c){if(!(this instanceof l.Event))return new l.Event(s,c);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Vt:hn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,c&&l.extend(this,c),this.timeStamp=s&&s.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:hn,isPropagationStopped:hn,isImmediatePropagationStopped:hn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Vt,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Vt,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Vt,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(s,c){function h(f){if(X.documentMode){var m=se.get(this,"handle"),y=l.event.fix(f);y.type=f.type==="focusin"?"focus":"blur",y.isSimulated=!0,m(f),y.target===y.currentTarget&&m(y)}else l.event.simulate(c,f.target,l.event.fix(f))}l.event.special[s]={setup:function(){var f;if(On(this,s,!0),X.documentMode)f=se.get(this,c),f||this.addEventListener(c,h),se.set(this,c,(f||0)+1);else return!1},trigger:function(){return On(this,s),!0},teardown:function(){var f;if(X.documentMode)f=se.get(this,c)-1,f?se.set(this,c,f):(this.removeEventListener(c,h),se.remove(this,c));else return!1},_default:function(f){return se.get(f.target,s)},delegateType:c},l.event.special[c]={setup:function(){var f=this.ownerDocument||this.document||this,m=X.documentMode?this:f,y=se.get(m,c);y||(X.documentMode?this.addEventListener(c,h):f.addEventListener(s,h,!0)),se.set(m,c,(y||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,m=X.documentMode?this:f,y=se.get(m,c)-1;y?se.set(m,c,y):(X.documentMode?this.removeEventListener(c,h):f.removeEventListener(s,h,!0),se.remove(m,c))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,c){l.event.special[s]={delegateType:c,bindType:c,handle:function(h){var f,m=this,y=h.relatedTarget,E=h.handleObj;return(!y||y!==m&&!l.contains(m,y))&&(h.type=E.origType,f=E.handler.apply(this,arguments),h.type=c),f}}}),l.fn.extend({on:function(s,c,h,f){return $r(this,s,c,h,f)},one:function(s,c,h,f){return $r(this,s,c,h,f,1)},off:function(s,c,h){var f,m;if(s&&s.preventDefault&&s.handleObj)return f=s.handleObj,l(s.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof s=="object"){for(m in s)this.off(m,c,s[m]);return this}return(c===!1||typeof c=="function")&&(h=c,c=void 0),h===!1&&(h=hn),this.each(function(){l.event.remove(this,s,h,c)})}});var gr=/<script|<style|<link/i,_a=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ui(s,c){return S(s,"table")&&S(c.nodeType!==11?c:c.firstChild,"tr")&&l(s).children("tbody")[0]||s}function Ws(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function ji(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function Hr(s,c){var h,f,m,y,E,R,A;if(c.nodeType===1){if(se.hasData(s)&&(y=se.get(s),A=y.events,A)){se.remove(c,"handle events");for(m in A)for(h=0,f=A[m].length;h<f;h++)l.event.add(c,m,A[m][h])}rt.hasData(s)&&(E=rt.access(s),R=l.extend({},E),rt.set(c,R))}}function Gs(s,c){var h=c.nodeName.toLowerCase();h==="input"&&$e.test(s.type)?c.checked=s.checked:(h==="input"||h==="textarea")&&(c.defaultValue=s.defaultValue)}function Mn(s,c,h,f){c=u(c);var m,y,E,R,A,D,B=0,H=s.length,j=H-1,J=c[0],oe=$(J);if(oe||H>1&&typeof J=="string"&&!L.checkClone&&_a.test(J))return s.each(function(Te){var ve=s.eq(Te);oe&&(c[0]=J.call(this,Te,ve.html())),Mn(ve,c,h,f)});if(H&&(m=Hs(c,s[0].ownerDocument,!1,s,f),y=m.firstChild,m.childNodes.length===1&&(m=y),y||f)){for(E=l.map(ut(m,"script"),Ws),R=E.length;B<H;B++)A=m,B!==j&&(A=l.clone(A,!0,!0),R&&l.merge(E,ut(A,"script"))),h.call(s[B],A,B);if(R)for(D=E[E.length-1].ownerDocument,l.map(E,ji),B=0;B<R;B++)A=E[B],Nn.test(A.type||"")&&!se.access(A,"globalEval")&&l.contains(D,A)&&(A.src&&(A.type||"").toLowerCase()!=="module"?l._evalUrl&&!A.noModule&&l._evalUrl(A.src,{nonce:A.nonce||A.getAttribute("nonce")},D):pe(A.textContent.replace($t,""),A,D))}return s}function qi(s,c,h){for(var f,m=c?l.filter(c,s):s,y=0;(f=m[y])!=null;y++)!h&&f.nodeType===1&&l.cleanData(ut(f)),f.parentNode&&(h&&Bt(f)&&Fi(ut(f,"script")),f.parentNode.removeChild(f));return s}l.extend({htmlPrefilter:function(s){return s},clone:function(s,c,h){var f,m,y,E,R=s.cloneNode(!0),A=Bt(s);if(!L.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!l.isXMLDoc(s))for(E=ut(R),y=ut(s),f=0,m=y.length;f<m;f++)Gs(y[f],E[f]);if(c)if(h)for(y=y||ut(s),E=E||ut(R),f=0,m=y.length;f<m;f++)Hr(y[f],E[f]);else Hr(s,R);return E=ut(R,"script"),E.length>0&&Fi(E,!A&&ut(s,"script")),R},cleanData:function(s){for(var c,h,f,m=l.event.special,y=0;(h=s[y])!==void 0;y++)if(xn(h)){if(c=h[se.expando]){if(c.events)for(f in c.events)m[f]?l.event.remove(h,f):l.removeEvent(h,f,c.handle);h[se.expando]=void 0}h[rt.expando]&&(h[rt.expando]=void 0)}}}),l.fn.extend({detach:function(s){return qi(this,s,!0)},remove:function(s){return qi(this,s)},text:function(s){return At(this,function(c){return c===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,s,arguments.length)},append:function(){return Mn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Ui(this,s);c.appendChild(s)}})},prepend:function(){return Mn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Ui(this,s);c.insertBefore(s,c.firstChild)}})},before:function(){return Mn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return Mn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,c=0;(s=this[c])!=null;c++)s.nodeType===1&&(l.cleanData(ut(s,!1)),s.textContent="");return this},clone:function(s,c){return s=s??!1,c=c??s,this.map(function(){return l.clone(this,s,c)})},html:function(s){return At(this,function(c){var h=this[0]||{},f=0,m=this.length;if(c===void 0&&h.nodeType===1)return h.innerHTML;if(typeof c=="string"&&!gr.test(c)&&!et[(Li.exec(c)||["",""])[1].toLowerCase()]){c=l.htmlPrefilter(c);try{for(;f<m;f++)h=this[f]||{},h.nodeType===1&&(l.cleanData(ut(h,!1)),h.innerHTML=c);h=0}catch{}}h&&this.empty().append(c)},null,s,arguments.length)},replaceWith:function(){var s=[];return Mn(this,arguments,function(c){var h=this.parentNode;l.inArray(this,s)<0&&(l.cleanData(ut(this)),h&&h.replaceChild(c,this))},s)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,c){l.fn[s]=function(h){for(var f,m=[],y=l(h),E=y.length-1,R=0;R<=E;R++)f=R===E?this:this.clone(!0),l(y[R])[c](f),p.apply(m,f.get());return this.pushStack(m)}});var Bi=new RegExp("^("+Oi+")(?!px)[a-z%]+$","i"),Ln=/^--/,mr=function(s){var c=s.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(s)},zr=function(s,c,h){var f,m,y={};for(m in c)y[m]=s.style[m],s.style[m]=c[m];f=h.call(s);for(m in c)s.style[m]=y[m];return f},yr=new RegExp(mt.join("|"),"i");(function(){function s(){if(D){A.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",D.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Nt.appendChild(A).appendChild(D);var B=e.getComputedStyle(D);h=B.top!=="1%",R=c(B.marginLeft)===12,D.style.right="60%",y=c(B.right)===36,f=c(B.width)===36,D.style.position="absolute",m=c(D.offsetWidth/3)===12,Nt.removeChild(A),D=null}}function c(B){return Math.round(parseFloat(B))}var h,f,m,y,E,R,A=X.createElement("div"),D=X.createElement("div");D.style&&(D.style.backgroundClip="content-box",D.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle=D.style.backgroundClip==="content-box",l.extend(L,{boxSizingReliable:function(){return s(),f},pixelBoxStyles:function(){return s(),y},pixelPosition:function(){return s(),h},reliableMarginLeft:function(){return s(),R},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var B,H,j,J;return E==null&&(B=X.createElement("table"),H=X.createElement("tr"),j=X.createElement("div"),B.style.cssText="position:absolute;left:-11111px;border-collapse:separate",H.style.cssText="box-sizing:content-box;border:1px solid",H.style.height="1px",j.style.height="9px",j.style.display="block",Nt.appendChild(B).appendChild(H).appendChild(j),J=e.getComputedStyle(H),E=parseInt(J.height,10)+parseInt(J.borderTopWidth,10)+parseInt(J.borderBottomWidth,10)===H.offsetHeight,Nt.removeChild(B)),E}}))})();function Et(s,c,h){var f,m,y,E,R=Ln.test(c),A=s.style;return h=h||mr(s),h&&(E=h.getPropertyValue(c)||h[c],R&&E&&(E=E.replace(Ge,"$1")||void 0),E===""&&!Bt(s)&&(E=l.style(s,c)),!L.pixelBoxStyles()&&Bi.test(E)&&yr.test(c)&&(f=A.width,m=A.minWidth,y=A.maxWidth,A.minWidth=A.maxWidth=A.width=E,E=h.width,A.width=f,A.minWidth=m,A.maxWidth=y)),E!==void 0?E+"":E}function Wr(s,c){return{get:function(){if(s()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Ks=["Webkit","Moz","ms"],$i=X.createElement("div").style,Hi={};function Qs(s){for(var c=s[0].toUpperCase()+s.slice(1),h=Ks.length;h--;)if(s=Ks[h]+c,s in $i)return s}function _r(s){var c=l.cssProps[s]||Hi[s];return c||(s in $i?s:Hi[s]=Qs(s)||s)}var zi=/^(none|table(?!-c[ea]).+)/,Xs={position:"absolute",visibility:"hidden",display:"block"},Wi={letterSpacing:"0",fontWeight:"400"};function Gi(s,c,h){var f=Dn.exec(c);return f?Math.max(0,f[2]-(h||0))+(f[3]||"px"):c}function Ki(s,c,h,f,m,y){var E=c==="width"?1:0,R=0,A=0,D=0;if(h===(f?"border":"content"))return 0;for(;E<4;E+=2)h==="margin"&&(D+=l.css(s,h+mt[E],!0,m)),f?(h==="content"&&(A-=l.css(s,"padding"+mt[E],!0,m)),h!=="margin"&&(A-=l.css(s,"border"+mt[E]+"Width",!0,m))):(A+=l.css(s,"padding"+mt[E],!0,m),h!=="padding"?A+=l.css(s,"border"+mt[E]+"Width",!0,m):R+=l.css(s,"border"+mt[E]+"Width",!0,m));return!f&&y>=0&&(A+=Math.max(0,Math.ceil(s["offset"+c[0].toUpperCase()+c.slice(1)]-y-A-R-.5))||0),A+D}function Ot(s,c,h){var f=mr(s),m=!L.boxSizingReliable()||h,y=m&&l.css(s,"boxSizing",!1,f)==="border-box",E=y,R=Et(s,c,f),A="offset"+c[0].toUpperCase()+c.slice(1);if(Bi.test(R)){if(!h)return R;R="auto"}return(!L.boxSizingReliable()&&y||!L.reliableTrDimensions()&&S(s,"tr")||R==="auto"||!parseFloat(R)&&l.css(s,"display",!1,f)==="inline")&&s.getClientRects().length&&(y=l.css(s,"boxSizing",!1,f)==="border-box",E=A in s,E&&(R=s[A])),R=parseFloat(R)||0,R+Ki(s,c,h||(y?"border":"content"),E,f,R)+"px"}l.extend({cssHooks:{opacity:{get:function(s,c){if(c){var h=Et(s,"opacity");return h===""?"1":h}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,c,h,f){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,y,E,R=bt(c),A=Ln.test(c),D=s.style;if(A||(c=_r(R)),E=l.cssHooks[c]||l.cssHooks[R],h!==void 0){if(y=typeof h,y==="string"&&(m=Dn.exec(h))&&m[1]&&(h=fr(s,c,m),y="number"),h==null||h!==h)return;y==="number"&&!A&&(h+=m&&m[3]||(l.cssNumber[R]?"":"px")),!L.clearCloneStyle&&h===""&&c.indexOf("background")===0&&(D[c]="inherit"),(!E||!("set"in E)||(h=E.set(s,h,f))!==void 0)&&(A?D.setProperty(c,h):D[c]=h)}else return E&&"get"in E&&(m=E.get(s,!1,f))!==void 0?m:D[c]}},css:function(s,c,h,f){var m,y,E,R=bt(c),A=Ln.test(c);return A||(c=_r(R)),E=l.cssHooks[c]||l.cssHooks[R],E&&"get"in E&&(m=E.get(s,!0,h)),m===void 0&&(m=Et(s,c,f)),m==="normal"&&c in Wi&&(m=Wi[c]),h===""||h?(y=parseFloat(m),h===!0||isFinite(y)?y||0:m):m}}),l.each(["height","width"],function(s,c){l.cssHooks[c]={get:function(h,f,m){if(f)return zi.test(l.css(h,"display"))&&(!h.getClientRects().length||!h.getBoundingClientRect().width)?zr(h,Xs,function(){return Ot(h,c,m)}):Ot(h,c,m)},set:function(h,f,m){var y,E=mr(h),R=!L.scrollboxSize()&&E.position==="absolute",A=R||m,D=A&&l.css(h,"boxSizing",!1,E)==="border-box",B=m?Ki(h,c,m,D,E):0;return D&&R&&(B-=Math.ceil(h["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(E[c])-Ki(h,c,"border",!1,E)-.5)),B&&(y=Dn.exec(f))&&(y[3]||"px")!=="px"&&(h.style[c]=f,f=l.css(h,c)),Gi(h,f,B)}}}),l.cssHooks.marginLeft=Wr(L.reliableMarginLeft,function(s,c){if(c)return(parseFloat(Et(s,"marginLeft"))||s.getBoundingClientRect().left-zr(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(s,c){l.cssHooks[s+c]={expand:function(h){for(var f=0,m={},y=typeof h=="string"?h.split(" "):[h];f<4;f++)m[s+mt[f]+c]=y[f]||y[f-2]||y[0];return m}},s!=="margin"&&(l.cssHooks[s+c].set=Gi)}),l.fn.extend({css:function(s,c){return At(this,function(h,f,m){var y,E,R={},A=0;if(Array.isArray(f)){for(y=mr(h),E=f.length;A<E;A++)R[f[A]]=l.css(h,f[A],!1,y);return R}return m!==void 0?l.style(h,f,m):l.css(h,f)},s,c,arguments.length>1)}});function Ve(s,c,h,f,m){return new Ve.prototype.init(s,c,h,f,m)}l.Tween=Ve,Ve.prototype={constructor:Ve,init:function(s,c,h,f,m,y){this.elem=s,this.prop=h,this.easing=m||l.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=f,this.unit=y||(l.cssNumber[h]?"":"px")},cur:function(){var s=Ve.propHooks[this.prop];return s&&s.get?s.get(this):Ve.propHooks._default.get(this)},run:function(s){var c,h=Ve.propHooks[this.prop];return this.options.duration?this.pos=c=l.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=c=s,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),h&&h.set?h.set(this):Ve.propHooks._default.set(this),this}},Ve.prototype.init.prototype=Ve.prototype,Ve.propHooks={_default:{get:function(s){var c;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(c=l.css(s.elem,s.prop,""),!c||c==="auto"?0:c)},set:function(s){l.fx.step[s.prop]?l.fx.step[s.prop](s):s.elem.nodeType===1&&(l.cssHooks[s.prop]||s.elem.style[_r(s.prop)]!=null)?l.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Ve.propHooks.scrollTop=Ve.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},l.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},l.fx=Ve.prototype.init,l.fx.step={};var St,Ht,Qi=/^(?:toggle|show|hide)$/,xe=/queueHooks$/;function Fn(){Ht&&(X.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Fn):e.setTimeout(Fn,l.fx.interval),l.fx.tick())}function Un(){return e.setTimeout(function(){St=void 0}),St=Date.now()}function zt(s,c){var h,f=0,m={height:s};for(c=c?1:0;f<4;f+=2-c)h=mt[f],m["margin"+h]=m["padding"+h]=s;return c&&(m.opacity=m.width=s),m}function Ys(s,c,h){for(var f,m=(Tt.tweeners[c]||[]).concat(Tt.tweeners["*"]),y=0,E=m.length;y<E;y++)if(f=m[y].call(h,c,s))return f}function Js(s,c,h){var f,m,y,E,R,A,D,B,H="width"in c||"height"in c,j=this,J={},oe=s.style,Te=s.nodeType&&dr(s),ve=se.get(s,"fxshow");h.queue||(E=l._queueHooks(s,"fx"),E.unqueued==null&&(E.unqueued=0,R=E.empty.fire,E.empty.fire=function(){E.unqueued||R()}),E.unqueued++,j.always(function(){j.always(function(){E.unqueued--,l.queue(s,"fx").length||E.empty.fire()})}));for(f in c)if(m=c[f],Qi.test(m)){if(delete c[f],y=y||m==="toggle",m===(Te?"hide":"show"))if(m==="show"&&ve&&ve[f]!==void 0)Te=!0;else continue;J[f]=ve&&ve[f]||l.style(s,f)}if(A=!l.isEmptyObject(c),!(!A&&l.isEmptyObject(J))){H&&s.nodeType===1&&(h.overflow=[oe.overflow,oe.overflowX,oe.overflowY],D=ve&&ve.display,D==null&&(D=se.get(s,"display")),B=l.css(s,"display"),B==="none"&&(D?B=D:(ln([s],!0),D=s.style.display||D,B=l.css(s,"display"),ln([s]))),(B==="inline"||B==="inline-block"&&D!=null)&&l.css(s,"float")==="none"&&(A||(j.done(function(){oe.display=D}),D==null&&(B=oe.display,D=B==="none"?"":B)),oe.display="inline-block")),h.overflow&&(oe.overflow="hidden",j.always(function(){oe.overflow=h.overflow[0],oe.overflowX=h.overflow[1],oe.overflowY=h.overflow[2]})),A=!1;for(f in J)A||(ve?"hidden"in ve&&(Te=ve.hidden):ve=se.access(s,"fxshow",{display:D}),y&&(ve.hidden=!Te),Te&&ln([s],!0),j.done(function(){Te||ln([s]),se.remove(s,"fxshow");for(f in J)l.style(s,f,J[f])})),A=Ys(Te?ve[f]:0,f,j),f in ve||(ve[f]=A.start,Te&&(A.end=A.start,A.start=0))}}function va(s,c){var h,f,m,y,E;for(h in s)if(f=bt(h),m=c[f],y=s[h],Array.isArray(y)&&(m=y[1],y=s[h]=y[0]),h!==f&&(s[f]=y,delete s[h]),E=l.cssHooks[f],E&&"expand"in E){y=E.expand(y),delete s[f];for(h in y)h in s||(s[h]=y[h],c[h]=m)}else c[f]=m}function Tt(s,c,h){var f,m,y=0,E=Tt.prefilters.length,R=l.Deferred().always(function(){delete A.elem}),A=function(){if(m)return!1;for(var H=St||Un(),j=Math.max(0,D.startTime+D.duration-H),J=j/D.duration||0,oe=1-J,Te=0,ve=D.tweens.length;Te<ve;Te++)D.tweens[Te].run(oe);return R.notifyWith(s,[D,oe,j]),oe<1&&ve?j:(ve||R.notifyWith(s,[D,1,0]),R.resolveWith(s,[D]),!1)},D=R.promise({elem:s,props:l.extend({},c),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},h),originalProperties:c,originalOptions:h,startTime:St||Un(),duration:h.duration,tweens:[],createTween:function(H,j){var J=l.Tween(s,D.opts,H,j,D.opts.specialEasing[H]||D.opts.easing);return D.tweens.push(J),J},stop:function(H){var j=0,J=H?D.tweens.length:0;if(m)return this;for(m=!0;j<J;j++)D.tweens[j].run(1);return H?(R.notifyWith(s,[D,1,0]),R.resolveWith(s,[D,H])):R.rejectWith(s,[D,H]),this}}),B=D.props;for(va(B,D.opts.specialEasing);y<E;y++)if(f=Tt.prefilters[y].call(D,s,B,D.opts),f)return $(f.stop)&&(l._queueHooks(D.elem,D.opts.queue).stop=f.stop.bind(f)),f;return l.map(B,Ys,D),$(D.opts.start)&&D.opts.start.call(s,D),D.progress(D.opts.progress).done(D.opts.done,D.opts.complete).fail(D.opts.fail).always(D.opts.always),l.fx.timer(l.extend(A,{elem:s,anim:D,queue:D.opts.queue})),D}l.Animation=l.extend(Tt,{tweeners:{"*":[function(s,c){var h=this.createTween(s,c);return fr(h.elem,s,Dn.exec(c),h),h}]},tweener:function(s,c){$(s)?(c=s,s=["*"]):s=s.match(It);for(var h,f=0,m=s.length;f<m;f++)h=s[f],Tt.tweeners[h]=Tt.tweeners[h]||[],Tt.tweeners[h].unshift(c)},prefilters:[Js],prefilter:function(s,c){c?Tt.prefilters.unshift(s):Tt.prefilters.push(s)}}),l.speed=function(s,c,h){var f=s&&typeof s=="object"?l.extend({},s):{complete:h||!h&&c||$(s)&&s,duration:s,easing:h&&c||c&&!$(c)&&c};return l.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in l.fx.speeds?f.duration=l.fx.speeds[f.duration]:f.duration=l.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){$(f.old)&&f.old.call(this),f.queue&&l.dequeue(this,f.queue)},f},l.fn.extend({fadeTo:function(s,c,h,f){return this.filter(dr).css("opacity",0).show().end().animate({opacity:c},s,h,f)},animate:function(s,c,h,f){var m=l.isEmptyObject(s),y=l.speed(c,h,f),E=function(){var R=Tt(this,l.extend({},s),y);(m||se.get(this,"finish"))&&R.stop(!0)};return E.finish=E,m||y.queue===!1?this.each(E):this.queue(y.queue,E)},stop:function(s,c,h){var f=function(m){var y=m.stop;delete m.stop,y(h)};return typeof s!="string"&&(h=c,c=s,s=void 0),c&&this.queue(s||"fx",[]),this.each(function(){var m=!0,y=s!=null&&s+"queueHooks",E=l.timers,R=se.get(this);if(y)R[y]&&R[y].stop&&f(R[y]);else for(y in R)R[y]&&R[y].stop&&xe.test(y)&&f(R[y]);for(y=E.length;y--;)E[y].elem===this&&(s==null||E[y].queue===s)&&(E[y].anim.stop(h),m=!1,E.splice(y,1));(m||!h)&&l.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var c,h=se.get(this),f=h[s+"queue"],m=h[s+"queueHooks"],y=l.timers,E=f?f.length:0;for(h.finish=!0,l.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),c=y.length;c--;)y[c].elem===this&&y[c].queue===s&&(y[c].anim.stop(!0),y.splice(c,1));for(c=0;c<E;c++)f[c]&&f[c].finish&&f[c].finish.call(this);delete h.finish})}}),l.each(["toggle","show","hide"],function(s,c){var h=l.fn[c];l.fn[c]=function(f,m,y){return f==null||typeof f=="boolean"?h.apply(this,arguments):this.animate(zt(c,!0),f,m,y)}}),l.each({slideDown:zt("show"),slideUp:zt("hide"),slideToggle:zt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,c){l.fn[s]=function(h,f,m){return this.animate(c,h,f,m)}}),l.timers=[],l.fx.tick=function(){var s,c=0,h=l.timers;for(St=Date.now();c<h.length;c++)s=h[c],!s()&&h[c]===s&&h.splice(c--,1);h.length||l.fx.stop(),St=void 0},l.fx.timer=function(s){l.timers.push(s),l.fx.start()},l.fx.interval=13,l.fx.start=function(){Ht||(Ht=!0,Fn())},l.fx.stop=function(){Ht=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(s,c){return s=l.fx&&l.fx.speeds[s]||s,c=c||"fx",this.queue(c,function(h,f){var m=e.setTimeout(h,s);f.stop=function(){e.clearTimeout(m)}})},(function(){var s=X.createElement("input"),c=X.createElement("select"),h=c.appendChild(X.createElement("option"));s.type="checkbox",L.checkOn=s.value!=="",L.optSelected=h.selected,s=X.createElement("input"),s.value="t",s.type="radio",L.radioValue=s.value==="t"})();var Zs,vr=l.expr.attrHandle;l.fn.extend({attr:function(s,c){return At(this,l.attr,s,c,arguments.length>1)},removeAttr:function(s){return this.each(function(){l.removeAttr(this,s)})}}),l.extend({attr:function(s,c,h){var f,m,y=s.nodeType;if(!(y===3||y===8||y===2)){if(typeof s.getAttribute>"u")return l.prop(s,c,h);if((y!==1||!l.isXMLDoc(s))&&(m=l.attrHooks[c.toLowerCase()]||(l.expr.match.bool.test(c)?Zs:void 0)),h!==void 0){if(h===null){l.removeAttr(s,c);return}return m&&"set"in m&&(f=m.set(s,h,c))!==void 0?f:(s.setAttribute(c,h+""),h)}return m&&"get"in m&&(f=m.get(s,c))!==null?f:(f=l.find.attr(s,c),f??void 0)}},attrHooks:{type:{set:function(s,c){if(!L.radioValue&&c==="radio"&&S(s,"input")){var h=s.value;return s.setAttribute("type",c),h&&(s.value=h),c}}}},removeAttr:function(s,c){var h,f=0,m=c&&c.match(It);if(m&&s.nodeType===1)for(;h=m[f++];)s.removeAttribute(h)}}),Zs={set:function(s,c,h){return c===!1?l.removeAttr(s,h):s.setAttribute(h,h),h}},l.each(l.expr.match.bool.source.match(/\w+/g),function(s,c){var h=vr[c]||l.find.attr;vr[c]=function(f,m,y){var E,R,A=m.toLowerCase();return y||(R=vr[A],vr[A]=E,E=h(f,m,y)!=null?A:null,vr[A]=R),E}});var Er=/^(?:input|select|textarea|button)$/i,dn=/^(?:a|area)$/i;l.fn.extend({prop:function(s,c){return At(this,l.prop,s,c,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[l.propFix[s]||s]})}}),l.extend({prop:function(s,c,h){var f,m,y=s.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!l.isXMLDoc(s))&&(c=l.propFix[c]||c,m=l.propHooks[c]),h!==void 0?m&&"set"in m&&(f=m.set(s,h,c))!==void 0?f:s[c]=h:m&&"get"in m&&(f=m.get(s,c))!==null?f:s[c]},propHooks:{tabIndex:{get:function(s){var c=l.find.attr(s,"tabindex");return c?parseInt(c,10):Er.test(s.nodeName)||dn.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),L.optSelected||(l.propHooks.selected={get:function(s){var c=s.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(s){var c=s.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function Wt(s){var c=s.match(It)||[];return c.join(" ")}function Gt(s){return s.getAttribute&&s.getAttribute("class")||""}function Gr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(It)||[]:[]}l.fn.extend({addClass:function(s){var c,h,f,m,y,E;return $(s)?this.each(function(R){l(this).addClass(s.call(this,R,Gt(this)))}):(c=Gr(s),c.length?this.each(function(){if(f=Gt(this),h=this.nodeType===1&&" "+Wt(f)+" ",h){for(y=0;y<c.length;y++)m=c[y],h.indexOf(" "+m+" ")<0&&(h+=m+" ");E=Wt(h),f!==E&&this.setAttribute("class",E)}}):this)},removeClass:function(s){var c,h,f,m,y,E;return $(s)?this.each(function(R){l(this).removeClass(s.call(this,R,Gt(this)))}):arguments.length?(c=Gr(s),c.length?this.each(function(){if(f=Gt(this),h=this.nodeType===1&&" "+Wt(f)+" ",h){for(y=0;y<c.length;y++)for(m=c[y];h.indexOf(" "+m+" ")>-1;)h=h.replace(" "+m+" "," ");E=Wt(h),f!==E&&this.setAttribute("class",E)}}):this):this.attr("class","")},toggleClass:function(s,c){var h,f,m,y,E=typeof s,R=E==="string"||Array.isArray(s);return $(s)?this.each(function(A){l(this).toggleClass(s.call(this,A,Gt(this),c),c)}):typeof c=="boolean"&&R?c?this.addClass(s):this.removeClass(s):(h=Gr(s),this.each(function(){if(R)for(y=l(this),m=0;m<h.length;m++)f=h[m],y.hasClass(f)?y.removeClass(f):y.addClass(f);else(s===void 0||E==="boolean")&&(f=Gt(this),f&&se.set(this,"__className__",f),this.setAttribute&&this.setAttribute("class",f||s===!1?"":se.get(this,"__className__")||""))}))},hasClass:function(s){var c,h,f=0;for(c=" "+s+" ";h=this[f++];)if(h.nodeType===1&&(" "+Wt(Gt(h))+" ").indexOf(c)>-1)return!0;return!1}});var eo=/\r/g;l.fn.extend({val:function(s){var c,h,f,m=this[0];return arguments.length?(f=$(s),this.each(function(y){var E;this.nodeType===1&&(f?E=s.call(this,y,l(this).val()):E=s,E==null?E="":typeof E=="number"?E+="":Array.isArray(E)&&(E=l.map(E,function(R){return R==null?"":R+""})),c=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,E,"value")===void 0)&&(this.value=E))})):m?(c=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()],c&&"get"in c&&(h=c.get(m,"value"))!==void 0?h:(h=m.value,typeof h=="string"?h.replace(eo,""):h??"")):void 0}}),l.extend({valHooks:{option:{get:function(s){var c=l.find.attr(s,"value");return c??Wt(l.text(s))}},select:{get:function(s){var c,h,f,m=s.options,y=s.selectedIndex,E=s.type==="select-one",R=E?null:[],A=E?y+1:m.length;for(y<0?f=A:f=E?y:0;f<A;f++)if(h=m[f],(h.selected||f===y)&&!h.disabled&&(!h.parentNode.disabled||!S(h.parentNode,"optgroup"))){if(c=l(h).val(),E)return c;R.push(c)}return R},set:function(s,c){for(var h,f,m=s.options,y=l.makeArray(c),E=m.length;E--;)f=m[E],(f.selected=l.inArray(l.valHooks.option.get(f),y)>-1)&&(h=!0);return h||(s.selectedIndex=-1),y}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(s,c){if(Array.isArray(c))return s.checked=l.inArray(l(s).val(),c)>-1}},L.checkOn||(l.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var jn=e.location,fn={guid:Date.now()},Xi=/\?/;l.parseXML=function(s){var c,h;if(!s||typeof s!="string")return null;try{c=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return h=c&&c.getElementsByTagName("parsererror")[0],(!c||h)&&l.error("Invalid XML: "+(h?l.map(h.childNodes,function(f){return f.textContent}).join(`
`):s)),c};var to=/^(?:focusinfocus|focusoutblur)$/,no=function(s){s.stopPropagation()};l.extend(l.event,{trigger:function(s,c,h,f){var m,y,E,R,A,D,B,H,j=[h||X],J=P.call(s,"type")?s.type:s,oe=P.call(s,"namespace")?s.namespace.split("."):[];if(y=H=E=h=h||X,!(h.nodeType===3||h.nodeType===8)&&!to.test(J+l.event.triggered)&&(J.indexOf(".")>-1&&(oe=J.split("."),J=oe.shift(),oe.sort()),A=J.indexOf(":")<0&&"on"+J,s=s[l.expando]?s:new l.Event(J,typeof s=="object"&&s),s.isTrigger=f?2:3,s.namespace=oe.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=h),c=c==null?[s]:l.makeArray(c,[s]),B=l.event.special[J]||{},!(!f&&B.trigger&&B.trigger.apply(h,c)===!1))){if(!f&&!B.noBubble&&!G(h)){for(R=B.delegateType||J,to.test(R+J)||(y=y.parentNode);y;y=y.parentNode)j.push(y),E=y;E===(h.ownerDocument||X)&&j.push(E.defaultView||E.parentWindow||e)}for(m=0;(y=j[m++])&&!s.isPropagationStopped();)H=y,s.type=m>1?R:B.bindType||J,D=(se.get(y,"events")||Object.create(null))[s.type]&&se.get(y,"handle"),D&&D.apply(y,c),D=A&&y[A],D&&D.apply&&xn(y)&&(s.result=D.apply(y,c),s.result===!1&&s.preventDefault());return s.type=J,!f&&!s.isDefaultPrevented()&&(!B._default||B._default.apply(j.pop(),c)===!1)&&xn(h)&&A&&$(h[J])&&!G(h)&&(E=h[A],E&&(h[A]=null),l.event.triggered=J,s.isPropagationStopped()&&H.addEventListener(J,no),h[J](),s.isPropagationStopped()&&H.removeEventListener(J,no),l.event.triggered=void 0,E&&(h[A]=E)),s.result}},simulate:function(s,c,h){var f=l.extend(new l.Event,h,{type:s,isSimulated:!0});l.event.trigger(f,null,c)}}),l.fn.extend({trigger:function(s,c){return this.each(function(){l.event.trigger(s,c,this)})},triggerHandler:function(s,c){var h=this[0];if(h)return l.event.trigger(s,c,h,!0)}});var Kt=/\[\]$/,ro=/\r?\n/g,Yi=/^(?:submit|button|image|reset|file)$/i,Kr=/^(?:input|select|textarea|keygen)/i;function Qr(s,c,h,f){var m;if(Array.isArray(c))l.each(c,function(y,E){h||Kt.test(s)?f(s,E):Qr(s+"["+(typeof E=="object"&&E!=null?y:"")+"]",E,h,f)});else if(!h&&Re(c)==="object")for(m in c)Qr(s+"["+m+"]",c[m],h,f);else f(s,c)}l.param=function(s,c){var h,f=[],m=function(y,E){var R=$(E)?E():E;f[f.length]=encodeURIComponent(y)+"="+encodeURIComponent(R??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!l.isPlainObject(s))l.each(s,function(){m(this.name,this.value)});else for(h in s)Qr(h,s[h],c,m);return f.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=l.prop(this,"elements");return s?l.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!l(this).is(":disabled")&&Kr.test(this.nodeName)&&!Yi.test(s)&&(this.checked||!$e.test(s))}).map(function(s,c){var h=l(this).val();return h==null?null:Array.isArray(h)?l.map(h,function(f){return{name:c.name,value:f.replace(ro,`\r
`)}}):{name:c.name,value:h.replace(ro,`\r
`)}}).get()}});var Tr=/%20/g,wr=/#.*$/,io=/([?&])_=[^&]*/,Ji=/^(.*?):[ \t]*([^\r\n]*)$/mg,Le=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ea=/^(?:GET|HEAD)$/,Ta=/^\/\//,Zi={},Xr={},es="*/".concat("*"),qn=X.createElement("a");qn.href=jn.href;function Mt(s){return function(c,h){typeof c!="string"&&(h=c,c="*");var f,m=0,y=c.toLowerCase().match(It)||[];if($(h))for(;f=y[m++];)f[0]==="+"?(f=f.slice(1)||"*",(s[f]=s[f]||[]).unshift(h)):(s[f]=s[f]||[]).push(h)}}function ts(s,c,h,f){var m={},y=s===Xr;function E(R){var A;return m[R]=!0,l.each(s[R]||[],function(D,B){var H=B(c,h,f);if(typeof H=="string"&&!y&&!m[H])return c.dataTypes.unshift(H),E(H),!1;if(y)return!(A=H)}),A}return E(c.dataTypes[0])||!m["*"]&&E("*")}function ns(s,c){var h,f,m=l.ajaxSettings.flatOptions||{};for(h in c)c[h]!==void 0&&((m[h]?s:f||(f={}))[h]=c[h]);return f&&l.extend(!0,s,f),s}function Ir(s,c,h){for(var f,m,y,E,R=s.contents,A=s.dataTypes;A[0]==="*";)A.shift(),f===void 0&&(f=s.mimeType||c.getResponseHeader("Content-Type"));if(f){for(m in R)if(R[m]&&R[m].test(f)){A.unshift(m);break}}if(A[0]in h)y=A[0];else{for(m in h){if(!A[0]||s.converters[m+" "+A[0]]){y=m;break}E||(E=m)}y=y||E}if(y)return y!==A[0]&&A.unshift(y),h[y]}function so(s,c,h,f){var m,y,E,R,A,D={},B=s.dataTypes.slice();if(B[1])for(E in s.converters)D[E.toLowerCase()]=s.converters[E];for(y=B.shift();y;)if(s.responseFields[y]&&(h[s.responseFields[y]]=c),!A&&f&&s.dataFilter&&(c=s.dataFilter(c,s.dataType)),A=y,y=B.shift(),y){if(y==="*")y=A;else if(A!=="*"&&A!==y){if(E=D[A+" "+y]||D["* "+y],!E){for(m in D)if(R=m.split(" "),R[1]===y&&(E=D[A+" "+R[0]]||D["* "+R[0]],E)){E===!0?E=D[m]:D[m]!==!0&&(y=R[0],B.unshift(R[1]));break}}if(E!==!0)if(E&&s.throws)c=E(c);else try{c=E(c)}catch(H){return{state:"parsererror",error:E?H:"No conversion from "+A+" to "+y}}}}return{state:"success",data:c}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jn.href,type:"GET",isLocal:Le.test(jn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":es,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,c){return c?ns(ns(s,l.ajaxSettings),c):ns(l.ajaxSettings,s)},ajaxPrefilter:Mt(Zi),ajaxTransport:Mt(Xr),ajax:function(s,c){typeof s=="object"&&(c=s,s=void 0),c=c||{};var h,f,m,y,E,R,A,D,B,H,j=l.ajaxSetup({},c),J=j.context||j,oe=j.context&&(J.nodeType||J.jquery)?l(J):l.event,Te=l.Deferred(),ve=l.Callbacks("once memory"),Fe=j.statusCode||{},o={},d={},g="canceled",T={readyState:0,getResponseHeader:function(V){var Y;if(A){if(!y)for(y={};Y=Ji.exec(m);)y[Y[1].toLowerCase()+" "]=(y[Y[1].toLowerCase()+" "]||[]).concat(Y[2]);Y=y[V.toLowerCase()+" "]}return Y==null?null:Y.join(", ")},getAllResponseHeaders:function(){return A?m:null},setRequestHeader:function(V,Y){return A==null&&(V=d[V.toLowerCase()]=d[V.toLowerCase()]||V,o[V]=Y),this},overrideMimeType:function(V){return A==null&&(j.mimeType=V),this},statusCode:function(V){var Y;if(V)if(A)T.always(V[T.status]);else for(Y in V)Fe[Y]=[Fe[Y],V[Y]];return this},abort:function(V){var Y=V||g;return h&&h.abort(Y),O(0,Y),this}};if(Te.promise(T),j.url=((s||j.url||jn.href)+"").replace(Ta,jn.protocol+"//"),j.type=c.method||c.type||j.method||j.type,j.dataTypes=(j.dataType||"*").toLowerCase().match(It)||[""],j.crossDomain==null){R=X.createElement("a");try{R.href=j.url,R.href=R.href,j.crossDomain=qn.protocol+"//"+qn.host!=R.protocol+"//"+R.host}catch{j.crossDomain=!0}}if(j.data&&j.processData&&typeof j.data!="string"&&(j.data=l.param(j.data,j.traditional)),ts(Zi,j,c,T),A)return T;D=l.event&&j.global,D&&l.active++===0&&l.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!Ea.test(j.type),f=j.url.replace(wr,""),j.hasContent?j.data&&j.processData&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(j.data=j.data.replace(Tr,"+")):(H=j.url.slice(f.length),j.data&&(j.processData||typeof j.data=="string")&&(f+=(Xi.test(f)?"&":"?")+j.data,delete j.data),j.cache===!1&&(f=f.replace(io,"$1"),H=(Xi.test(f)?"&":"?")+"_="+fn.guid+++H),j.url=f+H),j.ifModified&&(l.lastModified[f]&&T.setRequestHeader("If-Modified-Since",l.lastModified[f]),l.etag[f]&&T.setRequestHeader("If-None-Match",l.etag[f])),(j.data&&j.hasContent&&j.contentType!==!1||c.contentType)&&T.setRequestHeader("Content-Type",j.contentType),T.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!=="*"?", "+es+"; q=0.01":""):j.accepts["*"]);for(B in j.headers)T.setRequestHeader(B,j.headers[B]);if(j.beforeSend&&(j.beforeSend.call(J,T,j)===!1||A))return T.abort();if(g="abort",ve.add(j.complete),T.done(j.success),T.fail(j.error),h=ts(Xr,j,c,T),!h)O(-1,"No Transport");else{if(T.readyState=1,D&&oe.trigger("ajaxSend",[T,j]),A)return T;j.async&&j.timeout>0&&(E=e.setTimeout(function(){T.abort("timeout")},j.timeout));try{A=!1,h.send(o,O)}catch(V){if(A)throw V;O(-1,V)}}function O(V,Y,ge,je){var Ee,Ue,He,lt,it,ze=Y;A||(A=!0,E&&e.clearTimeout(E),h=void 0,m=je||"",T.readyState=V>0?4:0,Ee=V>=200&&V<300||V===304,ge&&(lt=Ir(j,T,ge)),!Ee&&l.inArray("script",j.dataTypes)>-1&&l.inArray("json",j.dataTypes)<0&&(j.converters["text script"]=function(){}),lt=so(j,lt,T,Ee),Ee?(j.ifModified&&(it=T.getResponseHeader("Last-Modified"),it&&(l.lastModified[f]=it),it=T.getResponseHeader("etag"),it&&(l.etag[f]=it)),V===204||j.type==="HEAD"?ze="nocontent":V===304?ze="notmodified":(ze=lt.state,Ue=lt.data,He=lt.error,Ee=!He)):(He=ze,(V||!ze)&&(ze="error",V<0&&(V=0))),T.status=V,T.statusText=(Y||ze)+"",Ee?Te.resolveWith(J,[Ue,ze,T]):Te.rejectWith(J,[T,ze,He]),T.statusCode(Fe),Fe=void 0,D&&oe.trigger(Ee?"ajaxSuccess":"ajaxError",[T,j,Ee?Ue:He]),ve.fireWith(J,[T,ze]),D&&(oe.trigger("ajaxComplete",[T,j]),--l.active||l.event.trigger("ajaxStop")))}return T},getJSON:function(s,c,h){return l.get(s,c,h,"json")},getScript:function(s,c){return l.get(s,void 0,c,"script")}}),l.each(["get","post"],function(s,c){l[c]=function(h,f,m,y){return $(f)&&(y=y||m,m=f,f=void 0),l.ajax(l.extend({url:h,type:c,dataType:y,data:f,success:m},l.isPlainObject(h)&&h))}}),l.ajaxPrefilter(function(s){var c;for(c in s.headers)c.toLowerCase()==="content-type"&&(s.contentType=s.headers[c]||"")}),l._evalUrl=function(s,c,h){return l.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){l.globalEval(f,c,h)}})},l.fn.extend({wrapAll:function(s){var c;return this[0]&&($(s)&&(s=s.call(this[0])),c=l(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var h=this;h.firstElementChild;)h=h.firstElementChild;return h}).append(this)),this},wrapInner:function(s){return $(s)?this.each(function(c){l(this).wrapInner(s.call(this,c))}):this.each(function(){var c=l(this),h=c.contents();h.length?h.wrapAll(s):c.append(s)})},wrap:function(s){var c=$(s);return this.each(function(h){l(this).wrapAll(c?s.call(this,h):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(s){return!l.expr.pseudos.visible(s)},l.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var rs={0:200,1223:204},Qt=l.ajaxSettings.xhr();L.cors=!!Qt&&"withCredentials"in Qt,L.ajax=Qt=!!Qt,l.ajaxTransport(function(s){var c,h;if(L.cors||Qt&&!s.crossDomain)return{send:function(f,m){var y,E=s.xhr();if(E.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(y in s.xhrFields)E[y]=s.xhrFields[y];s.mimeType&&E.overrideMimeType&&E.overrideMimeType(s.mimeType),!s.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");for(y in f)E.setRequestHeader(y,f[y]);c=function(R){return function(){c&&(c=h=E.onload=E.onerror=E.onabort=E.ontimeout=E.onreadystatechange=null,R==="abort"?E.abort():R==="error"?typeof E.status!="number"?m(0,"error"):m(E.status,E.statusText):m(rs[E.status]||E.status,E.statusText,(E.responseType||"text")!=="text"||typeof E.responseText!="string"?{binary:E.response}:{text:E.responseText},E.getAllResponseHeaders()))}},E.onload=c(),h=E.onerror=E.ontimeout=c("error"),E.onabort!==void 0?E.onabort=h:E.onreadystatechange=function(){E.readyState===4&&e.setTimeout(function(){c&&h()})},c=c("abort");try{E.send(s.hasContent&&s.data||null)}catch(R){if(c)throw R}},abort:function(){c&&c()}}}),l.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return l.globalEval(s),s}}}),l.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),l.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var c,h;return{send:function(f,m){c=l("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",h=function(y){c.remove(),h=null,y&&m(y.type==="error"?404:200,y.type)}),X.head.appendChild(c[0])},abort:function(){h&&h()}}}});var is=[],Bn=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=is.pop()||l.expando+"_"+fn.guid++;return this[s]=!0,s}}),l.ajaxPrefilter("json jsonp",function(s,c,h){var f,m,y,E=s.jsonp!==!1&&(Bn.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Bn.test(s.data)&&"data");if(E||s.dataTypes[0]==="jsonp")return f=s.jsonpCallback=$(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,E?s[E]=s[E].replace(Bn,"$1"+f):s.jsonp!==!1&&(s.url+=(Xi.test(s.url)?"&":"?")+s.jsonp+"="+f),s.converters["script json"]=function(){return y||l.error(f+" was not called"),y[0]},s.dataTypes[0]="json",m=e[f],e[f]=function(){y=arguments},h.always(function(){m===void 0?l(e).removeProp(f):e[f]=m,s[f]&&(s.jsonpCallback=c.jsonpCallback,is.push(f)),y&&$(m)&&m(y[0]),y=m=void 0}),"script"}),L.createHTMLDocument=(function(){var s=X.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2})(),l.parseHTML=function(s,c,h){if(typeof s!="string")return[];typeof c=="boolean"&&(h=c,c=!1);var f,m,y;return c||(L.createHTMLDocument?(c=X.implementation.createHTMLDocument(""),f=c.createElement("base"),f.href=X.location.href,c.head.appendChild(f)):c=X),m=Ci.exec(s),y=!h&&[],m?[c.createElement(m[1])]:(m=Hs([s],c,y),y&&y.length&&l(y).remove(),l.merge([],m.childNodes))},l.fn.load=function(s,c,h){var f,m,y,E=this,R=s.indexOf(" ");return R>-1&&(f=Wt(s.slice(R)),s=s.slice(0,R)),$(c)?(h=c,c=void 0):c&&typeof c=="object"&&(m="POST"),E.length>0&&l.ajax({url:s,type:m||"GET",dataType:"html",data:c}).done(function(A){y=arguments,E.html(f?l("<div>").append(l.parseHTML(A)).find(f):A)}).always(h&&function(A,D){E.each(function(){h.apply(this,y||[A.responseText,D,A])})}),this},l.expr.pseudos.animated=function(s){return l.grep(l.timers,function(c){return s===c.elem}).length},l.offset={setOffset:function(s,c,h){var f,m,y,E,R,A,D,B=l.css(s,"position"),H=l(s),j={};B==="static"&&(s.style.position="relative"),R=H.offset(),y=l.css(s,"top"),A=l.css(s,"left"),D=(B==="absolute"||B==="fixed")&&(y+A).indexOf("auto")>-1,D?(f=H.position(),E=f.top,m=f.left):(E=parseFloat(y)||0,m=parseFloat(A)||0),$(c)&&(c=c.call(s,h,l.extend({},R))),c.top!=null&&(j.top=c.top-R.top+E),c.left!=null&&(j.left=c.left-R.left+m),"using"in c?c.using.call(s,j):H.css(j)}},l.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){l.offset.setOffset(this,s,m)});var c,h,f=this[0];if(f)return f.getClientRects().length?(c=f.getBoundingClientRect(),h=f.ownerDocument.defaultView,{top:c.top+h.pageYOffset,left:c.left+h.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,c,h,f=this[0],m={top:0,left:0};if(l.css(f,"position")==="fixed")c=f.getBoundingClientRect();else{for(c=this.offset(),h=f.ownerDocument,s=f.offsetParent||h.documentElement;s&&(s===h.body||s===h.documentElement)&&l.css(s,"position")==="static";)s=s.parentNode;s&&s!==f&&s.nodeType===1&&(m=l(s).offset(),m.top+=l.css(s,"borderTopWidth",!0),m.left+=l.css(s,"borderLeftWidth",!0))}return{top:c.top-m.top-l.css(f,"marginTop",!0),left:c.left-m.left-l.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&l.css(s,"position")==="static";)s=s.offsetParent;return s||Nt})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,c){var h=c==="pageYOffset";l.fn[s]=function(f){return At(this,function(m,y,E){var R;if(G(m)?R=m:m.nodeType===9&&(R=m.defaultView),E===void 0)return R?R[c]:m[y];R?R.scrollTo(h?R.pageXOffset:E,h?E:R.pageYOffset):m[y]=E},s,f,arguments.length)}}),l.each(["top","left"],function(s,c){l.cssHooks[c]=Wr(L.pixelPosition,function(h,f){if(f)return f=Et(h,c),Bi.test(f)?l(h).position()[c]+"px":f})}),l.each({Height:"height",Width:"width"},function(s,c){l.each({padding:"inner"+s,content:c,"":"outer"+s},function(h,f){l.fn[f]=function(m,y){var E=arguments.length&&(h||typeof m!="boolean"),R=h||(m===!0||y===!0?"margin":"border");return At(this,function(A,D,B){var H;return G(A)?f.indexOf("outer")===0?A["inner"+s]:A.document.documentElement["client"+s]:A.nodeType===9?(H=A.documentElement,Math.max(A.body["scroll"+s],H["scroll"+s],A.body["offset"+s],H["offset"+s],H["client"+s])):B===void 0?l.css(A,D,R):l.style(A,D,B,R)},c,E?m:void 0,E)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,c){l.fn[c]=function(h){return this.on(c,h)}}),l.fn.extend({bind:function(s,c,h){return this.on(s,null,c,h)},unbind:function(s,c){return this.off(s,null,c)},delegate:function(s,c,h,f){return this.on(c,s,h,f)},undelegate:function(s,c,h){return arguments.length===1?this.off(s,"**"):this.off(c,s||"**",h)},hover:function(s,c){return this.on("mouseenter",s).on("mouseleave",c||s)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,c){l.fn[c]=function(h,f){return arguments.length>0?this.on(c,null,h,f):this.trigger(c)}});var wa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(s,c){var h,f,m;if(typeof c=="string"&&(h=s[c],c=s,s=h),!!$(s))return f=a.call(arguments,2),m=function(){return s.apply(c||this,f.concat(a.call(arguments)))},m.guid=s.guid=s.guid||l.guid++,m},l.holdReady=function(s){s?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=S,l.isFunction=$,l.isWindow=G,l.camelCase=bt,l.type=Re,l.now=Date.now,l.isNumeric=function(s){var c=l.type(s);return(c==="number"||c==="string")&&!isNaN(s-parseFloat(s))},l.trim=function(s){return s==null?"":(s+"").replace(wa,"$1")};var oo=e.jQuery,Ar=e.$;return l.noConflict=function(s){return e.$===l&&(e.$=Ar),s&&e.jQuery===l&&(e.jQuery=oo),l},typeof t>"u"&&(e.jQuery=e.$=l),l})})(_o)),_o.exports}var Vf=Nf();const Z=xf(Vf),Of=()=>{};var fu={};const zl=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Mf=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],u=n[t++],p=n[t++],_=((i&7)<<18|(a&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Wl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],u=i+1<n.length,p=u?n[i+1]:0,_=i+2<n.length,v=_?n[i+2]:0,I=a>>2,P=(a&3)<<4|p>>4;let M=(p&15)<<2|v>>6,Q=v&63;_||(Q=64,u||(M=64)),r.push(t[I],t[P],t[M],t[Q])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(zl(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Mf(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],p=i<n.length?t[n.charAt(i)]:0;++i;const v=i<n.length?t[n.charAt(i)]:64;++i;const P=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||p==null||v==null||P==null)throw new Lf;const M=a<<2|p>>4;if(r.push(M),v!==64){const Q=p<<4&240|v>>2;if(r.push(Q),P!==64){const L=v<<6&192|P;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Lf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ff=function(n){const e=zl(n);return Wl.encodeByteArray(e,!0)},Po=function(n){return Ff(n).replace(/\./g,"")},Gl=function(n){try{return Wl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jf=()=>Uf().__FIREBASE_DEFAULTS__,qf=()=>{if(typeof process>"u"||typeof fu>"u")return;const n=fu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Bf=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gl(n[1]);return e&&JSON.parse(e)},Qo=()=>{try{return Of()||jf()||qf()||Bf()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kl=n=>Qo()?.emulatorHosts?.[n],$f=n=>{const e=Kl(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ql=()=>Qo()?.config,Xl=n=>Qo()?.[`_${n}`];class Hf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function _i(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yl(n){return(await fetch(n,{credentials:"include"})).ok}function zf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Po(JSON.stringify(t)),Po(JSON.stringify(u)),""].join(".")}const fs={};function Wf(){const n={prod:[],emulator:[]};for(const e of Object.keys(fs))fs[e]?n.emulator.push(e):n.prod.push(e);return n}function Gf(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pu=!1;function Jl(n,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||fs[n]===e||fs[n]||pu)return;fs[n]=e;function t(M){return`__firebase__banner__${M}`}const r="__firebase__banner",a=Wf().prod.length>0;function u(){const M=document.getElementById(r);M&&M.remove()}function p(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function _(M,Q){M.setAttribute("width","24"),M.setAttribute("id",Q),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function v(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{pu=!0,u()},M}function I(M,Q){M.setAttribute("id",Q),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function P(){const M=Gf(r),Q=t("text"),L=document.getElementById(Q)||document.createElement("span"),$=t("learnmore"),G=document.getElementById($)||document.createElement("a"),X=t("preprendIcon"),le=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const pe=M.element;p(pe),I(G,$);const Re=v();_(le,X),pe.append(le,L,G,Re),document.body.appendChild(pe)}a?(L.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",Q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function Qf(){const n=Qo()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xf(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yf(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zf(){const n=gt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ep(){return!Qf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tp(){try{return typeof indexedDB=="object"}catch{return!1}}function np(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const rp="FirebaseError";class Sn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rp,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ps.prototype.create)}}class Ps{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?ip(a,r):"Error",p=`${this.serviceName}: ${u} (${i}).`;return new Sn(i,p,r)}}function ip(n,e){return n.replace(sp,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sp=/\{\$([^}]+)}/g;function op(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],u=e[i];if(gu(a)&&gu(u)){if(!kr(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function gu(n){return n!==null&&typeof n=="object"}function ks(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function os(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function as(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ap(n,e){const t=new cp(n,e);return t.subscribe.bind(t)}class cp{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");up(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ra),i.error===void 0&&(i.error=Ra),i.complete===void 0&&(i.complete=Ra);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function up(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ra(){}function at(n){return n&&n._delegate?n._delegate:n}class xr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sr="[DEFAULT]";class lp{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Hf;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dp(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);r===p&&u.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hp(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hp(n){return n===Sr?void 0:n}function dp(n){return n.instantiationMode==="EAGER"}class fp{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const pp={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},gp=Ae.INFO,mp={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},yp=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=mp[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yc{constructor(e){this.name=e,this._logLevel=gp,this._logHandler=yp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const _p=(n,e)=>e.some(t=>n instanceof t);let mu,yu;function vp(){return mu||(mu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ep(){return yu||(yu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zl=new WeakMap,Ba=new WeakMap,eh=new WeakMap,Pa=new WeakMap,_c=new WeakMap;function Tp(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Yn(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Zl.set(t,n)}).catch(()=>{}),_c.set(e,n),e}function wp(n){if(Ba.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Ba.set(n,e)}let $a={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ba.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eh.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ip(n){$a=n($a)}function Ap(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ka(this),e,...t);return eh.set(r,e.sort?e.sort():[e]),Yn(r)}:Ep().includes(n)?function(...e){return n.apply(ka(this),e),Yn(Zl.get(this))}:function(...e){return Yn(n.apply(ka(this),e))}}function bp(n){return typeof n=="function"?Ap(n):(n instanceof IDBTransaction&&wp(n),_p(n,vp())?new Proxy(n,$a):n)}function Yn(n){if(n instanceof IDBRequest)return Tp(n);if(Pa.has(n))return Pa.get(n);const e=bp(n);return e!==n&&(Pa.set(n,e),_c.set(e,n)),e}const ka=n=>_c.get(n);function Sp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),p=Yn(u);return r&&u.addEventListener("upgradeneeded",_=>{r(Yn(u.result),_.oldVersion,_.newVersion,Yn(u.transaction),_)}),t&&u.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),p.then(_=>{a&&_.addEventListener("close",()=>a()),i&&_.addEventListener("versionchange",v=>i(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const Cp=["get","getKey","getAll","getAllKeys","count"],Rp=["put","add","delete","clear"],xa=new Map;function _u(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xa.get(e))return xa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Rp.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Cp.includes(t)))return;const a=async function(u,...p){const _=this.transaction(u,i?"readwrite":"readonly");let v=_.store;return r&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),i&&_.done]))[0]};return xa.set(e,a),a}Ip(n=>({...n,get:(e,t,r)=>_u(e,t)||n.get(e,t,r),has:(e,t)=>!!_u(e,t)||n.has(e,t)}));class Pp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kp(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kp(n){return n.getComponent()?.type==="VERSION"}const Ha="@firebase/app",vu="0.14.5";const wn=new yc("@firebase/app"),xp="@firebase/app-compat",Dp="@firebase/analytics-compat",Np="@firebase/analytics",Vp="@firebase/app-check-compat",Op="@firebase/app-check",Mp="@firebase/auth",Lp="@firebase/auth-compat",Fp="@firebase/database",Up="@firebase/data-connect",jp="@firebase/database-compat",qp="@firebase/functions",Bp="@firebase/functions-compat",$p="@firebase/installations",Hp="@firebase/installations-compat",zp="@firebase/messaging",Wp="@firebase/messaging-compat",Gp="@firebase/performance",Kp="@firebase/performance-compat",Qp="@firebase/remote-config",Xp="@firebase/remote-config-compat",Yp="@firebase/storage",Jp="@firebase/storage-compat",Zp="@firebase/firestore",eg="@firebase/ai",tg="@firebase/firestore-compat",ng="firebase",rg="12.5.0";const za="[DEFAULT]",ig={[Ha]:"fire-core",[xp]:"fire-core-compat",[Np]:"fire-analytics",[Dp]:"fire-analytics-compat",[Op]:"fire-app-check",[Vp]:"fire-app-check-compat",[Mp]:"fire-auth",[Lp]:"fire-auth-compat",[Fp]:"fire-rtdb",[Up]:"fire-data-connect",[jp]:"fire-rtdb-compat",[qp]:"fire-fn",[Bp]:"fire-fn-compat",[$p]:"fire-iid",[Hp]:"fire-iid-compat",[zp]:"fire-fcm",[Wp]:"fire-fcm-compat",[Gp]:"fire-perf",[Kp]:"fire-perf-compat",[Qp]:"fire-rc",[Xp]:"fire-rc-compat",[Yp]:"fire-gcs",[Jp]:"fire-gcs-compat",[Zp]:"fire-fst",[tg]:"fire-fst-compat",[eg]:"fire-vertex","fire-js":"fire-js",[ng]:"fire-js-all"};const ko=new Map,sg=new Map,Wa=new Map;function Eu(n,e){try{n.container.addComponent(e)}catch(t){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function li(n){const e=n.name;if(Wa.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Wa.set(e,n);for(const t of ko.values())Eu(t,n);for(const t of sg.values())Eu(t,n);return!0}function vc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rt(n){return n==null?!1:n.settings!==void 0}const og={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jn=new Ps("app","Firebase",og);class ag{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const vi=rg;function th(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:za,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Jn.create("bad-app-name",{appName:String(i)});if(t||(t=Ql()),!t)throw Jn.create("no-options");const a=ko.get(i);if(a){if(kr(t,a.options)&&kr(r,a.config))return a;throw Jn.create("duplicate-app",{appName:i})}const u=new fp(i);for(const _ of Wa.values())u.addComponent(_);const p=new ag(t,r,u);return ko.set(i,p),p}function nh(n=za){const e=ko.get(n);if(!e&&n===za&&Ql())return th();if(!e)throw Jn.create("no-app",{appName:n});return e}function Zn(n,e,t){let r=ig[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(u.join(" "));return}li(new xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const cg="firebase-heartbeat-database",ug=1,Es="firebase-heartbeat-store";let Da=null;function rh(){return Da||(Da=Sp(cg,ug,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Es)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jn.create("idb-open",{originalErrorMessage:n.message})})),Da}async function lg(n){try{const t=(await rh()).transaction(Es),r=await t.objectStore(Es).get(ih(n));return await t.done,r}catch(e){if(e instanceof Sn)wn.warn(e.message);else{const t=Jn.create("idb-get",{originalErrorMessage:e?.message});wn.warn(t.message)}}}async function Tu(n,e){try{const r=(await rh()).transaction(Es,"readwrite");await r.objectStore(Es).put(e,ih(n)),await r.done}catch(t){if(t instanceof Sn)wn.warn(t.message);else{const r=Jn.create("idb-set",{originalErrorMessage:t?.message});wn.warn(r.message)}}}function ih(n){return`${n.name}!${n.options.appId}`}const hg=1024,dg=30;class fg{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gg(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>dg){const i=mg(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wu(),{heartbeatsToSend:t,unsentEntries:r}=pg(this._heartbeatsCache.heartbeats),i=Po(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return wn.warn(e),""}}}function wu(){return new Date().toISOString().substring(0,10)}function pg(n,e=hg){const t=[];let r=n.slice();for(const i of n){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),Iu(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Iu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class gg{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tp()?np().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Iu(n){return Po(JSON.stringify({version:2,heartbeats:n})).length}function mg(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function yg(n){li(new xr("platform-logger",e=>new Pp(e),"PRIVATE")),li(new xr("heartbeat",e=>new fg(e),"PRIVATE")),Zn(Ha,vu,n),Zn(Ha,vu,"esm2020"),Zn("fire-js","")}yg("");var _g="firebase",vg="12.5.0";Zn(_g,vg,"app");function sh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Eg=sh,oh=new Ps("auth","Firebase",sh());const xo=new yc("@firebase/auth");function Tg(n,...e){xo.logLevel<=Ae.WARN&&xo.warn(`Auth (${vi}): ${n}`,...e)}function vo(n,...e){xo.logLevel<=Ae.ERROR&&xo.error(`Auth (${vi}): ${n}`,...e)}function jt(n,...e){throw Ec(n,...e)}function Jt(n,...e){return Ec(n,...e)}function ah(n,e,t){const r={...Eg(),[e]:t};return new Ps("auth","Firebase",r).create(e,{appName:n.name})}function vn(n){return ah(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ec(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oh.create(n,...e)}function he(n,e,...t){if(!n)throw Ec(e,...t)}function yn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vo(e),new Error(e)}function In(n,e){n||yn(e)}function Ga(){return typeof self<"u"&&self.location?.href||""}function wg(){return Au()==="http:"||Au()==="https:"}function Au(){return typeof self<"u"&&self.location?.protocol||null}function Ig(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wg()||Yf()||"connection"in navigator)?navigator.onLine:!0}function Ag(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class xs{constructor(e,t){this.shortDelay=e,this.longDelay=t,In(t>e,"Short delay should be less than long delay!"),this.isMobile=Kf()||Jf()}get(){return Ig()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tc(n,e){In(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ch{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Sg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cg=new xs(3e4,6e4);function Cn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function on(n,e,t,r,i={}){return uh(n,i,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const p=ks({key:n.config.apiKey,...u}).slice(1),_=await n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:_,...a};return Xf()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&_i(n.emulatorConfig.host)&&(v.credentials="include"),ch.fetch()(await lh(n,n.config.apiHost,t,p),v)})}async function uh(n,e,t){n._canInitEmulator=!1;const r={...bg,...e};try{const i=new Pg(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw ho(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const p=a.ok?u.errorMessage:u.error.message,[_,v]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw ho(n,"credential-already-in-use",u);if(_==="EMAIL_EXISTS")throw ho(n,"email-already-in-use",u);if(_==="USER_DISABLED")throw ho(n,"user-disabled",u);const I=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw ah(n,I,v);jt(n,I)}}catch(i){if(i instanceof Sn)throw i;jt(n,"network-request-failed",{message:String(i)})}}async function Ds(n,e,t,r,i={}){const a=await on(n,e,t,r,i);return"mfaPendingCredential"in a&&jt(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function lh(n,e,t,r){const i=`${e}${t}?${r}`,a=n,u=a.config.emulator?Tc(n.config,i):`${n.config.apiScheme}://${i}`;return Sg.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Rg(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pg{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jt(this.auth,"network-request-failed")),Cg.get())})}}function ho(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Jt(n,e,r);return i.customData._tokenResponse=t,i}function bu(n){return n!==void 0&&n.enterprise!==void 0}class kg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rg(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xg(n,e){return on(n,"GET","/v2/recaptchaConfig",Cn(n,e))}async function Dg(n,e){return on(n,"POST","/v1/accounts:delete",e)}async function Do(n,e){return on(n,"POST","/v1/accounts:lookup",e)}function ps(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ng(n,e=!1){const t=at(n),r=await t.getIdToken(e),i=wc(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a?.sign_in_provider;return{claims:i,token:r,authTime:ps(Na(i.auth_time)),issuedAtTime:ps(Na(i.iat)),expirationTime:ps(Na(i.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Na(n){return Number(n)*1e3}function wc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vo("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gl(t);return i?JSON.parse(i):(vo("Failed to decode base64 JWT payload"),null)}catch(i){return vo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Su(n){const e=wc(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Sn&&Vg(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Vg({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Og{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ka{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ps(this.lastLoginAt),this.creationTime=ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function No(n){const e=n.auth,t=await n.getIdToken(),r=await hi(n,Do(e,{idToken:t}));he(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?hh(i.providerUserInfo):[],u=Lg(n.providerData,a),p=n.isAnonymous,_=!(n.email&&i.passwordHash)&&!u?.length,v=p?_:!1,I={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Ka(i.createdAt,i.lastLoginAt),isAnonymous:v};Object.assign(n,I)}async function Mg(n){const e=at(n);await No(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lg(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hh(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Fg(n,e){const t=await uh(n,{},async()=>{const r=ks({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=await lh(n,i,"/v1/token",`key=${a}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:r};return n.emulatorConfig&&_i(n.emulatorConfig.host)&&(_.credentials="include"),ch.fetch()(u,_)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ug(n,e){return on(n,"POST","/v2/accounts:revokeToken",Cn(n,e))}class si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Su(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=Su(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await Fg(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,u=new si;return r&&(he(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),a&&(he(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new si,this.toJSON())}_performRefresh(){return yn("not implemented")}}function zn(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ft{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Og(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ka(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await hi(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ng(this,e)}reload(){return Mg(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ft({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await No(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rt(this.auth.app))return Promise.reject(vn(this.auth));const e=await this.getIdToken();return await hi(this,Dg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,_=t._redirectEventId??void 0,v=t.createdAt??void 0,I=t.lastLoginAt??void 0,{uid:P,emailVerified:M,isAnonymous:Q,providerData:L,stsTokenManager:$}=t;he(P&&$,e,"internal-error");const G=si.fromJSON(this.name,$);he(typeof P=="string",e,"internal-error"),zn(r,e.name),zn(i,e.name),he(typeof M=="boolean",e,"internal-error"),he(typeof Q=="boolean",e,"internal-error"),zn(a,e.name),zn(u,e.name),zn(p,e.name),zn(_,e.name),zn(v,e.name),zn(I,e.name);const X=new Ft({uid:P,auth:e,email:i,emailVerified:M,displayName:r,isAnonymous:Q,photoURL:u,phoneNumber:a,tenantId:p,stsTokenManager:G,createdAt:v,lastLoginAt:I});return L&&Array.isArray(L)&&(X.providerData=L.map(le=>({...le}))),_&&(X._redirectEventId=_),X}static async _fromIdTokenResponse(e,t,r=!1){const i=new si;i.updateFromServerResponse(t);const a=new Ft({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await No(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];he(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?hh(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!a?.length,p=new si;p.updateFromIdToken(r);const _=new Ft({uid:i.localId,auth:e,stsTokenManager:p,isAnonymous:u}),v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ka(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(_,v),_}}const Cu=new Map;function _n(n){In(n instanceof Function,"Expected a class definition");let e=Cu.get(n);return e?(In(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Cu.set(n,e),e)}class dh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dh.type="NONE";const Ru=dh;function Eo(n,e,t){return`firebase:${n}:${e}:${t}`}class oi{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Eo(this.userKey,i.apiKey,a),this.fullPersistenceKey=Eo("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Do(this.auth,{idToken:e}).catch(()=>{});return t?Ft._fromGetAccountInfoResponse(this.auth,t,e):null}return Ft._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new oi(_n(Ru),e,r);const i=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let a=i[0]||_n(Ru);const u=Eo(r,e.config.apiKey,e.name);let p=null;for(const v of t)try{const I=await v._get(u);if(I){let P;if(typeof I=="string"){const M=await Do(e,{idToken:I}).catch(()=>{});if(!M)break;P=await Ft._fromGetAccountInfoResponse(e,M,I)}else P=Ft._fromJSON(e,I);v!==a&&(p=P),a=v;break}}catch{}const _=i.filter(v=>v._shouldAllowMigration);return!a._shouldAllowMigration||!_.length?new oi(a,e,r):(a=_[0],p&&await a._set(u,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==a)try{await v._remove(u)}catch{}})),new oi(a,e,r))}}function Pu(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_h(e))return"Blackberry";if(vh(e))return"Webos";if(ph(e))return"Safari";if((e.includes("chrome/")||gh(e))&&!e.includes("edge/"))return"Chrome";if(yh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function fh(n=gt()){return/firefox\//i.test(n)}function ph(n=gt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gh(n=gt()){return/crios\//i.test(n)}function mh(n=gt()){return/iemobile/i.test(n)}function yh(n=gt()){return/android/i.test(n)}function _h(n=gt()){return/blackberry/i.test(n)}function vh(n=gt()){return/webos/i.test(n)}function Ic(n=gt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jg(n=gt()){return Ic(n)&&!!window.navigator?.standalone}function qg(){return Zf()&&document.documentMode===10}function Eh(n=gt()){return Ic(n)||yh(n)||vh(n)||_h(n)||/windows phone/i.test(n)||mh(n)}function Th(n,e=[]){let t;switch(n){case"Browser":t=Pu(gt());break;case"Worker":t=`${Pu(gt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${r}`}class Bg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,p)=>{try{const _=e(a);u(_)}catch(_){p(_)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function $g(n,e={}){return on(n,"GET","/v2/passwordPolicy",Cn(n,e))}const Hg=6;class zg{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Hg,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Wg{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ku(this),this.idTokenSubscription=new ku(this),this.beforeStateQueue=new Bg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Do(this,{idToken:e}),r=await Ft._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!a||a===u)&&p?.user&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await No(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ag()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rt(this.app))return Promise.reject(vn(this));const t=e?at(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rt(this.app)?Promise.reject(vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rt(this.app)?Promise.reject(vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $g(this),t=new zg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ps("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ug(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(p,this,"internal-error"),p.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,r,i);return()=>{u=!0,_()}}else{const _=e.addObserver(t);return()=>{u=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Th(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Tg(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cr(n){return at(n)}class ku{constructor(e){this.auth=e,this.observer=null,this.addObserver=ap(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gg(n){Xo=n}function wh(n){return Xo.loadJS(n)}function Kg(){return Xo.recaptchaEnterpriseScript}function Qg(){return Xo.gapiScript}function Xg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Yg{constructor(){this.enterprise=new Jg}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Jg{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Zg="recaptcha-enterprise",Ih="NO_RECAPTCHA";class em{constructor(e){this.type=Zg,this.auth=cr(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,p)=>{xg(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new kg(_);return a.tenantId==null?a._agentRecaptchaConfig=v:a._tenantRecaptchaConfigs[a.tenantId]=v,u(v.siteKey)}}).catch(_=>{p(_)})})}function i(a,u,p){const _=window.grecaptcha;bu(_)?_.enterprise.ready(()=>{_.enterprise.execute(a,{action:e}).then(v=>{u(v)}).catch(()=>{u(Ih)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Yg().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(p=>{if(!t&&bu(window.grecaptcha))i(p,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let _=Kg();_.length!==0&&(_+=p),wh(_).then(()=>{i(p,a,u)}).catch(v=>{u(v)})}}).catch(p=>{u(p)})})}}async function xu(n,e,t,r=!1,i=!1){const a=new em(n);let u;if(i)u=Ih;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const _=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:v,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const _=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Vo(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await xu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await xu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}function tm(n,e){const t=vc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(kr(a,e??{}))return i;jt(i,"already-initialized")}return t.initialize({options:e})}function nm(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_n);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rm(n,e,t){const r=cr(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=Ah(e),{host:u,port:p}=im(e),_=p===null?"":`:${p}`,v={url:`${a}//${u}${_}/`},I=Object.freeze({host:u,port:p,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(kr(v,r.config.emulator)&&kr(I,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=I,r.settings.appVerificationDisabledForTesting=!0,_i(u)?(Yl(`${a}//${u}${_}`),Jl("Auth",!0)):sm()}function Ah(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function im(n){const e=Ah(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Du(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:Du(u)}}}function Du(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sm(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Ac{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yn("not implemented")}_getIdTokenResponse(e){return yn("not implemented")}_linkToIdToken(e,t){return yn("not implemented")}_getReauthenticationResolver(e){return yn("not implemented")}}async function om(n,e){return on(n,"POST","/v1/accounts:signUp",e)}async function am(n,e){return Ds(n,"POST","/v1/accounts:signInWithPassword",Cn(n,e))}async function bh(n,e){return on(n,"POST","/v1/accounts:sendOobCode",Cn(n,e))}async function cm(n,e){return bh(n,e)}async function um(n,e){return bh(n,e)}async function lm(n,e){return Ds(n,"POST","/v1/accounts:signInWithEmailLink",Cn(n,e))}async function hm(n,e){return Ds(n,"POST","/v1/accounts:signInWithEmailLink",Cn(n,e))}class Ts extends Ac{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ts(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ts(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vo(e,t,"signInWithPassword",am);case"emailLink":return lm(e,{email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vo(e,r,"signUpPassword",om);case"emailLink":return hm(e,{idToken:t,email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ai(n,e){return Ds(n,"POST","/v1/accounts:signInWithIdp",Cn(n,e))}const dm="http://localhost";class Dr extends Ac{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const u=new Dr(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ai(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ai(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ai(e,t)}buildRequest(){const e={requestUri:dm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ks(t)}return e}}function fm(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pm(n){const e=os(as(n)).link,t=e?os(as(e)).deep_link_id:null,r=os(as(n)).deep_link_id;return(r?os(as(r)).link:null)||r||t||e||n}class bc{constructor(e){const t=os(as(e)),r=t.apiKey??null,i=t.oobCode??null,a=fm(t.mode??null);he(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=pm(e);try{return new bc(t)}catch{return null}}}class Ei{constructor(){this.providerId=Ei.PROVIDER_ID}static credential(e,t){return Ts._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=bc.parseLink(t);return he(r,"argument-error"),Ts._fromEmailAndCode(e,r.code,r.tenantId)}}Ei.PROVIDER_ID="password";Ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ns extends Sh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wn extends Ns{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wn.PROVIDER_ID="facebook.com";class Gn extends Ns{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Dr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gn.credential(t,r)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";class Kn extends Ns{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com";Kn.PROVIDER_ID="github.com";class Qn extends Ns{constructor(){super("twitter.com")}static credential(e,t){return Dr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Qn.credential(t,r)}catch{return null}}}Qn.TWITTER_SIGN_IN_METHOD="twitter.com";Qn.PROVIDER_ID="twitter.com";async function gm(n,e){return Ds(n,"POST","/v1/accounts:signUp",Cn(n,e))}class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ft._fromIdTokenResponse(e,r,i),u=Nu(r);return new Nr({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Nu(r);return new Nr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Nu(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Oo extends Sn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Oo.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Oo(e,t,r,i)}}function Ch(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Oo._fromErrorAndOperation(n,a,e,r):a})}async function mm(n,e,t=!1){const r=await hi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Nr._forOperation(n,"link",r)}async function ym(n,e,t=!1){const{auth:r}=n;if(Rt(r.app))return Promise.reject(vn(r));const i="reauthenticate";try{const a=await hi(n,Ch(r,i,e,n),t);he(a.idToken,r,"internal-error");const u=wc(a.idToken);he(u,r,"internal-error");const{sub:p}=u;return he(n.uid===p,r,"user-mismatch"),Nr._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&jt(r,"user-mismatch"),a}}async function Rh(n,e,t=!1){if(Rt(n.app))return Promise.reject(vn(n));const r="signIn",i=await Ch(n,r,e),a=await Nr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function _m(n,e){return Rh(cr(n),e)}async function Ph(n){const e=cr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vm(n,e,t){const r=cr(n);await Vo(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",um)}async function Em(n,e,t){if(Rt(n.app))return Promise.reject(vn(n));const r=cr(n),u=await Vo(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gm).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&Ph(n),_}),p=await Nr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function Tm(n,e,t){return Rt(n.app)?Promise.reject(vn(n)):_m(at(n),Ei.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ph(n),r})}async function wm(n,e){const t=at(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await cm(t.auth,i);a!==n.email&&await n.reload()}async function Im(n,e){return on(n,"POST","/v1/accounts:update",e)}async function Am(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=at(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await hi(r,Im(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const p=r.providerData.find(({providerId:_})=>_==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function bm(n,e,t,r){return at(n).onIdTokenChanged(e,t,r)}function Sm(n,e,t){return at(n).beforeAuthStateChanged(e,t)}function Cm(n,e,t,r){return at(n).onAuthStateChanged(e,t,r)}function Rm(n){return at(n).signOut()}const Mo="__sak";class kh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pm=1e3,km=10;class xh extends kh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Eh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,_)=>{this.notifyListeners(u,_)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);qg()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,km):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Pm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xh.type="LOCAL";const xm=xh;class Dh extends kh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dh.type="SESSION";const Nh=Dh;function Dm(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Yo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Yo(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const p=Array.from(u).map(async v=>v(t.origin,a)),_=await Dm(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yo.receivers=[];function Sc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Nm{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((p,_)=>{const v=Sc("",20);i.port1.start();const I=setTimeout(()=>{_(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(P){const M=P;if(M.data.eventId===v)switch(M.data.status){case"ack":clearTimeout(I),a=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),p(M.data.response);break;default:clearTimeout(I),clearTimeout(a),_(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Zt(){return window}function Vm(n){Zt().location.href=n}function Vh(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}async function Om(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mm(){return navigator?.serviceWorker?.controller||null}function Lm(){return Vh()?self:null}const Oh="firebaseLocalStorageDb",Fm=1,Lo="firebaseLocalStorage",Mh="fbase_key";class Vs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jo(n,e){return n.transaction([Lo],e?"readwrite":"readonly").objectStore(Lo)}function Um(){const n=indexedDB.deleteDatabase(Oh);return new Vs(n).toPromise()}function Qa(){const n=indexedDB.open(Oh,Fm);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lo,{keyPath:Mh})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lo)?e(r):(r.close(),await Um(),e(await Qa()))})})}async function Vu(n,e,t){const r=Jo(n,!0).put({[Mh]:e,value:t});return new Vs(r).toPromise()}async function jm(n,e){const t=Jo(n,!1).get(e),r=await new Vs(t).toPromise();return r===void 0?null:r.value}function Ou(n,e){const t=Jo(n,!0).delete(e);return new Vs(t).toPromise()}const qm=800,Bm=3;class Lh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qa(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Bm)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yo._getInstance(Lm()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Om(),!this.activeServiceWorker)return;this.sender=new Nm(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mm()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qa();return await Vu(e,Mo,"1"),await Ou(e,Mo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vu(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jm(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ou(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Jo(i,!1).getAll();return new Vs(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lh.type="LOCAL";const $m=Lh;new xs(3e4,6e4);function Hm(n,e){return e?_n(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Cc extends Ac{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ai(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ai(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zm(n){return Rh(n.auth,new Cc(n),n.bypassAuthState)}function Wm(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),ym(t,new Cc(n),n.bypassAuthState)}async function Gm(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),mm(t,new Cc(n),n.bypassAuthState)}class Fh{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:u,type:p}=e;if(u){this.reject(u);return}const _={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zm;case"linkViaPopup":case"linkViaRedirect":return Gm;case"reauthViaPopup":case"reauthViaRedirect":return Wm;default:jt(this.auth,"internal-error")}}resolve(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){In(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Km=new xs(2e3,1e4);class ii extends Fh{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){In(this.filter.length===1,"Popup operations only handle one event");const e=Sc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Km.get())};e()}}ii.currentPopupAction=null;const Qm="pendingRedirect",To=new Map;class Xm extends Fh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=To.get(this.auth._key());if(!e){try{const r=await Ym(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}To.set(this.auth._key(),e)}return this.bypassAuthState||To.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ym(n,e){const t=ey(e),r=Zm(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Jm(n,e){To.set(n._key(),e)}function Zm(n){return _n(n._redirectPersistence)}function ey(n){return Eo(Qm,n.config.apiKey,n.name)}async function ty(n,e,t=!1){if(Rt(n.app))return Promise.reject(vn(n));const r=cr(n),i=Hm(r,e),u=await new Xm(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const ny=600*1e3;class ry{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iy(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Uh(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Jt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ny&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mu(e))}saveEventToCache(e){this.cachedEventUids.add(Mu(e)),this.lastProcessedEventTime=Date.now()}}function Mu(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Uh({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function iy(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uh(n);default:return!1}}async function sy(n,e={}){return on(n,"GET","/v1/projects",e)}const oy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ay=/^https?/;async function cy(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sy(n);for(const t of e)try{if(uy(t))return}catch{}jt(n,"unauthorized-domain")}function uy(n){const e=Ga(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!ay.test(t))return!1;if(oy.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ly=new xs(3e4,6e4);function Lu(){const n=Zt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hy(n){return new Promise((e,t)=>{function r(){Lu(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lu(),t(Jt(n,"network-request-failed"))},timeout:ly.get()})}if(Zt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zt().gapi?.load)r();else{const i=Xg("iframefcb");return Zt()[i]=()=>{gapi.load?r():t(Jt(n,"network-request-failed"))},wh(`${Qg()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw wo=null,e})}let wo=null;function dy(n){return wo=wo||hy(n),wo}const fy=new xs(5e3,15e3),py="__/auth/iframe",gy="emulator/auth/iframe",my={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _y(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tc(e,gy):`https://${n.config.authDomain}/${py}`,r={apiKey:e.apiKey,appName:n.name,v:vi},i=yy.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ks(r).slice(1)}`}async function vy(n){const e=await dy(n),t=Zt().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:_y(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:my,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=Jt(n,"network-request-failed"),p=Zt().setTimeout(()=>{a(u)},fy.get());function _(){Zt().clearTimeout(p),i(r)}r.ping(_).then(_,()=>{a(u)})}))}const Ey={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ty=500,wy=600,Iy="_blank",Ay="http://localhost";class Fu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function by(n,e,t,r=Ty,i=wy){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const _={...Ey,width:r.toString(),height:i.toString(),top:a,left:u},v=gt().toLowerCase();t&&(p=gh(v)?Iy:t),fh(v)&&(e=e||Ay,_.scrollbars="yes");const I=Object.entries(_).reduce((M,[Q,L])=>`${M}${Q}=${L},`,"");if(jg(v)&&p!=="_self")return Sy(e||"",p),new Fu(null);const P=window.open(e||"",p,I);he(P,n,"popup-blocked");try{P.focus()}catch{}return new Fu(P)}function Sy(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Cy="__/auth/handler",Ry="emulator/auth/handler",Py=encodeURIComponent("fac");async function Uu(n,e,t,r,i,a){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vi,eventId:i};if(e instanceof Sh){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",op(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,P]of Object.entries({}))u[I]=P}if(e instanceof Ns){const I=e.getScopes().filter(P=>P!=="");I.length>0&&(u.scopes=I.join(","))}n.tenantId&&(u.tid=n.tenantId);const p=u;for(const I of Object.keys(p))p[I]===void 0&&delete p[I];const _=await n._getAppCheckToken(),v=_?`#${Py}=${encodeURIComponent(_)}`:"";return`${ky(n)}?${ks(p).slice(1)}${v}`}function ky({config:n}){return n.emulator?Tc(n,Ry):`https://${n.authDomain}/${Cy}`}const Va="webStorageSupport";class xy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nh,this._completeRedirectFn=ty,this._overrideRedirectResult=Jm}async _openPopup(e,t,r,i){In(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Uu(e,t,r,Ga(),i);return by(e,a,Sc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Uu(e,t,r,Ga(),i);return Vm(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(In(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vy(e),r=new ry(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Va,{type:Va},i=>{const a=i?.[0]?.[Va];a!==void 0&&t(!!a),jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Eh()||ph()||Ic()}}const Dy=xy;var ju="@firebase/auth",qu="1.11.1";class Ny{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vy(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oy(n){li(new xr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;he(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:u,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Th(n)},v=new Wg(r,i,a,_);return nm(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),li(new xr("auth-internal",e=>{const t=cr(e.getProvider("auth").getImmediate());return(r=>new Ny(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(ju,qu,Vy(n)),Zn(ju,qu,"esm2020")}const My=300,Ly=Xl("authIdTokenMaxAge")||My;let Bu=null;const Fy=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ly)return;const i=t?.token;Bu!==i&&(Bu=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Uy(n=nh()){const e=vc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tm(n,{popupRedirectResolver:Dy,persistence:[$m,xm,Nh]}),r=Xl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=Fy(a.toString());Sm(t,u,()=>u(t.currentUser)),bm(t,p=>u(p))}}const i=Kl("auth");return i&&rm(t,`http://${i}`),t}function jy(){return document.getElementsByTagName("head")?.[0]??document}Gg({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Jt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",jy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oy("Browser");var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var er,jh;(function(){var n;function e(l,C){function S(){}S.prototype=C.prototype,l.F=C.prototype,l.prototype=new S,l.prototype.constructor=l,l.D=function(N,x,F){for(var b=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)b[Ge-2]=arguments[Ge];return C.prototype[x].apply(N,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(l,C,S){S||(S=0);const N=Array(16);if(typeof C=="string")for(var x=0;x<16;++x)N[x]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(x=0;x<16;++x)N[x]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=l.g[0],S=l.g[1],x=l.g[2];let F=l.g[3],b;b=C+(F^S&(x^F))+N[0]+3614090360&4294967295,C=S+(b<<7&4294967295|b>>>25),b=F+(x^C&(S^x))+N[1]+3905402710&4294967295,F=C+(b<<12&4294967295|b>>>20),b=x+(S^F&(C^S))+N[2]+606105819&4294967295,x=F+(b<<17&4294967295|b>>>15),b=S+(C^x&(F^C))+N[3]+3250441966&4294967295,S=x+(b<<22&4294967295|b>>>10),b=C+(F^S&(x^F))+N[4]+4118548399&4294967295,C=S+(b<<7&4294967295|b>>>25),b=F+(x^C&(S^x))+N[5]+1200080426&4294967295,F=C+(b<<12&4294967295|b>>>20),b=x+(S^F&(C^S))+N[6]+2821735955&4294967295,x=F+(b<<17&4294967295|b>>>15),b=S+(C^x&(F^C))+N[7]+4249261313&4294967295,S=x+(b<<22&4294967295|b>>>10),b=C+(F^S&(x^F))+N[8]+1770035416&4294967295,C=S+(b<<7&4294967295|b>>>25),b=F+(x^C&(S^x))+N[9]+2336552879&4294967295,F=C+(b<<12&4294967295|b>>>20),b=x+(S^F&(C^S))+N[10]+4294925233&4294967295,x=F+(b<<17&4294967295|b>>>15),b=S+(C^x&(F^C))+N[11]+2304563134&4294967295,S=x+(b<<22&4294967295|b>>>10),b=C+(F^S&(x^F))+N[12]+1804603682&4294967295,C=S+(b<<7&4294967295|b>>>25),b=F+(x^C&(S^x))+N[13]+4254626195&4294967295,F=C+(b<<12&4294967295|b>>>20),b=x+(S^F&(C^S))+N[14]+2792965006&4294967295,x=F+(b<<17&4294967295|b>>>15),b=S+(C^x&(F^C))+N[15]+1236535329&4294967295,S=x+(b<<22&4294967295|b>>>10),b=C+(x^F&(S^x))+N[1]+4129170786&4294967295,C=S+(b<<5&4294967295|b>>>27),b=F+(S^x&(C^S))+N[6]+3225465664&4294967295,F=C+(b<<9&4294967295|b>>>23),b=x+(C^S&(F^C))+N[11]+643717713&4294967295,x=F+(b<<14&4294967295|b>>>18),b=S+(F^C&(x^F))+N[0]+3921069994&4294967295,S=x+(b<<20&4294967295|b>>>12),b=C+(x^F&(S^x))+N[5]+3593408605&4294967295,C=S+(b<<5&4294967295|b>>>27),b=F+(S^x&(C^S))+N[10]+38016083&4294967295,F=C+(b<<9&4294967295|b>>>23),b=x+(C^S&(F^C))+N[15]+3634488961&4294967295,x=F+(b<<14&4294967295|b>>>18),b=S+(F^C&(x^F))+N[4]+3889429448&4294967295,S=x+(b<<20&4294967295|b>>>12),b=C+(x^F&(S^x))+N[9]+568446438&4294967295,C=S+(b<<5&4294967295|b>>>27),b=F+(S^x&(C^S))+N[14]+3275163606&4294967295,F=C+(b<<9&4294967295|b>>>23),b=x+(C^S&(F^C))+N[3]+4107603335&4294967295,x=F+(b<<14&4294967295|b>>>18),b=S+(F^C&(x^F))+N[8]+1163531501&4294967295,S=x+(b<<20&4294967295|b>>>12),b=C+(x^F&(S^x))+N[13]+2850285829&4294967295,C=S+(b<<5&4294967295|b>>>27),b=F+(S^x&(C^S))+N[2]+4243563512&4294967295,F=C+(b<<9&4294967295|b>>>23),b=x+(C^S&(F^C))+N[7]+1735328473&4294967295,x=F+(b<<14&4294967295|b>>>18),b=S+(F^C&(x^F))+N[12]+2368359562&4294967295,S=x+(b<<20&4294967295|b>>>12),b=C+(S^x^F)+N[5]+4294588738&4294967295,C=S+(b<<4&4294967295|b>>>28),b=F+(C^S^x)+N[8]+2272392833&4294967295,F=C+(b<<11&4294967295|b>>>21),b=x+(F^C^S)+N[11]+1839030562&4294967295,x=F+(b<<16&4294967295|b>>>16),b=S+(x^F^C)+N[14]+4259657740&4294967295,S=x+(b<<23&4294967295|b>>>9),b=C+(S^x^F)+N[1]+2763975236&4294967295,C=S+(b<<4&4294967295|b>>>28),b=F+(C^S^x)+N[4]+1272893353&4294967295,F=C+(b<<11&4294967295|b>>>21),b=x+(F^C^S)+N[7]+4139469664&4294967295,x=F+(b<<16&4294967295|b>>>16),b=S+(x^F^C)+N[10]+3200236656&4294967295,S=x+(b<<23&4294967295|b>>>9),b=C+(S^x^F)+N[13]+681279174&4294967295,C=S+(b<<4&4294967295|b>>>28),b=F+(C^S^x)+N[0]+3936430074&4294967295,F=C+(b<<11&4294967295|b>>>21),b=x+(F^C^S)+N[3]+3572445317&4294967295,x=F+(b<<16&4294967295|b>>>16),b=S+(x^F^C)+N[6]+76029189&4294967295,S=x+(b<<23&4294967295|b>>>9),b=C+(S^x^F)+N[9]+3654602809&4294967295,C=S+(b<<4&4294967295|b>>>28),b=F+(C^S^x)+N[12]+3873151461&4294967295,F=C+(b<<11&4294967295|b>>>21),b=x+(F^C^S)+N[15]+530742520&4294967295,x=F+(b<<16&4294967295|b>>>16),b=S+(x^F^C)+N[2]+3299628645&4294967295,S=x+(b<<23&4294967295|b>>>9),b=C+(x^(S|~F))+N[0]+4096336452&4294967295,C=S+(b<<6&4294967295|b>>>26),b=F+(S^(C|~x))+N[7]+1126891415&4294967295,F=C+(b<<10&4294967295|b>>>22),b=x+(C^(F|~S))+N[14]+2878612391&4294967295,x=F+(b<<15&4294967295|b>>>17),b=S+(F^(x|~C))+N[5]+4237533241&4294967295,S=x+(b<<21&4294967295|b>>>11),b=C+(x^(S|~F))+N[12]+1700485571&4294967295,C=S+(b<<6&4294967295|b>>>26),b=F+(S^(C|~x))+N[3]+2399980690&4294967295,F=C+(b<<10&4294967295|b>>>22),b=x+(C^(F|~S))+N[10]+4293915773&4294967295,x=F+(b<<15&4294967295|b>>>17),b=S+(F^(x|~C))+N[1]+2240044497&4294967295,S=x+(b<<21&4294967295|b>>>11),b=C+(x^(S|~F))+N[8]+1873313359&4294967295,C=S+(b<<6&4294967295|b>>>26),b=F+(S^(C|~x))+N[15]+4264355552&4294967295,F=C+(b<<10&4294967295|b>>>22),b=x+(C^(F|~S))+N[6]+2734768916&4294967295,x=F+(b<<15&4294967295|b>>>17),b=S+(F^(x|~C))+N[13]+1309151649&4294967295,S=x+(b<<21&4294967295|b>>>11),b=C+(x^(S|~F))+N[4]+4149444226&4294967295,C=S+(b<<6&4294967295|b>>>26),b=F+(S^(C|~x))+N[11]+3174756917&4294967295,F=C+(b<<10&4294967295|b>>>22),b=x+(C^(F|~S))+N[2]+718787259&4294967295,x=F+(b<<15&4294967295|b>>>17),b=S+(F^(x|~C))+N[9]+3951481745&4294967295,l.g[0]=l.g[0]+C&4294967295,l.g[1]=l.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,l.g[2]=l.g[2]+x&4294967295,l.g[3]=l.g[3]+F&4294967295}r.prototype.v=function(l,C){C===void 0&&(C=l.length);const S=C-this.blockSize,N=this.C;let x=this.h,F=0;for(;F<C;){if(x==0)for(;F<=S;)i(this,l,F),F+=this.blockSize;if(typeof l=="string"){for(;F<C;)if(N[x++]=l.charCodeAt(F++),x==this.blockSize){i(this,N),x=0;break}}else for(;F<C;)if(N[x++]=l[F++],x==this.blockSize){i(this,N),x=0;break}}this.h=x,this.o+=C},r.prototype.A=function(){var l=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);l[0]=128;for(var C=1;C<l.length-8;++C)l[C]=0;C=this.o*8;for(var S=l.length-8;S<l.length;++S)l[S]=C&255,C/=256;for(this.v(l),l=Array(16),C=0,S=0;S<4;++S)for(let N=0;N<32;N+=8)l[C++]=this.g[S]>>>N&255;return l};function a(l,C){var S=p;return Object.prototype.hasOwnProperty.call(S,l)?S[l]:S[l]=C(l)}function u(l,C){this.h=C;const S=[];let N=!0;for(let x=l.length-1;x>=0;x--){const F=l[x]|0;N&&F==C||(S[x]=F,N=!1)}this.g=S}var p={};function _(l){return-128<=l&&l<128?a(l,function(C){return new u([C|0],C<0?-1:0)}):new u([l|0],l<0?-1:0)}function v(l){if(isNaN(l)||!isFinite(l))return P;if(l<0)return G(v(-l));const C=[];let S=1;for(let N=0;l>=S;N++)C[N]=l/S|0,S*=4294967296;return new u(C,0)}function I(l,C){if(l.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(l.charAt(0)=="-")return G(I(l.substring(1),C));if(l.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=v(Math.pow(C,8));let N=P;for(let F=0;F<l.length;F+=8){var x=Math.min(8,l.length-F);const b=parseInt(l.substring(F,F+x),C);x<8?(x=v(Math.pow(C,x)),N=N.j(x).add(v(b))):(N=N.j(S),N=N.add(v(b)))}return N}var P=_(0),M=_(1),Q=_(16777216);n=u.prototype,n.m=function(){if($(this))return-G(this).m();let l=0,C=1;for(let S=0;S<this.g.length;S++){const N=this.i(S);l+=(N>=0?N:4294967296+N)*C,C*=4294967296}return l},n.toString=function(l){if(l=l||10,l<2||36<l)throw Error("radix out of range: "+l);if(L(this))return"0";if($(this))return"-"+G(this).toString(l);const C=v(Math.pow(l,6));var S=this;let N="";for(;;){const x=Re(S,C).g;S=X(S,x.j(C));let F=((S.g.length>0?S.g[0]:S.h)>>>0).toString(l);if(S=x,L(S))return F+N;for(;F.length<6;)F="0"+F;N=F+N}},n.i=function(l){return l<0?0:l<this.g.length?this.g[l]:this.h};function L(l){if(l.h!=0)return!1;for(let C=0;C<l.g.length;C++)if(l.g[C]!=0)return!1;return!0}function $(l){return l.h==-1}n.l=function(l){return l=X(this,l),$(l)?-1:L(l)?0:1};function G(l){const C=l.g.length,S=[];for(let N=0;N<C;N++)S[N]=~l.g[N];return new u(S,~l.h).add(M)}n.abs=function(){return $(this)?G(this):this},n.add=function(l){const C=Math.max(this.g.length,l.g.length),S=[];let N=0;for(let x=0;x<=C;x++){let F=N+(this.i(x)&65535)+(l.i(x)&65535),b=(F>>>16)+(this.i(x)>>>16)+(l.i(x)>>>16);N=b>>>16,F&=65535,b&=65535,S[x]=b<<16|F}return new u(S,S[S.length-1]&-2147483648?-1:0)};function X(l,C){return l.add(G(C))}n.j=function(l){if(L(this)||L(l))return P;if($(this))return $(l)?G(this).j(G(l)):G(G(this).j(l));if($(l))return G(this.j(G(l)));if(this.l(Q)<0&&l.l(Q)<0)return v(this.m()*l.m());const C=this.g.length+l.g.length,S=[];for(var N=0;N<2*C;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<l.g.length;x++){const F=this.i(N)>>>16,b=this.i(N)&65535,Ge=l.i(x)>>>16,an=l.i(x)&65535;S[2*N+2*x]+=b*an,le(S,2*N+2*x),S[2*N+2*x+1]+=F*an,le(S,2*N+2*x+1),S[2*N+2*x+1]+=b*Ge,le(S,2*N+2*x+1),S[2*N+2*x+2]+=F*Ge,le(S,2*N+2*x+2)}for(l=0;l<C;l++)S[l]=S[2*l+1]<<16|S[2*l];for(l=C;l<2*C;l++)S[l]=0;return new u(S,0)};function le(l,C){for(;(l[C]&65535)!=l[C];)l[C+1]+=l[C]>>>16,l[C]&=65535,C++}function pe(l,C){this.g=l,this.h=C}function Re(l,C){if(L(C))throw Error("division by zero");if(L(l))return new pe(P,P);if($(l))return C=Re(G(l),C),new pe(G(C.g),G(C.h));if($(C))return C=Re(l,G(C)),new pe(G(C.g),C.h);if(l.g.length>30){if($(l)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var S=M,N=C;N.l(l)<=0;)S=Be(S),N=Be(N);var x=Me(S,1),F=Me(N,1);for(N=Me(N,2),S=Me(S,2);!L(N);){var b=F.add(N);b.l(l)<=0&&(x=x.add(S),F=b),N=Me(N,1),S=Me(S,1)}return C=X(l,x.j(C)),new pe(x,C)}for(x=P;l.l(C)>=0;){for(S=Math.max(1,Math.floor(l.m()/C.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),F=v(S),b=F.j(C);$(b)||b.l(l)>0;)S-=N,F=v(S),b=F.j(C);L(F)&&(F=M),x=x.add(F),l=X(l,b)}return new pe(x,l)}n.B=function(l){return Re(this,l).h},n.and=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)&l.i(N);return new u(S,this.h&l.h)},n.or=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)|l.i(N);return new u(S,this.h|l.h)},n.xor=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)^l.i(N);return new u(S,this.h^l.h)};function Be(l){const C=l.g.length+1,S=[];for(let N=0;N<C;N++)S[N]=l.i(N)<<1|l.i(N-1)>>>31;return new u(S,l.h)}function Me(l,C){const S=C>>5;C%=32;const N=l.g.length-S,x=[];for(let F=0;F<N;F++)x[F]=C>0?l.i(F+S)>>>C|l.i(F+S+1)<<32-C:l.i(F+S);return new u(x,l.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jh=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=v,u.fromString=I,er=u}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qh,cs,Bh,Io,Xa,$h,Hh,zh;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof fo=="object"&&fo];for(var d=0;d<o.length;++d){var g=o[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(o,d){if(d)e:{var g=r;o=o.split(".");for(var T=0;T<o.length-1;T++){var O=o[T];if(!(O in g))break e;g=g[O]}o=o[o.length-1],T=g[o],d=d(T),d!=T&&d!=null&&e(g,o,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(d){var g=[],T;for(T in d)Object.prototype.hasOwnProperty.call(d,T)&&g.push([T,d[T]]);return g}});var a=a||{},u=this||self;function p(o){var d=typeof o;return d=="object"&&o!=null||d=="function"}function _(o,d,g){return o.call.apply(o.bind,arguments)}function v(o,d,g){return v=_,v.apply(null,arguments)}function I(o,d){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),o.apply(this,T)}}function P(o,d){function g(){}g.prototype=d.prototype,o.Z=d.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(T,O,V){for(var Y=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)Y[ge-2]=arguments[ge];return d.prototype[O].apply(T,Y)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function Q(o){const d=o.length;if(d>0){const g=Array(d);for(let T=0;T<d;T++)g[T]=o[T];return g}return[]}function L(o,d){for(let T=1;T<arguments.length;T++){const O=arguments[T];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=o.length||0;const V=O.length||0;o.length=g+V;for(let Y=0;Y<V;Y++)o[g+Y]=O[Y]}else o.push(O)}}class ${constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(o){u.setTimeout(()=>{throw o},0)}function X(){var o=l;let d=null;return o.g&&(d=o.g,o.g=o.g.next,o.g||(o.h=null),d.next=null),d}class le{constructor(){this.h=this.g=null}add(d,g){const T=pe.get();T.set(d,g),this.h?this.h.next=T:this.g=T,this.h=T}}var pe=new $(()=>new Re,o=>o.reset());class Re{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,Me=!1,l=new le,C=()=>{const o=Promise.resolve(void 0);Be=()=>{o.then(S)}};function S(){for(var o;o=X();){try{o.h.call(o.g)}catch(g){G(g)}var d=pe;d.j(o),d.h<100&&(d.h++,o.next=d.g,d.g=o)}Me=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(o,d){this.type=o,this.g=this.target=d,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,d=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};u.addEventListener("test",g,d),u.removeEventListener("test",g,d)}catch{}return o})();function b(o){return/^[\s\xa0]*$/.test(o)}function Ge(o,d){x.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,d)}P(Ge,x),Ge.prototype.init=function(o,d){const g=this.type=o.type,T=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=d,d=o.relatedTarget,d||(g=="mouseover"?d=o.fromElement:g=="mouseout"&&(d=o.toElement)),this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ge.Z.h.call(this)},Ge.prototype.h=function(){Ge.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var an="closure_listenable_"+(Math.random()*1e6|0),pa=0;function xt(o,d,g,T,O){this.listener=o,this.proxy=null,this.src=d,this.type=g,this.capture=!!T,this.ha=O,this.key=++pa,this.da=this.fa=!1}function Rn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Dt(o,d,g){for(const T in o)d.call(g,o[T],T,o)}function qs(o,d){for(const g in o)d.call(void 0,o[g],g,o)}function Si(o){const d={};for(const g in o)d[g]=o[g];return d}const Ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qr(o,d){let g,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(g in T)o[g]=T[g];for(let V=0;V<Ci.length;V++)g=Ci[V],Object.prototype.hasOwnProperty.call(T,g)&&(o[g]=T[g])}}function ur(o){this.src=o,this.g={},this.h=0}ur.prototype.add=function(o,d,g,T,O){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const Y=Pi(o,d,T,O);return Y>-1?(d=o[Y],g||(d.fa=!1)):(d=new xt(d,this.src,V,!!T,O),d.fa=g,o.push(d)),d};function Ri(o,d){const g=d.type;if(g in o.g){var T=o.g[g],O=Array.prototype.indexOf.call(T,d,void 0),V;(V=O>=0)&&Array.prototype.splice.call(T,O,1),V&&(Rn(d),o.g[g].length==0&&(delete o.g[g],o.h--))}}function Pi(o,d,g,T){for(let O=0;O<o.length;++O){const V=o[O];if(!V.da&&V.listener==d&&V.capture==!!g&&V.ha==T)return O}return-1}var ki="closure_lm_"+(Math.random()*1e6|0),xi={};function Di(o,d,g,T,O){if(Array.isArray(d)){for(let V=0;V<d.length;V++)Di(o,d[V],g,T,O);return null}return g=At(g),o&&o[an]?o.J(d,g,p(T)?!!T.capture:!1,O):It(o,d,g,!1,T,O)}function It(o,d,g,T,O,V){if(!d)throw Error("Invalid event type");const Y=p(O)?!!O.capture:!!O;let ge=lr(o);if(ge||(o[ki]=ge=new ur(o)),g=ge.add(d,g,T,Y,V),g.proxy)return g;if(T=ga(),g.proxy=T,T.src=o,T.listener=g,o.addEventListener)F||(O=Y),O===void 0&&(O=!1),o.addEventListener(d.toString(),T,O);else if(o.attachEvent)o.attachEvent(Ni(d.toString()),T);else if(o.addListener&&o.removeListener)o.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ga(){function o(g){return d.call(o.src,o.listener,g)}const d=ma;return o}function cn(o,d,g,T,O){if(Array.isArray(d))for(var V=0;V<d.length;V++)cn(o,d[V],g,T,O);else T=p(T)?!!T.capture:!!T,g=At(g),o&&o[an]?(o=o.i,V=String(d).toString(),V in o.g&&(d=o.g[V],g=Pi(d,g,T,O),g>-1&&(Rn(d[g]),Array.prototype.splice.call(d,g,1),d.length==0&&(delete o.g[V],o.h--)))):o&&(o=lr(o))&&(d=o.g[d.toString()],o=-1,d&&(o=Pi(d,g,T,O)),(g=o>-1?d[o]:null)&&Pn(g))}function Pn(o){if(typeof o!="number"&&o&&!o.da){var d=o.src;if(d&&d[an])Ri(d.i,o);else{var g=o.type,T=o.proxy;d.removeEventListener?d.removeEventListener(g,T,o.capture):d.detachEvent?d.detachEvent(Ni(g),T):d.addListener&&d.removeListener&&d.removeListener(T),(g=lr(d))?(Ri(g,o),g.h==0&&(g.src=null,d[ki]=null)):Rn(o)}}}function Ni(o){return o in xi?xi[o]:xi[o]="on"+o}function ma(o,d){if(o.da)o=!0;else{d=new Ge(d,this);const g=o.listener,T=o.ha||o.src;o.fa&&Pn(o),o=g.call(T,d)}return o}function lr(o){return o=o[ki],o instanceof ur?o:null}var kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(o){return typeof o=="function"?o:(o[kn]||(o[kn]=function(d){return o.handleEvent(d)}),o[kn])}function Ze(){N.call(this),this.i=new ur(this),this.M=this,this.G=null}P(Ze,N),Ze.prototype[an]=!0,Ze.prototype.removeEventListener=function(o,d,g,T){cn(this,o,d,g,T)};function nt(o,d){var g,T=o.G;if(T)for(g=[];T;T=T.G)g.push(T);if(o=o.M,T=d.type||d,typeof d=="string")d=new x(d,o);else if(d instanceof x)d.target=d.target||o;else{var O=d;d=new x(T,o),qr(d,O)}O=!0;let V,Y;if(g)for(Y=g.length-1;Y>=0;Y--)V=d.g=g[Y],O=Br(V,T,!0,d)&&O;if(V=d.g=o,O=Br(V,T,!0,d)&&O,O=Br(V,T,!1,d)&&O,g)for(Y=0;Y<g.length;Y++)V=d.g=g[Y],O=Br(V,T,!1,d)&&O}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var o=this.i;for(const d in o.g){const g=o.g[d];for(let T=0;T<g.length;T++)Rn(g[T]);delete o.g[d],o.h--}}this.G=null},Ze.prototype.J=function(o,d,g,T){return this.i.add(String(o),d,!1,g,T)},Ze.prototype.K=function(o,d,g,T){return this.i.add(String(o),d,!0,g,T)};function Br(o,d,g,T){if(d=o.i.g[String(d)],!d)return!0;d=d.concat();let O=!0;for(let V=0;V<d.length;++V){const Y=d[V];if(Y&&!Y.da&&Y.capture==g){const ge=Y.listener,je=Y.ha||Y.src;Y.fa&&Ri(o.i,Y),O=ge.call(je,T)!==!1&&O}}return O&&!T.defaultPrevented}function bt(o,d){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:u.setTimeout(o,d||0)}function xn(o){o.g=bt(()=>{o.g=null,o.i&&(o.i=!1,xn(o))},o.l);const d=o.h;o.h=null,o.m.apply(null,d)}class hr extends N{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(o){N.call(this),this.h=o,this.g={}}P(se,N);var rt=[];function Bs(o){Dt(o.g,function(d,g){this.g.hasOwnProperty(g)&&Pn(d)},o),o.g={}}se.prototype.N=function(){se.Z.N.call(this),Bs(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=u.JSON.stringify,ya=u.JSON.parse,$s=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function Oi(){}function Dn(){}var mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nt(){x.call(this,"d")}P(Nt,x);function Bt(){x.call(this,"c")}P(Bt,x);var un={},dr=null;function fr(){return dr=dr||new Ze}un.Ia="serverreachability";function Mi(o){x.call(this,un.Ia,o)}P(Mi,x);function pr(o){const d=fr();nt(d,new Mi(d))}un.STAT_EVENT="statevent";function ln(o,d){x.call(this,un.STAT_EVENT,o),this.stat=d}P(ln,x);function $e(o){const d=fr();nt(d,new ln(d,o))}un.Ja="timingevent";function Li(o,d){x.call(this,un.Ja,o),this.size=d}P(Li,x);function Nn(o,d){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},d)}function et(){this.g=!0}et.prototype.ua=function(){this.g=!1};function ut(o,d,g,T,O,V){o.info(function(){if(o.g)if(V){var Y="",ge=V.split("&");for(let Ee=0;Ee<ge.length;Ee++){var je=ge[Ee].split("=");if(je.length>1){const Ue=je[0];je=je[1];const He=Ue.split("_");Y=He.length>=2&&He[1]=="type"?Y+(Ue+"="+je+"&"):Y+(Ue+"=redacted&")}}}else Y=null;else Y=V;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+d+`
`+g+`
`+Y})}function Fi(o,d,g,T,O,V,Y){o.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+d+`
`+g+`
`+V+" "+Y})}function Vn(o,d,g,T){o.info(function(){return"XMLHTTP TEXT ("+d+"): "+zs(o,g)+(T?" "+T:"")})}function Hs(o,d){o.info(function(){return"TIMEOUT: "+d})}et.prototype.info=function(){};function zs(o,d){if(!o.g)return d;if(!d)return null;try{const V=JSON.parse(d);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var g=V[o];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var O=T[0];if(O!="noop"&&O!="stop"&&O!="close")for(let Y=1;Y<T.length;Y++)T[Y]=""}}}}return Vi(V)}catch{return d}}var Vt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$r;function On(){}P(On,Oi),On.prototype.g=function(){return new XMLHttpRequest},$r=new On;function gr(o){return encodeURIComponent(String(o))}function _a(o){var d=1;o=o.split(":");const g=[];for(;d>0&&o.length;)g.push(o.shift()),d--;return o.length&&g.push(o.join(":")),g}function $t(o,d,g,T){this.j=o,this.i=d,this.l=g,this.S=T||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ui}function Ui(){this.i=null,this.g="",this.h=!1}var Ws={},ji={};function Hr(o,d,g){o.M=1,o.A=Fn(Ve(d)),o.u=g,o.R=!0,Gs(o,null)}function Gs(o,d){o.F=Date.now(),Ln(o),o.B=Ve(o.A);var g=o.B,T=o.S;Array.isArray(T)||(T=[String(T)]),eo(g.i,"t",T),o.C=0,g=o.j.L,o.h=new Ui,o.g=H(o.j,g?d:null,!o.u),o.P>0&&(o.O=new hr(v(o.Y,o,o.g),o.P)),d=o.V,g=o.g,T=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(rt[0]=O.toString()),O=rt);for(let V=0;V<O.length;V++){const Y=Di(g,O[V],T||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=o.J?Si(o.J):{},o.u?(o.v||(o.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,d)):(o.v="GET",o.g.ea(o.B,o.v,null,d)),pr(),ut(o.i,o.v,o.B,o.l,o.S,o.u)}$t.prototype.ba=function(o){o=o.target;const d=this.O;d&&Mt(o)==3?d.j():this.Y(o)},$t.prototype.Y=function(o){try{if(o==this.g)e:{const ge=Mt(this.g),je=this.g.ya(),Ee=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||ts(this.g)))){this.K||ge!=4||je==7||(je==8||Ee<=0?pr(3):pr(2)),zr(this);var d=this.g.ca();this.X=d;var g=Mn(this);if(this.o=d==200,Fi(this.i,this.v,this.B,this.l,this.S,ge,d),this.o){if(this.U&&!this.L){t:{if(this.g){var T,O=this.g;if((T=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(T)){var V=T;break t}}V=null}if(o=V)Vn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wr(this,o);else{this.o=!1,this.m=3,$e(12),Et(this),yr(this);break e}}if(this.R){o=!0;let Ue;for(;!this.K&&this.C<g.length;)if(Ue=Bi(this,g),Ue==ji){ge==4&&(this.m=4,$e(14),o=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Ws){this.m=4,$e(15),Vn(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else Vn(this.i,this.l,Ue,null),Wr(this,Ue);if(qi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||g.length!=0||this.h.h||(this.m=1,$e(16),o=!1),this.o=this.o&&o,!o)Vn(this.i,this.l,g,"[Invalid Chunked Response]"),Et(this),yr(this);else if(g.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),f(Y),Y.P=!0,$e(11))}}else Vn(this.i,this.l,g,null),Wr(this,g);ge==4&&Et(this),this.o&&!this.K&&(ge==4?E(this.j,this):(this.o=!1,Ln(this)))}else ns(this.g),d==400&&g.indexOf("Unknown SID")>0?(this.m=3,$e(12)):(this.m=0,$e(13)),Et(this),yr(this)}}}catch{}finally{}};function Mn(o){if(!qi(o))return o.g.la();const d=ts(o.g);if(d==="")return"";let g="";const T=d.length,O=Mt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Et(o),yr(o),"";o.h.i=new u.TextDecoder}for(let V=0;V<T;V++)o.h.h=!0,g+=o.h.i.decode(d[V],{stream:!(O&&V==T-1)});return d.length=0,o.h.g+=g,o.C=0,o.h.g}function qi(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Bi(o,d){var g=o.C,T=d.indexOf(`
`,g);return T==-1?ji:(g=Number(d.substring(g,T)),isNaN(g)?Ws:(T+=1,T+g>d.length?ji:(d=d.slice(T,T+g),o.C=T+g,d)))}$t.prototype.cancel=function(){this.K=!0,Et(this)};function Ln(o){o.T=Date.now()+o.H,mr(o,o.H)}function mr(o,d){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Nn(v(o.aa,o),d)}function zr(o){o.D&&(u.clearTimeout(o.D),o.D=null)}$t.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Hs(this.i,this.B),this.M!=2&&(pr(),$e(17)),Et(this),this.m=2,yr(this)):mr(this,this.T-o)};function yr(o){o.j.I==0||o.K||E(o.j,o)}function Et(o){zr(o);var d=o.O;d&&typeof d.dispose=="function"&&d.dispose(),o.O=null,Bs(o.V),o.g&&(d=o.g,o.g=null,d.abort(),d.dispose())}function Wr(o,d){try{var g=o.j;if(g.I!=0&&(g.g==o||_r(g.h,o))){if(!o.L&&_r(g.h,o)&&g.I==3){try{var T=g.Ba.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)y(g),Qt(g);else break e;h(g),$e(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Nn(v(g.Va,g),6e3));Qs(g.h)<=1&&g.ta&&(g.ta=void 0)}else A(g,11)}else if((o.L||g.g==o)&&y(g),!b(d))for(O=g.Ba.g.parse(d),d=0;d<O.length;d++){let Ee=O[d];const Ue=Ee[0];if(!(Ue<=g.K))if(g.K=Ue,Ee=Ee[1],g.I==2)if(Ee[0]=="c"){g.M=Ee[1],g.ba=Ee[2];const He=Ee[3];He!=null&&(g.ka=He,g.j.info("VER="+g.ka));const lt=Ee[4];lt!=null&&(g.za=lt,g.j.info("SVER="+g.za));const it=Ee[5];it!=null&&typeof it=="number"&&it>0&&(T=1.5*it,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const ze=o.g;if(ze){const $n=ze.g?ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var V=T.h;V.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(zi(V,V.h),V.h=null))}if(T.G){const wt=ze.g?ze.g.getResponseHeader("X-HTTP-Session-Id"):null;wt&&(T.wa=wt,xe(T.J,T.G,wt))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var Y=o;if(T.na=B(T,T.L?T.ba:null,T.W),Y.L){Xs(T.h,Y);var ge=Y,je=T.O;je&&(ge.H=je),ge.D&&(zr(ge),Ln(ge)),T.g=Y}else c(T);g.i.length>0&&Bn(g)}else Ee[0]!="stop"&&Ee[0]!="close"||A(g,7);else g.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?A(g,7):rs(g):Ee[0]!="noop"&&g.l&&g.l.qa(Ee),g.A=0)}}pr(4)}catch{}}var Ks=class{constructor(o,d){this.g=o,this.map=d}};function $i(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Qs(o){return o.h?1:o.g?o.g.size:0}function _r(o,d){return o.h?o.h==d:o.g?o.g.has(d):!1}function zi(o,d){o.g?o.g.add(d):o.h=d}function Xs(o,d){o.h&&o.h==d?o.h=null:o.g&&o.g.has(d)&&o.g.delete(d)}$i.prototype.cancel=function(){if(this.i=Wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Wi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let d=o.i;for(const g of o.g.values())d=d.concat(g.G);return d}return Q(o.i)}var Gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ki(o,d){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const T=o[g].indexOf("=");let O,V=null;T>=0?(O=o[g].substring(0,T),V=o[g].substring(T+1)):O=o[g],d(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ot(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;o instanceof Ot?(this.l=o.l,St(this,o.j),this.o=o.o,this.g=o.g,Ht(this,o.u),this.h=o.h,Qi(this,jn(o.i)),this.m=o.m):o&&(d=String(o).match(Gi))?(this.l=!1,St(this,d[1]||"",!0),this.o=Un(d[2]||""),this.g=Un(d[3]||"",!0),Ht(this,d[4]),this.h=Un(d[5]||"",!0),Qi(this,d[6]||"",!0),this.m=Un(d[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}Ot.prototype.toString=function(){const o=[];var d=this.j;d&&o.push(zt(d,Js,!0),":");var g=this.g;return(g||d=="file")&&(o.push("//"),(d=this.o)&&o.push(zt(d,Js,!0),"@"),o.push(gr(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(zt(g,g.charAt(0)=="/"?Tt:va,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",zt(g,vr)),o.join("")},Ot.prototype.resolve=function(o){const d=Ve(this);let g=!!o.j;g?St(d,o.j):g=!!o.o,g?d.o=o.o:g=!!o.g,g?d.g=o.g:g=o.u!=null;var T=o.h;if(g)Ht(d,o.u);else if(g=!!o.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var O=d.h.lastIndexOf("/");O!=-1&&(T=d.h.slice(0,O+1)+T)}if(O=T,O==".."||O==".")T="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){T=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let Y=0;Y<O.length;){const ge=O[Y++];ge=="."?T&&Y==O.length&&V.push(""):ge==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),T&&Y==O.length&&V.push("")):(V.push(ge),T=!0)}T=V.join("/")}else T=O}return g?d.h=T:g=o.i.toString()!=="",g?Qi(d,jn(o.i)):g=!!o.m,g&&(d.m=o.m),d};function Ve(o){return new Ot(o)}function St(o,d,g){o.j=g?Un(d,!0):d,o.j&&(o.j=o.j.replace(/:$/,""))}function Ht(o,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);o.u=d}else o.u=null}function Qi(o,d,g){d instanceof Er?(o.i=d,Xi(o.i,o.l)):(g||(d=zt(d,Zs)),o.i=new Er(d,o.l))}function xe(o,d,g){o.i.set(d,g)}function Fn(o){return xe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Un(o,d){return o?d?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function zt(o,d,g){return typeof o=="string"?(o=encodeURI(o).replace(d,Ys),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ys(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Js=/[#\/\?@]/g,va=/[#\?:]/g,Tt=/[#\?]/g,Zs=/[#\?@]/g,vr=/#/g;function Er(o,d){this.h=this.g=null,this.i=o||null,this.j=!!d}function dn(o){o.g||(o.g=new Map,o.h=0,o.i&&Ki(o.i,function(d,g){o.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}n=Er.prototype,n.add=function(o,d){dn(this),this.i=null,o=fn(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(d),this.h+=1,this};function Wt(o,d){dn(o),d=fn(o,d),o.g.has(d)&&(o.i=null,o.h-=o.g.get(d).length,o.g.delete(d))}function Gt(o,d){return dn(o),d=fn(o,d),o.g.has(d)}n.forEach=function(o,d){dn(this),this.g.forEach(function(g,T){g.forEach(function(O){o.call(d,O,T,this)},this)},this)};function Gr(o,d){dn(o);let g=[];if(typeof d=="string")Gt(o,d)&&(g=g.concat(o.g.get(fn(o,d))));else for(o=Array.from(o.g.values()),d=0;d<o.length;d++)g=g.concat(o[d]);return g}n.set=function(o,d){return dn(this),this.i=null,o=fn(this,o),Gt(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[d]),this.h+=1,this},n.get=function(o,d){return o?(o=Gr(this,o),o.length>0?String(o[0]):d):d};function eo(o,d,g){Wt(o,d),g.length>0&&(o.i=null,o.g.set(fn(o,d),Q(g)),o.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],d=Array.from(this.g.keys());for(let T=0;T<d.length;T++){var g=d[T];const O=gr(g);g=Gr(this,g);for(let V=0;V<g.length;V++){let Y=O;g[V]!==""&&(Y+="="+gr(g[V])),o.push(Y)}}return this.i=o.join("&")};function jn(o){const d=new Er;return d.i=o.i,o.g&&(d.g=new Map(o.g),d.h=o.h),d}function fn(o,d){return d=String(d),o.j&&(d=d.toLowerCase()),d}function Xi(o,d){d&&!o.j&&(dn(o),o.i=null,o.g.forEach(function(g,T){const O=T.toLowerCase();T!=O&&(Wt(this,T),eo(this,O,g))},o)),o.j=d}function to(o,d){const g=new et;if(u.Image){const T=new Image;T.onload=I(Kt,g,"TestLoadImage: loaded",!0,d,T),T.onerror=I(Kt,g,"TestLoadImage: error",!1,d,T),T.onabort=I(Kt,g,"TestLoadImage: abort",!1,d,T),T.ontimeout=I(Kt,g,"TestLoadImage: timeout",!1,d,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=o}else d(!1)}function no(o,d){const g=new et,T=new AbortController,O=setTimeout(()=>{T.abort(),Kt(g,"TestPingServer: timeout",!1,d)},1e4);fetch(o,{signal:T.signal}).then(V=>{clearTimeout(O),V.ok?Kt(g,"TestPingServer: ok",!0,d):Kt(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Kt(g,"TestPingServer: error",!1,d)})}function Kt(o,d,g,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(g)}catch{}}function ro(){this.g=new $s}function Yi(o){this.i=o.Sb||null,this.h=o.ab||!1}P(Yi,Oi),Yi.prototype.g=function(){return new Kr(this.i,this.h)};function Kr(o,d){Ze.call(this),this.H=o,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}P(Kr,Ze),n=Kr.prototype,n.open=function(o,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=d,this.readyState=1,wr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(d.body=o),(this.H||u).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qr(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qr(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var d=o.value?o.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!o.done}))&&(this.response=this.responseText+=d)}o.done?Tr(this):wr(this),this.readyState==3&&Qr(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Tr(this))},n.Na=function(o){this.g&&(this.response=o,Tr(this))},n.ga=function(){this.g&&Tr(this)};function Tr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,wr(o)}n.setRequestHeader=function(o,d){this.A.append(o,d)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=d.next();return o.join(`\r
`)};function wr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function io(o){let d="";return Dt(o,function(g,T){d+=T,d+=":",d+=g,d+=`\r
`}),d}function Ji(o,d,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=io(g),typeof o=="string"?g!=null&&gr(g):xe(o,d,g))}function Le(o){Ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}P(Le,Ze);var Ea=/^https?$/i,Ta=["POST","PUT"];n=Le.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,d,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);d=d?d.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$r.g(),this.g.onreadystatechange=M(v(this.Ca,this));try{this.B=!0,this.g.open(d,String(o),!0),this.B=!1}catch(V){Zi(this,V);return}if(o=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)g.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())g.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=u.FormData&&o instanceof u.FormData,!(Array.prototype.indexOf.call(Ta,d,void 0)>=0)||T||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Y]of g)this.g.setRequestHeader(V,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){Zi(this,V)}};function Zi(o,d){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=d,o.o=5,Xr(o),qn(o)}function Xr(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,nt(this,"complete"),nt(this,"abort"),qn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qn(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?es(this):this.Xa())},n.Xa=function(){es(this)};function es(o){if(o.h&&typeof a<"u"){if(o.v&&Mt(o)==4)setTimeout(o.Ca.bind(o),0);else if(nt(o,"readystatechange"),Mt(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var T;if(T=V===0){let Y=String(o.D).match(Gi)[1]||null;!Y&&u.self&&u.self.location&&(Y=u.self.location.protocol.slice(0,-1)),T=!Ea.test(Y?Y.toLowerCase():"")}g=T}if(g)nt(o,"complete"),nt(o,"success");else{o.o=6;try{var O=Mt(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Xr(o)}}finally{qn(o)}}}}function qn(o,d){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,d||nt(o,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Mt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Mt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var d=this.g.responseText;return o&&d.indexOf(o)==0&&(d=d.substring(o.length)),ya(d)}};function ts(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function ns(o){const d={};o=(o.g&&Mt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<o.length;T++){if(b(o[T]))continue;var g=_a(o[T]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=d[O]||[];d[O]=V,V.push(g)}qs(d,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(o,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||d}function so(o){this.za=0,this.i=[],this.j=new et,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,o),this.Za=Ir("retryDelaySeedMs",1e4,o),this.Ta=Ir("forwardChannelMaxRetries",2,o),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new $i(o&&o.concurrentRequestLimit),this.Ba=new ro,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=so.prototype,n.ka=8,n.I=1,n.connect=function(o,d,g,T){$e(0),this.W=o,this.H=d||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=B(this,null,this.W),Bn(this)};function rs(o){if(is(o),o.I==3){var d=o.V++,g=Ve(o.J);if(xe(g,"SID",o.M),xe(g,"RID",d),xe(g,"TYPE","terminate"),Ar(o,g),d=new $t(o,o.j,d),d.M=2,d.A=Fn(Ve(g)),g=!1,u.navigator&&u.navigator.sendBeacon)try{g=u.navigator.sendBeacon(d.A.toString(),"")}catch{}!g&&u.Image&&(new Image().src=d.A,g=!0),g||(d.g=H(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ln(d)}D(o)}function Qt(o){o.g&&(f(o),o.g.cancel(),o.g=null)}function is(o){Qt(o),o.v&&(u.clearTimeout(o.v),o.v=null),y(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&u.clearTimeout(o.m),o.m=null)}function Bn(o){if(!Hi(o.h)&&!o.m){o.m=!0;var d=o.Ea;Be||C(),Me||(Be(),Me=!0),l.add(d,o),o.D=0}}function wa(o,d){return Qs(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=d.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Nn(v(o.Ea,o,d),R(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new $t(this,this.j,o);let V=this.o;if(this.U&&(V?(V=Si(V),qr(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,d>4096){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=s(this,O,d),g=Ve(this.J),xe(g,"RID",o),xe(g,"CVER",22),this.G&&xe(g,"X-HTTP-Session-Id",this.G),Ar(this,g),V&&(this.R?d="headers="+gr(io(V))+"&"+d:this.u&&Ji(g,this.u,V)),zi(this.h,O),this.Ra&&xe(g,"TYPE","init"),this.S?(xe(g,"$req",d),xe(g,"SID","null"),O.U=!0,Hr(O,g,null)):Hr(O,g,d),this.I=2}}else this.I==3&&(o?oo(this,o):this.i.length==0||Hi(this.h)||oo(this))};function oo(o,d){var g;d?g=d.l:g=o.V++;const T=Ve(o.J);xe(T,"SID",o.M),xe(T,"RID",g),xe(T,"AID",o.K),Ar(o,T),o.u&&o.o&&Ji(T,o.u,o.o),g=new $t(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),d&&(o.i=d.G.concat(o.i)),d=s(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),zi(o.h,g),Hr(g,T,d)}function Ar(o,d){o.H&&Dt(o.H,function(g,T){xe(d,T,g)}),o.l&&Dt({},function(g,T){xe(d,T,g)})}function s(o,d,g){g=Math.min(o.i.length,g);const T=o.l?v(o.l.Ka,o.l,o):null;e:{var O=o.i;let ge=-1;for(;;){const je=["count="+g];ge==-1?g>0?(ge=O[0].g,je.push("ofs="+ge)):ge=0:je.push("ofs="+ge);let Ee=!0;for(let Ue=0;Ue<g;Ue++){var V=O[Ue].g;const He=O[Ue].map;if(V-=ge,V<0)ge=Math.max(0,O[Ue].g-100),Ee=!1;else try{V="req"+V+"_"||"";try{var Y=He instanceof Map?He:Object.entries(He);for(const[lt,it]of Y){let ze=it;p(it)&&(ze=Vi(it)),je.push(V+lt+"="+encodeURIComponent(ze))}}catch(lt){throw je.push(V+"type="+encodeURIComponent("_badmap")),lt}}catch{T&&T(He)}}if(Ee){Y=je.join("&");break e}}Y=void 0}return o=o.i.splice(0,g),d.G=o,Y}function c(o){if(!o.g&&!o.v){o.Y=1;var d=o.Da;Be||C(),Me||(Be(),Me=!0),l.add(d,o),o.A=0}}function h(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Nn(v(o.Da,o),R(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,m(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Nn(v(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$e(10),Qt(this),m(this))};function f(o){o.B!=null&&(u.clearTimeout(o.B),o.B=null)}function m(o){o.g=new $t(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var d=Ve(o.na);xe(d,"RID","rpc"),xe(d,"SID",o.M),xe(d,"AID",o.K),xe(d,"CI",o.F?"0":"1"),!o.F&&o.ia&&xe(d,"TO",o.ia),xe(d,"TYPE","xmlhttp"),Ar(o,d),o.u&&o.o&&Ji(d,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=Fn(Ve(d)),g.u=null,g.R=!0,Gs(g,o)}n.Va=function(){this.C!=null&&(this.C=null,Qt(this),h(this),$e(19))};function y(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function E(o,d){var g=null;if(o.g==d){y(o),f(o),o.g=null;var T=2}else if(_r(o.h,d))g=d.G,Xs(o.h,d),T=1;else return;if(o.I!=0){if(d.o)if(T==1){g=d.u?d.u.length:0,d=Date.now()-d.F;var O=o.D;T=fr(),nt(T,new Li(T,g)),Bn(o)}else c(o);else if(O=d.m,O==3||O==0&&d.X>0||!(T==1&&wa(o,d)||T==2&&h(o)))switch(g&&g.length>0&&(d=o.h,d.i=d.i.concat(g)),O){case 1:A(o,5);break;case 4:A(o,10);break;case 3:A(o,6);break;default:A(o,2)}}}function R(o,d){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*d}function A(o,d){if(o.j.info("Error code "+d),d==2){var g=v(o.bb,o),T=o.Ua;const O=!T;T=new Ot(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||St(T,"https"),Fn(T),O?to(T.toString(),g):no(T.toString(),g)}else $e(2);o.I=0,o.l&&o.l.pa(d),D(o),is(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function D(o){if(o.I=0,o.ja=[],o.l){const d=Wi(o.h);(d.length!=0||o.i.length!=0)&&(L(o.ja,d),L(o.ja,o.i),o.h.i.length=0,Q(o.i),o.i.length=0),o.l.oa()}}function B(o,d,g){var T=g instanceof Ot?Ve(g):new Ot(g);if(T.g!="")d&&(T.g=d+"."+T.g),Ht(T,T.u);else{var O=u.location;T=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;const V=new Ot(null);T&&St(V,T),d&&(V.g=d),O&&Ht(V,O),g&&(V.h=g),T=V}return g=o.G,d=o.wa,g&&d&&xe(T,g,d),xe(T,"VER",o.ka),Ar(o,T),T}function H(o,d,g){if(d&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=o.Aa&&!o.ma?new Le(new Yi({ab:g})):new Le(o.ma),d.Fa(o.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function j(){}n=j.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function J(){}J.prototype.g=function(o,d){return new oe(o,d)};function oe(o,d){Ze.call(this),this.g=new so(d),this.l=o,this.h=d&&d.messageUrlParams||null,o=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(o?o["X-WebChannel-Content-Type"]=d.messageContentType:o={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(o?o["X-WebChannel-Client-Profile"]=d.sa:o={"X-WebChannel-Client-Profile":d.sa}),this.g.U=o,(o=d&&d.Qb)&&!b(o)&&(this.g.u=o),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,o=this.h,o!==null&&d in o&&(o=this.h,d in o&&delete o[d])),this.j=new Fe(this)}P(oe,Ze),oe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},oe.prototype.close=function(){rs(this.g)},oe.prototype.o=function(o){var d=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=Vi(o),o=g);d.i.push(new Ks(d.Ya++,o)),d.I==3&&Bn(d)},oe.prototype.N=function(){this.g.l=null,delete this.j,rs(this.g),delete this.g,oe.Z.N.call(this)};function Te(o){Nt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var d=o.__sm__;if(d){e:{for(const g in d){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,d=d!==null&&o in d?d[o]:void 0),this.data=d}else this.data=o}P(Te,Nt);function ve(){Bt.call(this),this.status=1}P(ve,Bt);function Fe(o){this.g=o}P(Fe,j),Fe.prototype.ra=function(){nt(this.g,"a")},Fe.prototype.qa=function(o){nt(this.g,new Te(o))},Fe.prototype.pa=function(o){nt(this.g,new ve)},Fe.prototype.oa=function(){nt(this.g,"b")},J.prototype.createWebChannel=J.prototype.g,oe.prototype.send=oe.prototype.o,oe.prototype.open=oe.prototype.m,oe.prototype.close=oe.prototype.close,zh=function(){return new J},Hh=function(){return fr()},$h=un,Xa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,Io=Vt,hn.COMPLETE="complete",Bh=hn,Dn.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,cs=Dn,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,qh=Le}).apply(typeof fo<"u"?fo:typeof self<"u"?self:typeof window<"u"?window:{});const Hu="@firebase/firestore",zu="4.9.2";class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");let Ti="12.3.0";const Vr=new yc("@firebase/firestore");function Zr(){return Vr.logLevel}function ie(n,...e){if(Vr.logLevel<=Ae.DEBUG){const t=e.map(Rc);Vr.debug(`Firestore (${Ti}): ${n}`,...t)}}function An(n,...e){if(Vr.logLevel<=Ae.ERROR){const t=e.map(Rc);Vr.error(`Firestore (${Ti}): ${n}`,...t)}}function di(n,...e){if(Vr.logLevel<=Ae.WARN){const t=e.map(Rc);Vr.warn(`Firestore (${Ti}): ${n}`,...t)}}function Rc(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function de(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Wh(n,r,t)}function Wh(n,e,t){let r=`FIRESTORE (${Ti}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw An(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Wh(e,i,r)}function _e(n,e){return n}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class En{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Gh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ft.UNAUTHENTICATED)))}shutdown(){}}class By{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $y{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i;const i=_=>this.i!==r?(r=this.i,t(_)):Promise.resolve();let a=new En;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new En,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const _=a;e.enqueueRetryable((async()=>{await _.promise,await i(this.currentUser)}))},p=_=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new En)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Gh(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class Hy{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zy{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Hy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wy{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);const r=a=>{a.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ie("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Wu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wu(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Gy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Pc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Gy(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Ya(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Oa(i)===Oa(a)?be(i,a):Oa(i)?1:-1}return be(n.length,e.length)}const Ky=55296,Qy=57343;function Oa(n){const e=n.charCodeAt(0);return e>=Ky&&e<=Qy}function fi(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const Gu="__name__";class Yt{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Yt.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return be(e.length,t.length)}static compareSegments(e,t){const r=Yt.isNumericId(e),i=Yt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Yt.extractNumericId(e).compare(Yt.extractNumericId(t)):Ya(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}}class Ne extends Yt{construct(e,t,r){return new Ne(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ne(t)}static emptyPath(){return new Ne([])}}const Xy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Yt{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return Xy.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gu}static keyField(){return new ot([Gu])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const p=e[i];if(p==="\\"){if(i+1===e.length)throw new re(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new re(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else p==="`"?(u=!u,i++):p!=="."||u?(r+=p,i++):(a(),i++)}if(a(),u)throw new re(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ne.fromString(e))}static fromName(e){return new ce(Ne.fromString(e).popFirst(5))}static empty(){return new ce(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ne(e.slice()))}}function Kh(n,e,t){if(!t)throw new re(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Yy(n,e,t,r){if(e===!0&&r===!0)throw new re(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ku(n){if(!ce.isDocumentKey(n))throw new re(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Qu(n){if(ce.isDocumentKey(n))throw new re(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qh(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zo(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de(12329,{type:typeof n})}function Or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zo(n);throw new re(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Xe(n,e){const t={typeString:n};return e&&(t.value=e),t}function Os(n,e){if(!Qh(n))throw new re(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new re(W.INVALID_ARGUMENT,t);return!0}const Xu=-62135596800,Yu=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Yu);return new Oe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xu)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yu}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Os(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:Xe("string",Oe._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Oe(0,0))}static max(){return new ye(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ws=-1;function Jy(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new nr(i,ce.empty(),e)}function Zy(n){return new nr(n.readTime,n.key,ws)}class nr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nr(ye.min(),ce.empty(),ws)}static max(){return new nr(ye.max(),ce.empty(),ws)}}function e_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}const t_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function wi(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==t_)throw n;ie("LocalStore","Unexpectedly lost primary lease")}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,r)=>{t(e)}))}static reject(e){return new K(((t,r)=>{r(e)}))}static waitFor(e){return new K(((t,r)=>{let i=0,a=0,u=!1;e.forEach((p=>{++i,p.next((()=>{++a,u&&a===i&&t()}),(_=>r(_)))})),u=!0,a===i&&t()}))}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next((i=>i?K.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new K(((r,i)=>{const a=e.length,u=new Array(a);let p=0;for(let _=0;_<a;_++){const v=_;t(e[v]).next((I=>{u[v]=I,++p,p===a&&r(u)}),(I=>i(I)))}}))}static doWhile(e,t){return new K(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function r_(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ii(n){return n.name==="IndexedDbTransactionError"}class ea{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ea.ce=-1;const kc=-1;function ta(n){return n==null}function Fo(n){return n===0&&1/n==-1/0}function i_(n){return typeof n=="number"&&Number.isInteger(n)&&!Fo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Xh="";function s_(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ju(e)),e=o_(n.get(t),e);return Ju(e)}function o_(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Xh:t+="";break;default:t+=a}}return t}function Ju(n){return n+Xh+""}function Zu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class qe{constructor(e,t){this.comparator=e,this.root=t||st.EMPTY}insert(e,t){return new qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new po(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new po(this.root,e,this.comparator,!1)}getReverseIterator(){return new po(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new po(this.root,e,this.comparator,!0)}}class po{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=a??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new st(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new st(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Je{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new el(this.data.getIterator())}getIteratorFrom(e){return new el(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class el{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ut{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Ut([])}unionWith(e){let t=new Je(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ut(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fi(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Jh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Jh("Invalid base64 string: "+a):a}})(e);return new ct(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a})(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const a_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(Pe(!!n,39018),typeof n=="string"){let e=0;const t=a_.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}const Zh="server_timestamp",ed="__type__",td="__previous_value__",nd="__local_write_time__";function xc(n){return(n?.mapValue?.fields||{})[ed]?.stringValue===Zh}function na(n){const e=n.mapValue.fields[td];return xc(e)?na(e):e}function Is(n){const e=rr(n.mapValue.fields[nd].timestampValue);return new Oe(e.seconds,e.nanos)}class c_{constructor(e,t,r,i,a,u,p,_,v,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=I}}const Uo="(default)";class As{constructor(e,t){this.projectId=e,this.database=t||Uo}static empty(){return new As("","")}get isDefaultDatabase(){return this.database===Uo}isEqual(e){return e instanceof As&&e.projectId===this.projectId&&e.database===this.database}}const rd="__type__",u_="__max__",go={mapValue:{}},id="__vector__",jo="value";function sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xc(n)?4:h_(n)?9007199254740991:l_(n)?10:11:de(28295,{value:n})}function sn(n,e){if(n===e)return!0;const t=sr(n);if(t!==sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Is(n).isEqual(Is(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=rr(i.timestampValue),p=rr(a.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return ir(i.bytesValue).isEqual(ir(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return We(i.geoPointValue.latitude)===We(a.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return We(i.integerValue)===We(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=We(i.doubleValue),p=We(a.doubleValue);return u===p?Fo(u)===Fo(p):isNaN(u)&&isNaN(p)}return!1})(n,e);case 9:return fi(n.arrayValue.values||[],e.arrayValue.values||[],sn);case 10:case 11:return(function(i,a){const u=i.mapValue.fields||{},p=a.mapValue.fields||{};if(Zu(u)!==Zu(p))return!1;for(const _ in u)if(u.hasOwnProperty(_)&&(p[_]===void 0||!sn(u[_],p[_])))return!1;return!0})(n,e);default:return de(52216,{left:n})}}function bs(n,e){return(n.values||[]).find((t=>sn(t,e)))!==void 0}function pi(n,e){if(n===e)return 0;const t=sr(n),r=sr(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const p=We(a.integerValue||a.doubleValue),_=We(u.integerValue||u.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(n,e);case 3:return tl(n.timestampValue,e.timestampValue);case 4:return tl(Is(n),Is(e));case 5:return Ya(n.stringValue,e.stringValue);case 6:return(function(a,u){const p=ir(a),_=ir(u);return p.compareTo(_)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const p=a.split("/"),_=u.split("/");for(let v=0;v<p.length&&v<_.length;v++){const I=be(p[v],_[v]);if(I!==0)return I}return be(p.length,_.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const p=be(We(a.latitude),We(u.latitude));return p!==0?p:be(We(a.longitude),We(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nl(n.arrayValue,e.arrayValue);case 10:return(function(a,u){const p=a.fields||{},_=u.fields||{},v=p[jo]?.arrayValue,I=_[jo]?.arrayValue,P=be(v?.values?.length||0,I?.values?.length||0);return P!==0?P:nl(v,I)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===go.mapValue&&u===go.mapValue)return 0;if(a===go.mapValue)return 1;if(u===go.mapValue)return-1;const p=a.fields||{},_=Object.keys(p),v=u.fields||{},I=Object.keys(v);_.sort(),I.sort();for(let P=0;P<_.length&&P<I.length;++P){const M=Ya(_[P],I[P]);if(M!==0)return M;const Q=pi(p[_[P]],v[I[P]]);if(Q!==0)return Q}return be(_.length,I.length)})(n.mapValue,e.mapValue);default:throw de(23264,{he:t})}}function tl(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=rr(n),r=rr(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function nl(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=pi(t[i],r[i]);if(a)return a}return be(t.length,r.length)}function gi(n){return Ja(n)}function Ja(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=rr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Ja(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${Ja(t.fields[u])}`;return i+"}"})(n.mapValue):de(61005,{value:n})}function Ao(n){switch(sr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=na(n);return e?16+Ao(e):16;case 5:return 2*n.stringValue.length;case 6:return ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Ao(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Lr(r.fields,((a,u)=>{i+=a.length+Ao(u)})),i})(n.mapValue);default:throw de(13486,{value:n})}}function rl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Za(n){return!!n&&"integerValue"in n}function Dc(n){return!!n&&"arrayValue"in n}function il(n){return!!n&&"nullValue"in n}function sl(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bo(n){return!!n&&"mapValue"in n}function l_(n){return(n?.mapValue?.fields||{})[rd]?.stringValue===id}function gs(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Lr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=gs(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gs(n.arrayValue.values[t]);return e}return{...n}}function h_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===u_}class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gs(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}u?r[p.lastSegment()]=gs(u):i.push(p.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());bo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lr(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Pt(gs(this.value))}}function sd(n){const e=[];return Lr(n.fields,((t,r)=>{const i=new ot([t]);if(bo(r)){const a=sd(r.mapValue).fields;if(a.length===0)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)})),new Ut(e)}class pt{constructor(e,t,r,i,a,u,p){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=p}static newInvalidDocument(e){return new pt(e,0,ye.min(),ye.min(),ye.min(),Pt.empty(),0)}static newFoundDocument(e,t,r,i){return new pt(e,1,t,ye.min(),r,i,0)}static newNoDocument(e,t){return new pt(e,2,t,ye.min(),ye.min(),Pt.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,ye.min(),ye.min(),Pt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qo{constructor(e,t){this.position=e,this.inclusive=t}}function ol(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(a.field.isKeyField()?r=ce.comparator(ce.fromName(u.referenceValue),t.key):r=pi(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function al(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sn(n.position[t],e.position[t]))return!1;return!0}class Bo{constructor(e,t="asc"){this.field=e,this.dir=t}}function d_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class od{}class Qe extends od{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new p_(e,t,r):t==="array-contains"?new y_(e,r):t==="in"?new __(e,r):t==="not-in"?new v_(e,r):t==="array-contains-any"?new E_(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new g_(e,r):new m_(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pi(t,this.value)):t!==null&&sr(this.value)===sr(t)&&this.matchesComparison(pi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends od{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qt(e,t)}matches(e){return ad(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ad(n){return n.op==="and"}function cd(n){return f_(n)&&ad(n)}function f_(n){for(const e of n.filters)if(e instanceof qt)return!1;return!0}function ec(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+gi(n.value);if(cd(n))return n.filters.map((e=>ec(e))).join(",");{const e=n.filters.map((t=>ec(t))).join(",");return`${n.op}(${e})`}}function ud(n,e){return n instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&sn(r.value,i.value)})(n,e):n instanceof qt?(function(r,i){return i instanceof qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,u,p)=>a&&ud(u,i.filters[p])),!0):!1})(n,e):void de(19439)}function ld(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${gi(t.value)}`})(n):n instanceof qt?(function(t){return t.op.toString()+" {"+t.getFilters().map(ld).join(" ,")+"}"})(n):"Filter"}class p_ extends Qe{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class g_ extends Qe{constructor(e,t){super(e,"in",t),this.keys=hd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class m_ extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=hd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hd(n,e){return(e.arrayValue?.values||[]).map((t=>ce.fromName(t.referenceValue)))}class y_ extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dc(t)&&bs(t.arrayValue,this.value)}}class __ extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bs(this.value.arrayValue,t)}}class v_ extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bs(this.value.arrayValue,t)}}class E_ extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>bs(this.value.arrayValue,r)))}}class T_{constructor(e,t=null,r=[],i=[],a=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=p,this.Te=null}}function cl(n,e=null,t=[],r=[],i=null,a=null,u=null){return new T_(n,e,t,r,i,a,u)}function Nc(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ec(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ta(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>gi(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>gi(r))).join(",")),e.Te=t}return e.Te}function Vc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ud(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!al(n.startAt,e.startAt)&&al(n.endAt,e.endAt)}function tc(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Ms{constructor(e,t=null,r=[],i=[],a=null,u="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function w_(n,e,t,r,i,a,u,p){return new Ms(n,e,t,r,i,a,u,p)}function Oc(n){return new Ms(n)}function ul(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dd(n){return n.collectionGroup!==null}function ms(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Je(ot.comparator);return u.filters.forEach((_=>{_.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Bo(a,r))})),t.has(ot.keyField().canonicalString())||e.Ie.push(new Bo(ot.keyField(),r))}return e.Ie}function en(n){const e=_e(n);return e.Ee||(e.Ee=I_(e,ms(n))),e.Ee}function I_(n,e){if(n.limitType==="F")return cl(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Bo(i.field,a)}));const t=n.endAt?new qo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qo(n.startAt.position,n.startAt.inclusive):null;return cl(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nc(n,e){const t=n.filters.concat([e]);return new Ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rc(n,e,t){return new Ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ra(n,e){return Vc(en(n),en(e))&&n.limitType===e.limitType}function fd(n){return`${Nc(en(n))}|lt:${n.limitType}`}function ei(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ld(i))).join(", ")}]`),ta(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>gi(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>gi(i))).join(",")),`Target(${r})`})(en(n))}; limitType=${n.limitType})`}function ia(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of ms(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(u,p,_){const v=ol(u,p,_);return u.inclusive?v<=0:v<0})(r.startAt,ms(r),i)||r.endAt&&!(function(u,p,_){const v=ol(u,p,_);return u.inclusive?v>=0:v>0})(r.endAt,ms(r),i))})(n,e)}function A_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pd(n){return(e,t)=>{let r=!1;for(const i of ms(n)){const a=b_(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function b_(n,e,t){const r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(a,u,p){const _=u.data.field(a),v=p.data.field(a);return _!==null&&v!==null?pi(_,v):de(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:n.dir})}}class Fr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lr(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Yh(this.inner)}size(){return this.innerSize}}const S_=new qe(ce.comparator);function bn(){return S_}const gd=new qe(ce.comparator);function us(...n){let e=gd;for(const t of n)e=e.insert(t.key,t);return e}function md(n){let e=gd;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Cr(){return ys()}function yd(){return ys()}function ys(){return new Fr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const C_=new qe(ce.comparator),R_=new Je(ce.comparator);function Se(...n){let e=R_;for(const t of n)e=e.add(t);return e}const P_=new Je(be);function k_(){return P_}function Mc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fo(e)?"-0":e}}function _d(n){return{integerValue:""+n}}function x_(n,e){return i_(e)?_d(e):Mc(n,e)}class sa{constructor(){this._=void 0}}function D_(n,e,t){return n instanceof Ss?(function(i,a){const u={fields:{[ed]:{stringValue:Zh},[nd]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&xc(a)&&(a=na(a)),a&&(u.fields[td]=a),{mapValue:u}})(t,e):n instanceof Cs?Ed(n,e):n instanceof Rs?Td(n,e):(function(i,a){const u=vd(i,a),p=ll(u)+ll(i.Ae);return Za(u)&&Za(i.Ae)?_d(p):Mc(i.serializer,p)})(n,e)}function N_(n,e,t){return n instanceof Cs?Ed(n,e):n instanceof Rs?Td(n,e):t}function vd(n,e){return n instanceof $o?(function(r){return Za(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ss extends sa{}class Cs extends sa{constructor(e){super(),this.elements=e}}function Ed(n,e){const t=wd(e);for(const r of n.elements)t.some((i=>sn(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Rs extends sa{constructor(e){super(),this.elements=e}}function Td(n,e){let t=wd(e);for(const r of n.elements)t=t.filter((i=>!sn(i,r)));return{arrayValue:{values:t}}}class $o extends sa{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ll(n){return We(n.integerValue||n.doubleValue)}function wd(n){return Dc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class V_{constructor(e,t){this.field=e,this.transform=t}}function O_(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Cs&&i instanceof Cs||r instanceof Rs&&i instanceof Rs?fi(r.elements,i.elements,sn):r instanceof $o&&i instanceof $o?sn(r.Ae,i.Ae):r instanceof Ss&&i instanceof Ss})(n.transform,e.transform)}class M_{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function So(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class oa{}function Id(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bd(n.key,Tn.none()):new Ls(n.key,n.data,Tn.none());{const t=n.data,r=Pt.empty();let i=new Je(ot.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new Ur(n.key,r,new Ut(i.toArray()),Tn.none())}}function L_(n,e,t){n instanceof Ls?(function(i,a,u){const p=i.value.clone(),_=dl(i.fieldTransforms,a,u.transformResults);p.setAll(_),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Ur?(function(i,a,u){if(!So(i.precondition,a))return void a.convertToUnknownDocument(u.version);const p=dl(i.fieldTransforms,a,u.transformResults),_=a.data;_.setAll(Ad(i)),_.setAll(p),a.convertToFoundDocument(u.version,_).setHasCommittedMutations()})(n,e,t):(function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function _s(n,e,t,r){return n instanceof Ls?(function(a,u,p,_){if(!So(a.precondition,u))return p;const v=a.value.clone(),I=fl(a.fieldTransforms,_,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ur?(function(a,u,p,_){if(!So(a.precondition,u))return p;const v=fl(a.fieldTransforms,_,u),I=u.data;return I.setAll(Ad(a)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),p===null?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((P=>P.field)))})(n,e,t,r):(function(a,u,p){return So(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(n,e,t)}function F_(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=vd(r.transform,i||null);a!=null&&(t===null&&(t=Pt.empty()),t.set(r.field,a))}return t||null}function hl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fi(r,i,((a,u)=>O_(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ls extends oa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends oa{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ad(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function dl(n,e,t){const r=new Map;Pe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,p=e.data.field(a.field);r.set(a.field,N_(u,p,t[i]))}return r}function fl(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,D_(a,u,e))}return r}class bd extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U_ extends oa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class j_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&L_(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_s(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_s(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yd();return this.mutations.forEach((i=>{const a=e.get(i.key),u=a.overlayedDocument;let p=this.applyToLocalView(u,a.mutatedFields);p=t.has(i.key)?null:p;const _=Id(u,p);_!==null&&r.set(i.key,_),u.isValidDocument()||u.convertToNoDocument(ye.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Se())}isEqual(e){return this.batchId===e.batchId&&fi(this.mutations,e.mutations,((t,r)=>hl(t,r)))&&fi(this.baseMutations,e.baseMutations,((t,r)=>hl(t,r)))}}class Lc{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return C_})();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Lc(e,t,r,i)}}class q_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class B_{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ke,Ce;function $_(n){switch(n){case W.OK:return de(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return de(15467,{code:n})}}function Sd(n){if(n===void 0)return An("GRPC error has no .code"),W.UNKNOWN;switch(n){case Ke.OK:return W.OK;case Ke.CANCELLED:return W.CANCELLED;case Ke.UNKNOWN:return W.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return W.INTERNAL;case Ke.UNAVAILABLE:return W.UNAVAILABLE;case Ke.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ke.NOT_FOUND:return W.NOT_FOUND;case Ke.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ke.ABORTED:return W.ABORTED;case Ke.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ke.DATA_LOSS:return W.DATA_LOSS;default:return de(39323,{code:n})}}(Ce=Ke||(Ke={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";function H_(){return new TextEncoder}const z_=new er([4294967295,4294967295],0);function pl(n){const e=H_().encode(n),t=new jh;return t.update(e),new Uint8Array(t.digest())}function gl(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new er([t,r],0),new er([i,a],0)]}class Fc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ls(`Invalid padding: ${t}`);if(r<0)throw new ls(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ls(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ls(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=er.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(er.fromNumber(r)));return i.compare(z_)===1&&(i=new er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pl(e),[r,i]=gl(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);if(!this.we(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Fc(a,i,t);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=pl(e),[r,i]=gl(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ls extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class aa{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Fs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new aa(ye.min(),i,new qe(be),bn(),Se())}}class Fs{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fs(r,t,Se(),Se(),Se())}}class Co{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class Cd{constructor(e,t){this.targetId=e,this.Ce=t}}class Rd{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ml{constructor(){this.ve=0,this.Fe=yl(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),t=Se(),r=Se();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:a})}})),new Fs(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=yl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class W_{constructor(e){this.Ge=e,this.ze=new Map,this.je=bn(),this.Je=mo(),this.He=mo(),this.Ye=new qe(be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(tc(a))if(r===0){const u=new ce(a.path);this.et(t,u,pt.newNoDocument(u,ye.min()))}else Pe(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const p=this.ut(e),_=p?this.ct(p,e,u):1;if(_!==0){this.it(t);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let u,p;try{u=ir(r).toUint8Array()}catch(_){if(_ instanceof Jh)return di("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new Fc(u,i,a)}catch(_){return di(_ instanceof ls?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(p)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const p=this.ot(u);if(p){if(a.current&&tc(p.target)){const _=new ce(p.target.path);this.It(_).has(u)||this.Et(u,_)||this.et(u,_,pt.newNoDocument(_,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let r=Se();this.He.forEach(((a,u)=>{let p=!0;u.forEachWhile((_=>{const v=this.ot(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const i=new aa(e,t,this.Ye,this.je,r);return this.je=bn(),this.Je=mo(),this.He=mo(),this.Ye=new qe(be),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ml,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ml),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mo(){return new qe(ce.comparator)}function yl(){return new qe(ce.comparator)}const G_={asc:"ASCENDING",desc:"DESCENDING"},K_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q_={and:"AND",or:"OR"};class X_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ic(n,e){return n.useProto3Json||ta(e)?e:{value:e}}function Ho(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pd(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Y_(n,e){return Ho(n,e.toTimestamp())}function tn(n){return Pe(!!n,49232),ye.fromTimestamp((function(t){const r=rr(t);return new Oe(r.seconds,r.nanos)})(n))}function Uc(n,e){return sc(n,e).canonicalString()}function sc(n,e){const t=(function(i){return new Ne(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kd(n){const e=Ne.fromString(n);return Pe(Od(e),10190,{key:e.toString()}),e}function oc(n,e){return Uc(n.databaseId,e.path)}function Ma(n,e){const t=kd(e);if(t.get(1)!==n.databaseId.projectId)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(Dd(t))}function xd(n,e){return Uc(n.databaseId,e)}function J_(n){const e=kd(n);return e.length===4?Ne.emptyPath():Dd(e)}function ac(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dd(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _l(n,e,t){return{name:oc(n,e),fields:t.value.mapValue.fields}}function Z_(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:de(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(v,I){return v.useProto3Json?(Pe(I===void 0||typeof I=="string",58123),ct.fromBase64String(I||"")):(Pe(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),ct.fromUint8Array(I||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(v){const I=v.code===void 0?W.UNKNOWN:Sd(v.code);return new re(I,v.message||"")})(u);t=new Rd(r,i,a,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ma(n,r.document.name),a=tn(r.document.updateTime),u=r.document.createTime?tn(r.document.createTime):ye.min(),p=new Pt({mapValue:{fields:r.document.fields}}),_=pt.newFoundDocument(i,a,u,p),v=r.targetIds||[],I=r.removedTargetIds||[];t=new Co(v,I,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ma(n,r.document),a=r.readTime?tn(r.readTime):ye.min(),u=pt.newNoDocument(i,a),p=r.removedTargetIds||[];t=new Co([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ma(n,r.document),a=r.removedTargetIds||[];t=new Co([],a,i,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new B_(i,a),p=r.targetId;t=new Cd(p,u)}}return t}function ev(n,e){let t;if(e instanceof Ls)t={update:_l(n,e.key,e.value)};else if(e instanceof bd)t={delete:oc(n,e.key)};else if(e instanceof Ur)t={update:_l(n,e.key,e.data),updateMask:uv(e.fieldMask)};else{if(!(e instanceof U_))return de(16599,{Vt:e.type});t={verify:oc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const p=u.transform;if(p instanceof Ss)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Cs)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Rs)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof $o)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw de(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Y_(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:de(27497)})(n,e.precondition)),t}function tv(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map((t=>(function(i,a){let u=i.updateTime?tn(i.updateTime):tn(a);return u.isEqual(ye.min())&&(u=tn(a)),new M_(u,i.transformResults||[])})(t,e)))):[]}function nv(n,e){return{documents:[xd(n,e.path)]}}function rv(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xd(n,i);const a=(function(v){if(v.length!==0)return Vd(qt.create(v,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(v){if(v.length!==0)return v.map((I=>(function(M){return{field:ti(M.field),direction:ov(M.dir)}})(I)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=ic(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:i}}function iv(n){let e=J_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pe(r===1,65062);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=(function(P){const M=Nd(P);return M instanceof qt&&cd(M)?M.getFilters():[M]})(t.where));let u=[];t.orderBy&&(u=(function(P){return P.map((M=>(function(L){return new Bo(ni(L.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(M)))})(t.orderBy));let p=null;t.limit&&(p=(function(P){let M;return M=typeof P=="object"?P.value:P,ta(M)?null:M})(t.limit));let _=null;t.startAt&&(_=(function(P){const M=!!P.before,Q=P.values||[];return new qo(Q,M)})(t.startAt));let v=null;return t.endAt&&(v=(function(P){const M=!P.before,Q=P.values||[];return new qo(Q,M)})(t.endAt)),w_(e,i,u,a,p,"F",_,v)}function sv(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Nd(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ni(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ni(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ni(t.unaryFilter.field);return Qe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ni(t.unaryFilter.field);return Qe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(ni(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return qt.create(t.compositeFilter.filters.map((r=>Nd(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(n):de(30097,{filter:n})}function ov(n){return G_[n]}function av(n){return K_[n]}function cv(n){return Q_[n]}function ti(n){return{fieldPath:n.canonicalString()}}function ni(n){return ot.fromServerFormat(n.fieldPath)}function Vd(n){return n instanceof Qe?(function(t){if(t.op==="=="){if(sl(t.value))return{unaryFilter:{field:ti(t.field),op:"IS_NAN"}};if(il(t.value))return{unaryFilter:{field:ti(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sl(t.value))return{unaryFilter:{field:ti(t.field),op:"IS_NOT_NAN"}};if(il(t.value))return{unaryFilter:{field:ti(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ti(t.field),op:av(t.op),value:t.value}}})(n):n instanceof qt?(function(t){const r=t.getFilters().map((i=>Vd(i)));return r.length===1?r[0]:{compositeFilter:{op:cv(t.op),filters:r}}})(n):de(54877,{filter:n})}function uv(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Od(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Xn{constructor(e,t,r,i,a=ye.min(),u=ye.min(),p=ct.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Xn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lv{constructor(e){this.yt=e}}function hv(n){const e=iv({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rc(e,e.limit,"L"):e}class dv{constructor(){this.Cn=new fv}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(nr.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Je(Ne.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ne.comparator)).toArray()}}const vl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Md=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(Md,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);class mi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new mi(0)}static cr(){return new mi(-1)}}const El="LruGarbageCollector",pv=1048576;function Tl([n,e],[t,r]){const i=be(n,t);return i===0?be(e,r):i}class gv{constructor(e){this.Ir=e,this.buffer=new Je(Tl),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(El,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ii(t)?ie(El,"Ignoring IndexedDB error during garbage collection: ",t):await wi(t)}await this.Vr(3e5)}))}}class yv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(ea.ce);const r=new gv(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(vl)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vl):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,u,p,_,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),i=this.params.maximumSequenceNumbersToCollect):i=P,u=Date.now(),this.nthSequenceNumber(e,i)))).next((P=>(r=P,p=Date.now(),this.removeTargets(e,r,t)))).next((P=>(a=P,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((P=>(v=Date.now(),Zr()<=Ae.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-I}ms
	Determined least recently used ${i} in `+(p-u)+`ms
	Removed ${a} targets in `+(_-p)+`ms
	Removed ${P} documents in `+(v-_)+`ms
Total Duration: ${v-I}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:P}))))}}function _v(n,e){return new yv(n,e)}class vv{constructor(){this.changes=new Fr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ev{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&_s(r.mutation,i,Ut.empty(),Oe.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Se()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Se()){const i=Cr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let u=us();return a.forEach(((p,_)=>{u=u.insert(p,_.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Cr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Se())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,r,i){let a=bn();const u=ys(),p=(function(){return ys()})();return t.forEach(((_,v)=>{const I=r.get(v.key);i.has(v.key)&&(I===void 0||I.mutation instanceof Ur)?a=a.insert(v.key,v):I!==void 0?(u.set(v.key,I.mutation.getFieldMask()),_s(I.mutation,v,I.mutation.getFieldMask(),Oe.now())):u.set(v.key,Ut.empty())})),this.recalculateAndSaveOverlays(e,a).next((_=>(_.forEach(((v,I)=>u.set(v,I))),t.forEach(((v,I)=>p.set(v,new Ev(I,u.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=ys();let i=new qe(((u,p)=>u-p)),a=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((_=>{const v=t.get(_);if(v===null)return;let I=r.get(_)||Ut.empty();I=p.applyToLocalView(v,I),r.set(_,I);const P=(i.get(p.batchId)||Se()).add(_);i=i.insert(p.batchId,P)}))})).next((()=>{const u=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),v=_.key,I=_.value,P=yd();I.forEach((M=>{if(!a.has(M)){const Q=Id(t.get(M),r.get(M));Q!==null&&P.set(M,Q),a=a.add(M)}})),u.push(this.documentOverlayCache.saveOverlays(e,v,P))}return K.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(u){return ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):K.resolve(Cr());let p=ws,_=a;return u.next((v=>K.forEach(v,((I,P)=>(p<P.largestBatchId&&(p=P.largestBatchId),a.get(I)?K.resolve():this.remoteDocumentCache.getEntry(e,I).next((M=>{_=_.insert(I,M)}))))).next((()=>this.populateOverlays(e,v,a))).next((()=>this.computeViews(e,_,v,Se()))).next((I=>({batchId:p,changes:md(I)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((r=>{let i=us();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let u=us();return this.indexManager.getCollectionParents(e,a).next((p=>K.forEach(p,(_=>{const v=(function(P,M){return new Ms(M,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(t,_.child(a));return this.getDocumentsMatchingCollectionQuery(e,v,r,i).next((I=>{I.forEach(((P,M)=>{u=u.insert(P,M)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((u=>{a.forEach(((_,v)=>{const I=v.getKey();u.get(I)===null&&(u=u.insert(I,pt.newInvalidDocument(I)))}));let p=us();return u.forEach(((_,v)=>{const I=a.get(_);I!==void 0&&_s(I.mutation,v,Ut.empty(),Oe.now()),ia(t,v)&&(p=p.insert(_,v))})),p}))}}class wv{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:hv(i.bundledQuery),readTime:tn(i.readTime)}})(t)),K.resolve()}}class Iv{constructor(){this.overlays=new qe(ce.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cr();return K.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=Cr(),a=t.length+1,u=new ce(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const _=p.getNext().value,v=_.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new qe(((v,I)=>v-I));const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let I=a.get(v.largestBatchId);I===null&&(I=Cr(),a=a.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const p=Cr(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((v,I)=>p.set(v,I))),!(p.size()>=i)););return K.resolve(p)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new q_(t,r));let a=this.qr.get(t);a===void 0&&(a=Se(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class Av{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}class jc{constructor(){this.Qr=new Je(tt.$r),this.Ur=new Je(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new tt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new tt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ce(new Ne([])),r=new tt(t,e),i=new tt(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ne([])),r=new tt(t,e),i=new tt(t,e+1);let a=Se();return this.Ur.forEachInRange([r,i],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new tt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}class bv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je(tt.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new j_(a,t,r,i);this.mutationQueue.push(u);for(const p of i)this.Zr=this.Zr.add(new tt(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return K.resolve(u)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return K.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?kc:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(u=>{const p=this.Xr(u.Yr);a.push(p)})),K.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Je(be);return t.forEach((i=>{const a=new tt(i,0),u=new tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(p=>{r=r.add(p.Yr)}))})),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ce.isDocumentKey(a)||(a=a.child(""));const u=new tt(new ce(a),0);let p=new Je(be);return this.Zr.forEachWhile((_=>{const v=_.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(p=p.add(_.Yr)),!0)}),u),K.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(t.mutations,(i=>{const a=new tt(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new tt(t,0),i=this.Zr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sv{constructor(e){this.ri=e,this.docs=(function(){return new qe(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():pt.newInvalidDocument(i))})),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bn();const u=t.path,p=new ce(u.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:v,value:{document:I}}=_.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||e_(Zy(I),r)<=0||(i.has(I.key)||ia(t,I))&&(a=a.insert(I.key,I.mutableCopy()))}return K.resolve(a)}getAllFromCollectionGroup(e,t,r,i){de(9500)}ii(e,t){return K.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Cv(this)}getSize(e){return K.resolve(this.size)}}class Cv extends vv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Rv{constructor(e){this.persistence=e,this.si=new Fr((t=>Nc(t)),Vc),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new jc,this.targetCount=0,this.ai=mi.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new mi(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)})),K.waitFor(a).next((()=>i))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((u=>{a.push(i.markPotentiallyOrphaned(e,u))})),K.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}class Ld{constructor(e,t){this.ui={},this.overlays={},this.ci=new ea(0),this.li=!1,this.li=!0,this.hi=new Av,this.referenceDelegate=e(this),this.Pi=new Rv(this),this.indexManager=new dv,this.remoteDocumentCache=(function(i){return new Sv(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new lv(t),this.Ii=new wv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Iv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new bv(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const i=new Pv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return K.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Pv extends n_{constructor(e){super(),this.currentSequenceNumber=e}}class qc{constructor(e){this.persistence=e,this.Ri=new jc,this.Vi=null}static mi(e){return new qc(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(r=>{const i=ce.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,ye.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zo{constructor(e,t){this.persistence=e,this.pi=new Fr((r=>s_(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=_v(this,t)}static mi(e,t){return new zo(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?K.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,t).next((p=>{p||(r++,a.removeEntry(u,ye.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ao(e.data.value)),t}br(e,t,r){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bc{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Se(),i=Se();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Bc(e,t.fromCache,r,i)}}class kv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ep()?8:r_(gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new kv;return this.Ss(e,t,u).next((p=>{if(a.result=p,this.Vs)return this.bs(e,t,u,p.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Zr()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ei(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Zr()<=Ae.DEBUG&&ie("QueryEngine","Query:",ei(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Zr()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ei(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(t))):K.resolve())}ys(e,t){if(ul(t))return K.resolve(null);let r=en(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=rc(t,null,"F"),r=en(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Se(...a);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((_=>{const v=this.Ds(t,p);return this.Cs(t,v,u,_.readTime)?this.ys(e,rc(t,null,"F")):this.vs(e,v,t,_)}))))})))))}ws(e,t,r,i){return ul(t)||i.isEqual(ye.min())?K.resolve(null):this.ps.getDocuments(e,r).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,r,i)?K.resolve(null):(Zr()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ei(t)),this.vs(e,u,t,Jy(i,ws)).next((p=>p)))}))}Ds(e,t){let r=new Je(pd(e));return t.forEach(((i,a)=>{ia(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Zr()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ei(t)),this.ps.getDocumentsMatchingQuery(e,t,nr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const $c="LocalStore",Dv=3e8;class Nv{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new qe(be),this.xs=new Fr((a=>Nc(a)),Vc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Vv(n,e,t,r){return new Nv(n,e,t,r)}async function Fd(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],p=[];let _=Se();for(const v of i){u.push(v.batchId);for(const I of v.mutations)_=_.add(I.key)}for(const v of a){p.push(v.batchId);for(const I of v.mutations)_=_.add(I.key)}return t.localDocuments.getDocuments(r,_).next((v=>({Ls:v,removedBatchIds:u,addedBatchIds:p})))}))}))}function Ov(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,v,I){const P=v.batch,M=P.keys();let Q=K.resolve();return M.forEach((L=>{Q=Q.next((()=>I.getEntry(_,L))).next(($=>{const G=v.docVersions.get(L);Pe(G!==null,48541),$.version.compareTo(G)<0&&(P.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),I.addEntry($)))}))})),Q.next((()=>p.mutationQueue.removeMutationBatch(_,P)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let _=Se();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(_=_.add(p.batch.mutations[v].key));return _})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Ud(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mv(n,e){const t=_e(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach(((I,P)=>{const M=i.get(P);if(!M)return;p.push(t.Pi.removeMatchingKeys(a,I.removedDocuments,P).next((()=>t.Pi.addMatchingKeys(a,I.addedDocuments,P))));let Q=M.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(P)!==null?Q=Q.withResumeToken(ct.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):I.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(I.resumeToken,r)),i=i.insert(P,Q),(function($,G,X){return $.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Dv?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(M,Q,I)&&p.push(t.Pi.updateTargetData(a,Q))}));let _=bn(),v=Se();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))})),p.push(Lv(a,u,e.documentUpdates).next((I=>{_=I.ks,v=I.qs}))),!r.isEqual(ye.min())){const I=t.Pi.getLastRemoteSnapshotVersion(a).next((P=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));p.push(I)}return K.waitFor(p).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,_,v))).next((()=>_))})).then((a=>(t.Ms=i,a)))}function Lv(n,e,t){let r=Se(),i=Se();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=bn();return t.forEach(((p,_)=>{const v=a.get(p);_.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(ye.min())?(e.removeEntry(p,_.readTime),u=u.insert(p,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),u=u.insert(p,_)):ie($c,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",_.version)})),{ks:u,qs:i}}))}function Fv(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=kc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Uv(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,K.resolve(i)):t.Pi.allocateTargetId(r).next((u=>(i=new Xn(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function cc(n,e,t){const r=_e(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ii(u))throw u;ie($c,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wl(n,e,t){const r=_e(n);let i=ye.min(),a=Se();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(_,v,I){const P=_e(_),M=P.xs.get(I);return M!==void 0?K.resolve(P.Ms.get(M)):P.Pi.getTargetData(v,I)})(r,u,en(e)).next((p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,p.targetId).next((_=>{a=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?i:ye.min(),t?a:Se()))).next((p=>(jv(r,A_(e),p),{documents:p,Qs:a})))))}function jv(n,e,t){let r=n.Os.get(e)||ye.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Il{constructor(){this.activeTargetIds=k_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qv{constructor(){this.Mo=new Il,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Il,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Bv{Oo(e){}shutdown(){}}const Al="ConnectivityMonitor";class bl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(Al,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(Al,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yo=null;function uc(){return yo===null?yo=(function(){return 268435456+Math.round(2147483648*Math.random())})():yo++,"0x"+yo.toString(16)}const La="RestConnection",$v={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hv{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Uo?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const u=uc(),p=this.zo(e,t.toUriEncodedString());ie(La,`Sending RPC '${e}' ${u}:`,p,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,i,a);const{host:v}=new URL(p),I=_i(v);return this.Jo(e,p,_,r,I).then((P=>(ie(La,`Received RPC '${e}' ${u}: `,P),P)),(P=>{throw di(La,`RPC '${e}' ${u} failed with error: `,P,"url: ",p,"request:",r),P}))}Ho(e,t,r,i,a,u){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ti})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=$v[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class zv{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dt="WebChannelConnection";class Wv extends Hv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const u=uc();return new Promise(((p,_)=>{const v=new qh;v.setWithCredentials(!0),v.listenOnce(Bh.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Io.NO_ERROR:const P=v.getResponseJson();ie(dt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(P)),p(P);break;case Io.TIMEOUT:ie(dt,`RPC '${e}' ${u} timed out`),_(new re(W.DEADLINE_EXCEEDED,"Request time out"));break;case Io.HTTP_ERROR:const M=v.getStatus();if(ie(dt,`RPC '${e}' ${u} failed with status:`,M,"response text:",v.getResponseText()),M>0){let Q=v.getResponseJson();Array.isArray(Q)&&(Q=Q[0]);const L=Q?.error;if(L&&L.status&&L.message){const $=(function(X){const le=X.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(le)>=0?le:W.UNKNOWN})(L.status);_(new re($,L.message))}else _(new re(W.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new re(W.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:u,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ie(dt,`RPC '${e}' ${u} completed.`)}}));const I=JSON.stringify(i);ie(dt,`RPC '${e}' ${u} sending request:`,i),v.send(t,"POST",I,r,15)}))}T_(e,t,r){const i=uc(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zh(),p=Hh(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const I=a.join("");ie(dt,`Creating RPC '${e}' stream ${i}: ${I}`,_);const P=u.createWebChannel(I,_);this.I_(P);let M=!1,Q=!1;const L=new zv({Yo:G=>{Q?ie(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,G):(M||(ie(dt,`Opening RPC '${e}' stream ${i} transport.`),P.open(),M=!0),ie(dt,`RPC '${e}' stream ${i} sending:`,G),P.send(G))},Zo:()=>P.close()}),$=(G,X,le)=>{G.listen(X,(pe=>{try{le(pe)}catch(Re){setTimeout((()=>{throw Re}),0)}}))};return $(P,cs.EventType.OPEN,(()=>{Q||(ie(dt,`RPC '${e}' stream ${i} transport opened.`),L.o_())})),$(P,cs.EventType.CLOSE,(()=>{Q||(Q=!0,ie(dt,`RPC '${e}' stream ${i} transport closed`),L.a_(),this.E_(P))})),$(P,cs.EventType.ERROR,(G=>{Q||(Q=!0,di(dt,`RPC '${e}' stream ${i} transport errored. Name:`,G.name,"Message:",G.message),L.a_(new re(W.UNAVAILABLE,"The operation could not be completed")))})),$(P,cs.EventType.MESSAGE,(G=>{if(!Q){const X=G.data[0];Pe(!!X,16349);const le=X,pe=le?.error||le[0]?.error;if(pe){ie(dt,`RPC '${e}' stream ${i} received error:`,pe);const Re=pe.status;let Be=(function(C){const S=Ke[C];if(S!==void 0)return Sd(S)})(Re),Me=pe.message;Be===void 0&&(Be=W.INTERNAL,Me="Unknown error status: "+Re+" with message "+pe.message),Q=!0,L.a_(new re(Be,Me)),P.close()}else ie(dt,`RPC '${e}' stream ${i} received:`,X),L.u_(X)}})),$(p,$h.STAT_EVENT,(G=>{G.stat===Xa.PROXY?ie(dt,`RPC '${e}' stream ${i} detected buffering proxy`):G.stat===Xa.NOPROXY&&ie(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Fa(){return typeof document<"u"?document:null}function ca(n){return new X_(n,!0)}class jd{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Sl="PersistentStream";class qd{constructor(e,t,r,i,a,u,p,_){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jd(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(An(t.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new re(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(Sl,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ie(Sl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Gv extends qd{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Z_(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ye.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ye.min():u.readTime?tn(u.readTime):ye.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=ac(this.serializer),t.addTarget=(function(a,u){let p;const _=u.target;if(p=tc(_)?{documents:nv(a,_)}:{query:rv(a,_).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=Pd(a,u.resumeToken);const v=ic(a,u.expectedCount);v!==null&&(p.expectedCount=v)}else if(u.snapshotVersion.compareTo(ye.min())>0){p.readTime=Ho(a,u.snapshotVersion.toTimestamp());const v=ic(a,u.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const r=sv(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=ac(this.serializer),t.removeTarget=e,this.q_(t)}}class Kv extends qd{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tv(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ac(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ev(this.serializer,r)))};this.q_(t)}}class Qv{}class Xv extends Qv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,sc(t,r),i,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(W.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,sc(t,r),i,u,p,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(W.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Yv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Mr="RemoteStore";class Jv{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{jr(this)&&(ie(Mr,"Restarting streams for network reachability change."),await(async function(_){const v=_e(_);v.Ea.add(4),await Us(v),v.Ra.set("Unknown"),v.Ea.delete(4),await ua(v)})(this))}))})),this.Ra=new Yv(r,i)}}async function ua(n){if(jr(n))for(const e of n.da)await e(!0)}async function Us(n){for(const e of n.da)await e(!1)}function Bd(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Gc(t)?Wc(t):Ai(t).O_()&&zc(t,e))}function Hc(n,e){const t=_e(n),r=Ai(t);t.Ia.delete(e),r.O_()&&$d(t,e),t.Ia.size===0&&(r.O_()?r.L_():jr(t)&&t.Ra.set("Unknown"))}function zc(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ai(n).Y_(e)}function $d(n,e){n.Va.Ue(e),Ai(n).Z_(e)}function Wc(n){n.Va=new W_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ai(n).start(),n.Ra.ua()}function Gc(n){return jr(n)&&!Ai(n).x_()&&n.Ia.size>0}function jr(n){return _e(n).Ea.size===0}function Hd(n){n.Va=void 0}async function Zv(n){n.Ra.set("Online")}async function eE(n){n.Ia.forEach(((e,t)=>{zc(n,e)}))}async function tE(n,e){Hd(n),Gc(n)?(n.Ra.ha(e),Wc(n)):n.Ra.set("Unknown")}async function nE(n,e,t){if(n.Ra.set("Online"),e instanceof Rd&&e.state===2&&e.cause)try{await(async function(i,a){const u=a.cause;for(const p of a.targetIds)i.Ia.has(p)&&(await i.remoteSyncer.rejectListen(p,u),i.Ia.delete(p),i.Va.removeTarget(p))})(n,e)}catch(r){ie(Mr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wo(n,r)}else if(e instanceof Co?n.Va.Ze(e):e instanceof Cd?n.Va.st(e):n.Va.tt(e),!t.isEqual(ye.min()))try{const r=await Ud(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const p=a.Va.Tt(u);return p.targetChanges.forEach(((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const I=a.Ia.get(v);I&&a.Ia.set(v,I.withResumeToken(_.resumeToken,u))}})),p.targetMismatches.forEach(((_,v)=>{const I=a.Ia.get(_);if(!I)return;a.Ia.set(_,I.withResumeToken(ct.EMPTY_BYTE_STRING,I.snapshotVersion)),$d(a,_);const P=new Xn(I.target,_,v,I.sequenceNumber);zc(a,P)})),a.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(r){ie(Mr,"Failed to raise snapshot:",r),await Wo(n,r)}}async function Wo(n,e,t){if(!Ii(e))throw e;n.Ea.add(1),await Us(n),n.Ra.set("Offline"),t||(t=()=>Ud(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ie(Mr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ua(n)}))}function zd(n,e){return e().catch((t=>Wo(n,t,e)))}async function la(n){const e=_e(n),t=or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kc;for(;rE(e);)try{const i=await Fv(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,iE(e,i)}catch(i){await Wo(e,i)}Wd(e)&&Gd(e)}function rE(n){return jr(n)&&n.Ta.length<10}function iE(n,e){n.Ta.push(e);const t=or(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Wd(n){return jr(n)&&!or(n).x_()&&n.Ta.length>0}function Gd(n){or(n).start()}async function sE(n){or(n).ra()}async function oE(n){const e=or(n);for(const t of n.Ta)e.ea(t.mutations)}async function aE(n,e,t){const r=n.Ta.shift(),i=Lc.from(r,e,t);await zd(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await la(n)}async function cE(n,e){e&&or(n).X_&&await(async function(r,i){if((function(u){return $_(u)&&u!==W.ABORTED})(i.code)){const a=r.Ta.shift();or(r).B_(),await zd(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await la(r)}})(n,e),Wd(n)&&Gd(n)}async function Cl(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ie(Mr,"RemoteStore received new credentials");const r=jr(t);t.Ea.add(3),await Us(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ua(t)}async function uE(n,e){const t=_e(n);e?(t.Ea.delete(2),await ua(t)):e||(t.Ea.add(2),await Us(t),t.Ra.set("Unknown"))}function Ai(n){return n.ma||(n.ma=(function(t,r,i){const a=_e(t);return a.sa(),new Gv(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Zv.bind(null,n),t_:eE.bind(null,n),r_:tE.bind(null,n),H_:nE.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Gc(n)?Wc(n):n.Ra.set("Unknown")):(await n.ma.stop(),Hd(n))}))),n.ma}function or(n){return n.fa||(n.fa=(function(t,r,i){const a=_e(t);return a.sa(),new Kv(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:sE.bind(null,n),r_:cE.bind(null,n),ta:oE.bind(null,n),na:aE.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await la(n)):(await n.fa.stop(),n.Ta.length>0&&(ie(Mr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Kc{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,p=new Kc(e,t,u,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qc(n,e){if(An("AsyncQueue",`${e}: ${n}`),Ii(n))return new re(W.UNAVAILABLE,`${e}: ${n}`);throw n}class ci{static emptySet(e){return new ci(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=us(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rl{constructor(){this.ga=new qe(ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class yi{constructor(e,t,r,i,a,u,p,_,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new yi(e,t,ci.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ra(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class lE{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hE{constructor(){this.queries=Pl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=_e(t),a=i.queries;i.queries=Pl(),a.forEach(((u,p)=>{for(const _ of p.Sa)_.onError(r)}))})(this,new re(W.ABORTED,"Firestore shutting down"))}}function Pl(){return new Fr((n=>fd(n)),ra)}async function Kd(n,e){const t=_e(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new lE,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const p=Qc(u,`Initialization of query '${ei(e.query)}' failed`);return void e.onError(p)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Xc(t)}async function Qd(n,e){const t=_e(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dE(n,e){const t=_e(n);let r=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const p of u.Sa)p.Fa(i)&&(r=!0);u.wa=i}}r&&Xc(t)}function fE(n,e,t){const r=_e(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Xc(n){n.Ca.forEach((e=>{e.next()}))}var lc,kl;(kl=lc||(lc={})).Ma="default",kl.Cache="cache";class Xd{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=yi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lc.Cache}}class Yd{constructor(e){this.key=e}}class Jd{constructor(e){this.key=e}}class pE{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Se(),this.mutatedKeys=Se(),this.eu=pd(e),this.tu=new ci(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Rl,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,p=!1;const _=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,v=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((I,P)=>{const M=i.get(I),Q=ia(this.query,P)?P:null,L=!!M&&this.mutatedKeys.has(M.key),$=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let G=!1;M&&Q?M.data.isEqual(Q.data)?L!==$&&(r.track({type:3,doc:Q}),G=!0):this.su(M,Q)||(r.track({type:2,doc:Q}),G=!0,(_&&this.eu(Q,_)>0||v&&this.eu(Q,v)<0)&&(p=!0)):!M&&Q?(r.track({type:0,doc:Q}),G=!0):M&&!Q&&(r.track({type:1,doc:M}),G=!0,(_||v)&&(p=!0)),G&&(Q?(u=u.add(Q),a=$?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const I=this.query.limitType==="F"?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{tu:u,iu:r,Cs:p,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((I,P)=>(function(Q,L){const $=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:G})}};return $(Q)-$(L)})(I.type,P.type)||this.eu(I.doc,P.doc))),this.ou(r),i=i??!1;const p=t&&!i?this._u():[],_=this.Xa.size===0&&this.current&&!i?1:0,v=_!==this.Za;return this.Za=_,u.length!==0||v?{snapshot:new yi(this.query,e.tu,a,u,e.mutatedKeys,_===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Se(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Jd(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Yd(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Se();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return yi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yc="SyncEngine";class gE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mE{constructor(e){this.key=e,this.hu=!1}}class yE{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Fr((p=>fd(p)),ra),this.Iu=new Map,this.Eu=new Set,this.du=new qe(ce.comparator),this.Au=new Map,this.Ru=new jc,this.Vu={},this.mu=new Map,this.fu=mi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _E(n,e,t=!0){const r=sf(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Zd(r,e,t,!0),i}async function vE(n,e){const t=sf(n);await Zd(t,e,!0,!1)}async function Zd(n,e,t,r){const i=await Uv(n.localStore,en(e)),a=i.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let p;return r&&(p=await EE(n,e,a,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&Bd(n.remoteStore,i),p}async function EE(n,e,t,r,i){n.pu=(P,M,Q)=>(async function($,G,X,le){let pe=G.view.ru(X);pe.Cs&&(pe=await wl($.localStore,G.query,!1).then((({documents:l})=>G.view.ru(l,pe))));const Re=le&&le.targetChanges.get(G.targetId),Be=le&&le.targetMismatches.get(G.targetId)!=null,Me=G.view.applyChanges(pe,$.isPrimaryClient,Re,Be);return Dl($,G.targetId,Me.au),Me.snapshot})(n,P,M,Q);const a=await wl(n.localStore,e,!0),u=new pE(e,a.Qs),p=u.ru(a.documents),_=Fs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),v=u.applyChanges(p,n.isPrimaryClient,_);Dl(n,t,v.au);const I=new gE(e,t,u);return n.Tu.set(e,I),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function TE(n,e,t){const r=_e(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((u=>!ra(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hc(r.remoteStore,i.targetId),hc(r,i.targetId)})).catch(wi)):(hc(r,i.targetId),await cc(r.localStore,i.targetId,!0))}async function wE(n,e){const t=_e(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hc(t.remoteStore,r.targetId))}async function IE(n,e,t){const r=kE(n);try{const i=await(function(u,p){const _=_e(u),v=Oe.now(),I=p.reduce(((Q,L)=>Q.add(L.key)),Se());let P,M;return _.persistence.runTransaction("Locally write mutations","readwrite",(Q=>{let L=bn(),$=Se();return _.Ns.getEntries(Q,I).next((G=>{L=G,L.forEach(((X,le)=>{le.isValidDocument()||($=$.add(X))}))})).next((()=>_.localDocuments.getOverlayedDocuments(Q,L))).next((G=>{P=G;const X=[];for(const le of p){const pe=F_(le,P.get(le.key).overlayedDocument);pe!=null&&X.push(new Ur(le.key,pe,sd(pe.value.mapValue),Tn.exists(!0)))}return _.mutationQueue.addMutationBatch(Q,v,X,p)})).next((G=>{M=G;const X=G.applyToLocalDocumentSet(P,$);return _.documentOverlayCache.saveOverlays(Q,G.batchId,X)}))})).then((()=>({batchId:M.batchId,changes:md(P)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,p,_){let v=u.Vu[u.currentUser.toKey()];v||(v=new qe(be)),v=v.insert(p,_),u.Vu[u.currentUser.toKey()]=v})(r,i.batchId,t),await js(r,i.changes),await la(r.remoteStore)}catch(i){const a=Qc(i,"Failed to persist write");t.reject(a)}}async function ef(n,e){const t=_e(n);try{const r=await Mv(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const u=t.Au.get(a);u&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Pe(u.hu,14607):i.removedDocuments.size>0&&(Pe(u.hu,42227),u.hu=!1))})),await js(t,r,e)}catch(r){await wi(r)}}function xl(n,e,t){const r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,u)=>{const p=u.view.va(e);p.snapshot&&i.push(p.snapshot)})),(function(u,p){const _=_e(u);_.onlineState=p;let v=!1;_.queries.forEach(((I,P)=>{for(const M of P.Sa)M.va(p)&&(v=!0)})),v&&Xc(_)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AE(n,e,t){const r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let u=new qe(ce.comparator);u=u.insert(a,pt.newNoDocument(a,ye.min()));const p=Se().add(a),_=new aa(ye.min(),new Map,new qe(be),u,p);await ef(r,_),r.du=r.du.remove(a),r.Au.delete(e),Jc(r)}else await cc(r.localStore,e,!1).then((()=>hc(r,e,t))).catch(wi)}async function bE(n,e){const t=_e(n),r=e.batch.batchId;try{const i=await Ov(t.localStore,e);nf(t,r,null),tf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await js(t,i)}catch(i){await wi(i)}}async function SE(n,e,t){const r=_e(n);try{const i=await(function(u,p){const _=_e(u);return _.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let I;return _.mutationQueue.lookupMutationBatch(v,p).next((P=>(Pe(P!==null,37113),I=P.keys(),_.mutationQueue.removeMutationBatch(v,P)))).next((()=>_.mutationQueue.performConsistencyCheck(v))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(v,I,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I))).next((()=>_.localDocuments.getDocuments(v,I)))}))})(r.localStore,e);nf(r,e,t),tf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await js(r,i)}catch(i){await wi(i)}}function tf(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function nf(n,e,t){const r=_e(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||rf(n,r)}))}function rf(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Hc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Jc(n))}function Dl(n,e,t){for(const r of t)r instanceof Yd?(n.Ru.addReference(r.key,e),CE(n,r)):r instanceof Jd?(ie(Yc,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||rf(n,r.key)):de(19791,{wu:r})}function CE(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(Yc,"New document in limbo: "+t),n.Eu.add(r),Jc(n))}function Jc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ce(Ne.fromString(e)),r=n.fu.next();n.Au.set(r,new mE(t)),n.du=n.du.insert(t,r),Bd(n.remoteStore,new Xn(en(Oc(t.path)),r,"TargetPurposeLimboResolution",ea.ce))}}async function js(n,e,t){const r=_e(n),i=[],a=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,_)=>{u.push(r.pu(_,e,t).then((v=>{if((v||t)&&r.isPrimaryClient){const I=v?!v.fromCache:t?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,I?"current":"not-current")}if(v){i.push(v);const I=Bc.As(_.targetId,v);a.push(I)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(_,v){const I=_e(_);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>K.forEach(v,(M=>K.forEach(M.Es,(Q=>I.persistence.referenceDelegate.addReference(P,M.targetId,Q))).next((()=>K.forEach(M.ds,(Q=>I.persistence.referenceDelegate.removeReference(P,M.targetId,Q)))))))))}catch(P){if(!Ii(P))throw P;ie($c,"Failed to update sequence numbers: "+P)}for(const P of v){const M=P.targetId;if(!P.fromCache){const Q=I.Ms.get(M),L=Q.snapshotVersion,$=Q.withLastLimboFreeSnapshotVersion(L);I.Ms=I.Ms.insert(M,$)}}})(r.localStore,a))}async function RE(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ie(Yc,"User change. New user:",e.toKey());const r=await Fd(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((p=>{p.forEach((_=>{_.reject(new re(W.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await js(t,r.Ls)}}function PE(n,e){const t=_e(n),r=t.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let i=Se();const a=t.Iu.get(e);if(!a)return i;for(const u of a){const p=t.Tu.get(u);i=i.unionWith(p.view.nu)}return i}}function sf(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AE.bind(null,e),e.Pu.H_=dE.bind(null,e.eventManager),e.Pu.yu=fE.bind(null,e.eventManager),e}function kE(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SE.bind(null,e),e}class Go{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ca(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Vv(this.persistence,new xv,e.initialUser,this.serializer)}Cu(e){return new Ld(qc.mi,this.serializer)}Du(e){return new qv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Go.provider={build:()=>new Go};class xE extends Go{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pe(this.persistence.referenceDelegate instanceof zo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mv(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Ld((r=>zo.mi(r,t)),this.serializer)}}class dc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RE.bind(null,this.syncEngine),await uE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hE})()}createDatastore(e){const t=ca(e.databaseInfo.databaseId),r=(function(a){return new Wv(a)})(e.databaseInfo);return(function(a,u,p,_){return new Xv(a,u,p,_)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,u,p){return new Jv(r,i,a,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>xl(this.syncEngine,t,0)),(function(){return bl.v()?new bl:new Bv})())}createSyncEngine(e,t){return(function(i,a,u,p,_,v,I){const P=new yE(i,a,u,p,_,v);return I&&(P.gu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=_e(t);ie(Mr,"RemoteStore shutting down."),r.Ea.add(5),await Us(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dc.provider={build:()=>new dc};class of{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ar="FirestoreClient";class DE{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=Pc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{ie(ar,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ie(ar,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Qc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ua(n,e){n.asyncQueue.verifyOperationInProgress(),ie(ar,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Fd(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Nl(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NE(n);ie(ar,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Cl(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Cl(e.remoteStore,i))),n._onlineComponents=e}async function NE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(ar,"Using user provided OfflineComponentProvider");try{await Ua(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;di("Error using user provided cache. Falling back to memory cache: "+t),await Ua(n,new Go)}}else ie(ar,"Using default OfflineComponentProvider"),await Ua(n,new xE(void 0));return n._offlineComponents}async function af(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(ar,"Using user provided OnlineComponentProvider"),await Nl(n,n._uninitializedComponentsProvider._online)):(ie(ar,"Using default OnlineComponentProvider"),await Nl(n,new dc))),n._onlineComponents}function VE(n){return af(n).then((e=>e.syncEngine))}async function cf(n){const e=await af(n),t=e.eventManager;return t.onListen=_E.bind(null,e.syncEngine),t.onUnlisten=TE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wE.bind(null,e.syncEngine),t}function OE(n,e,t={}){const r=new En;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,p,_,v){const I=new of({next:M=>{I.Nu(),u.enqueueAndForget((()=>Qd(a,P)));const Q=M.docs.has(p);!Q&&M.fromCache?v.reject(new re(W.UNAVAILABLE,"Failed to get document because the client is offline.")):Q&&M.fromCache&&_&&_.source==="server"?v.reject(new re(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),P=new Xd(Oc(p.path),I,{includeMetadataChanges:!0,qa:!0});return Kd(a,P)})(await cf(n),n.asyncQueue,e,t,r))),r.promise}function ME(n,e,t={}){const r=new En;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,p,_,v){const I=new of({next:M=>{I.Nu(),u.enqueueAndForget((()=>Qd(a,P))),M.fromCache&&_.source==="server"?v.reject(new re(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),P=new Xd(p,I,{includeMetadataChanges:!0,qa:!0});return Kd(a,P)})(await cf(n),n.asyncQueue,e,t,r))),r.promise}function uf(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Vl=new Map;const lf="firestore.googleapis.com",Ol=!0;class Ml{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lf,this.ssl=Ol}else this.host=e.host,this.ssl=e.ssl??Ol;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Md;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pv)throw new re(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uf(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ha{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ml({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ml(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qy;switch(r.type){case"firstParty":return new zy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vl.get(t);r&&(ie("ComponentProvider","Removing Datastore"),Vl.delete(t),r.terminate())})(this),Promise.resolve()}}function LE(n,e,t,r={}){n=Or(n,ha);const i=_i(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;i&&(Yl(`https://${p}`),Jl("Firestore",!0)),a.host!==lf&&a.host!==p&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...a,host:p,ssl:i,emulatorOptions:r};if(!kr(_,u)&&(n._setSettings(_),r.mockUserToken)){let v,I;if(typeof r.mockUserToken=="string")v=r.mockUserToken,I=ft.MOCK_USER;else{v=zf(r.mockUserToken,n._app?.options.projectId);const P=r.mockUserToken.sub||r.mockUserToken.user_id;if(!P)throw new re(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ft(P)}n._authCredentials=new By(new Gh(v,I))}}class bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class Ye{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Os(t,Ye._jsonSchema))return new Ye(e,r||null,new ce(Ne.fromString(t.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:Xe("string",Ye._jsonSchemaVersion),referencePath:Xe("string")};class tr extends bi{constructor(e,t,r){super(e,t,Oc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new ce(e))}withConverter(e){return new tr(this.firestore,e,this._path)}}function fc(n,e,...t){if(n=at(n),Kh("collection","path",e),n instanceof ha){const r=Ne.fromString(e,...t);return Qu(r),new tr(n,null,r)}{if(!(n instanceof Ye||n instanceof tr))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return Qu(r),new tr(n.firestore,null,r)}}function hs(n,e,...t){if(n=at(n),arguments.length===1&&(e=Pc.newId()),Kh("doc","path",e),n instanceof ha){const r=Ne.fromString(e,...t);return Ku(r),new Ye(n,null,new ce(r))}{if(!(n instanceof Ye||n instanceof tr))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return Ku(r),new Ye(n.firestore,n instanceof tr?n.converter:null,new ce(r))}}const Ll="AsyncQueue";class Fl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jd(this,"async_queue_retry"),this._c=()=>{const r=Fa();r&&ie(Ll,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new En;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ii(e))throw e;ie(Ll,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",Ul(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Kc.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&de(47125,{Pc:Ul(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ul(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class da extends ha{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fl,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fl(e),this._firestoreClient=void 0,await e}}}function FE(n,e){const t=typeof n=="object"?n:nh(),r=typeof n=="string"?n:Uo,i=vc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=$f("firestore");a&&LE(i,...a)}return i}function Zc(n){if(n._terminated)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UE(n),n._firestoreClient}function UE(n){const e=n._freezeSettings(),t=(function(i,a,u,p){return new c_(i,a,u,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,uf(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DE(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kt(ct.fromBase64String(e))}catch(t){throw new re(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Os(e,kt._jsonSchema))return kt.fromBase64String(e.bytes)}}kt._jsonSchemaVersion="firestore/bytes/1.0",kt._jsonSchema={type:Xe("string",kt._jsonSchemaVersion),bytes:Xe("string")};class eu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tu{constructor(e){this._methodName=e}}class nn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nn._jsonSchemaVersion}}static fromJSON(e){if(Os(e,nn._jsonSchema))return new nn(e.latitude,e.longitude)}}nn._jsonSchemaVersion="firestore/geoPoint/1.0",nn._jsonSchema={type:Xe("string",nn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};class rn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Os(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new rn(e.vectorValues);throw new re(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:Xe("string",rn._jsonSchemaVersion),vectorValues:Xe("object")};const jE=/^__.*__$/;class qE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ls(e,this.data,t,this.fieldTransforms)}}function hf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:n})}}class nu{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ko(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hf(this.Ac)&&jE.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ca(e)}Cc(e,t,r,i=!1){return new nu({Ac:e,methodName:t,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function df(n){const e=n._freezeSettings(),t=ca(n._databaseId);return new BE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $E(n,e,t,r,i,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);gf("Data must be an object, but it was:",u,r);const p=ff(r,u);let _,v;if(a.merge)_=new Ut(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const P of a.mergeFields){const M=zE(e,P,t);if(!u.contains(M))throw new re(W.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);GE(I,M)||I.push(M)}_=new Ut(I),v=u.fieldTransforms.filter((P=>_.covers(P.field)))}else _=null,v=u.fieldTransforms;return new qE(new Pt(p),_,v)}class ru extends tu{_toFieldTransform(e){return new V_(e.path,new Ss)}isEqual(e){return e instanceof ru}}function HE(n,e,t,r=!1){return iu(t,n.Cc(r?4:3,e))}function iu(n,e){if(pf(n=at(n)))return gf("Unsupported field value:",e,n),ff(n,e);if(n instanceof tu)return(function(r,i){if(!hf(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let u=0;for(const p of r){let _=iu(p,i.wc(u));_==null&&(_={nullValue:"NULL_VALUE"}),a.push(_),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x_(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Oe.fromDate(r);return{timestampValue:Ho(i.serializer,a)}}if(r instanceof Oe){const a=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ho(i.serializer,a)}}if(r instanceof nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kt)return{bytesValue:Pd(i.serializer,r._byteString)};if(r instanceof Ye){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Uc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rn)return(function(u,p){return{mapValue:{fields:{[rd]:{stringValue:id},[jo]:{arrayValue:{values:u.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return Mc(p.serializer,v)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Zo(r)}`)})(n,e)}function ff(n,e){const t={};return Yh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(n,((r,i)=>{const a=iu(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function pf(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof nn||n instanceof kt||n instanceof Ye||n instanceof tu||n instanceof rn)}function gf(n,e,t){if(!pf(t)||!Qh(t)){const r=Zo(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function zE(n,e,t){if((e=at(e))instanceof eu)return e._internalPath;if(typeof e=="string")return mf(n,e);throw Ko("Field path arguments must be of type string or ",n,!1,void 0,t)}const WE=new RegExp("[~\\*/\\[\\]]");function mf(n,e,t){if(e.search(WE)>=0)throw Ko(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new eu(...e.split("."))._internalPath}catch{throw Ko(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ko(n,e,t,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new re(W.INVALID_ARGUMENT,p+n+_)}function GE(n,e){return n.some((t=>t.isEqual(e)))}class yf{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(su("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KE extends yf{data(){return super.data()}}function su(n,e){return typeof e=="string"?mf(n,e):e instanceof eu?e._internalPath:e._delegate._internalPath}function QE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ou{}class XE extends ou{}function pc(n,e,...t){let r=[];e instanceof ou&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((_=>_ instanceof au)).length,p=a.filter((_=>_ instanceof fa)).length;if(u>1||u>0&&p>0)throw new re(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class fa extends XE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fa(e,t,r)}_apply(e){const t=this._parse(e);return _f(e._query,t),new bi(e.firestore,e.converter,nc(e._query,t))}_parse(e){const t=df(e.firestore);return(function(a,u,p,_,v,I,P){let M;if(v.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new re(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){ql(P,I);const L=[];for(const $ of P)L.push(jl(_,a,$));M={arrayValue:{values:L}}}else M=jl(_,a,P)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||ql(P,I),M=HE(p,u,P,I==="in"||I==="not-in");return Qe.create(v,I,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function gc(n,e,t){const r=e,i=su("where",n);return fa._create(i,r,t)}class au extends ou{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new au(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:qt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let u=i;const p=a.getFlattenedFilters();for(const _ of p)_f(u,_),u=nc(u,_)})(e._query,t),new bi(e.firestore,e.converter,nc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jl(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new re(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dd(e)&&t.indexOf("/")!==-1)throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ne.fromString(t));if(!ce.isDocumentKey(r))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rl(n,new ce(r))}if(t instanceof Ye)return rl(n,t._key);throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zo(t)}.`)}function ql(n,e){if(!Array.isArray(n)||n.length===0)throw new re(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _f(n,e){const t=(function(i,a){for(const u of i)for(const p of u.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YE{convertValue(e,t="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Lr(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[jo].arrayValue?.values?.map((r=>We(r.doubleValue)));return new rn(t)}convertGeoPoint(e){return new nn(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=na(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Is(e));default:return null}}convertTimestamp(e){const t=rr(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ne.fromString(e);Pe(Od(r),9688,{name:e});const i=new As(r.get(1),r.get(3)),a=new ce(r.popFirst(5));return i.isEqual(t)||An(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function JE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ds{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pr extends yf{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ro(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(su("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Pr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pr._jsonSchema={type:Xe("string",Pr._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class Ro extends Pr{data(e={}){return super.data(e)}}class ui{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ro(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((p=>{const _=new Ro(i._firestore,i._userDataWriter,p.doc.key,p.doc,new ds(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((p=>a||p.type!==3)).map((p=>{const _=new Ro(i._firestore,i._userDataWriter,p.doc.key,p.doc,new ds(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let v=-1,I=-1;return p.type!==0&&(v=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),I=u.indexOf(p.doc.key)),{type:ZE(p.type),doc:_,oldIndex:v,newIndex:I}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:n})}}function ja(n){n=Or(n,Ye);const e=Or(n.firestore,da);return OE(Zc(e),n._key).then((t=>tT(e,n,t)))}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:Xe("string",ui._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class vf extends YE{constructor(e){super(),this.firestore=e}convertBytes(e){return new kt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,t)}}function mc(n){n=Or(n,bi);const e=Or(n.firestore,da),t=Zc(e),r=new vf(e);return QE(n._query),ME(t,n._query).then((i=>new ui(e,r,n,i)))}function Ef(n,e,t){n=Or(n,Ye);const r=Or(n.firestore,da),i=JE(n.converter,e,t);return eT(r,[$E(df(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Tn.none())])}function eT(n,e){return(function(r,i){const a=new En;return r.asyncQueue.enqueueAndForget((async()=>IE(await VE(r),i,a))),a.promise})(Zc(n),e)}function tT(n,e,t){const r=t.docs.get(e._key),i=new vf(n);return new Pr(n,i,e._key,r,new ds(t.hasPendingWrites,t.fromCache),e.converter)}function Tf(){return new ru("serverTimestamp")}(function(e,t=!0){(function(i){Ti=i})(vi),li(new xr("firestore",((r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),p=new da(new $y(r.getProvider("auth-internal")),new Wy(u,r.getProvider("app-check-internal")),(function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new re(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new As(v.options.projectId,I)})(u,i),u);return a={useFetchStreams:t,...a},p._setSettings(a),p}),"PUBLIC").setMultipleInstances(!0)),Zn(Hu,zu,e),Zn(Hu,zu,"esm2020")})();const nT={apiKey:"AIzaSyBY_knF8M51NlWhlf_nJ_RdTzduvbWFWxI",authDomain:"wiilove.firebaseapp.com",projectId:"wiilove",storageBucket:"wiilove.firebasestorage.app",messagingSenderId:"788669311154",appId:"1:788669311154:web:2d435bf7d6652ff13741ab"},wf=th(nT),vs=Uy(wf),mn=FE(wf),Bl=(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]];let e,t;const r=a=>{const u=Z(a).data("tema");if(!u)return!1;const[p,_]=u.split("|");if(!p||!_)return!1;Z("html").attr("data-theme",p);const v=Z('meta[name="theme-color"]');return v.length?v.attr("content",_):Z("<meta>",{name:"theme-color",content:_}).appendTo("head"),Rr("wiTema",u,720),Z(".mtha").removeClass("mtha"),Z(a).addClass("mtha"),t=u,!0},i=async(a,u)=>{if(!(!a||!u?.displayName||!t))try{await Ef(hs(a,"preferencias",u.displayName),{usuario:u.displayName,email:u.email,wiTema:t,fechaActualizacion:Tf()},{merge:!0});const[p]=t.split("|");gn(`Tema ${p} guardado ð¨`)}catch(p){console.error("â Error guardando tema:",p)}};return(a,u)=>{Z(".witemas").html(n.map(([v,I])=>`<div class="tema" data-tema="${v}|${I}" style="background:${I}"></div>`).join(""));const p=cu("wiTema"),_=Z(`[data-tema="${p}"]`)[0]||Z(".mtha")[0]||Z("[data-tema]").first()[0];_&&r(_),Z(document).off("click.witema").on("click.witema","[data-tema]",v=>{!r(v.currentTarget)||!a||!u?.displayName||(clearTimeout(e),e=setTimeout(()=>i(a,u),50))})}})(),gn=(n,e="success")=>{Z(".alert-box").remove();const t={error:{bg:"#FFE8E6",txt:"#D32F2F",border:"#FFCDD2",icon:"fa-circle-exclamation"},success:{bg:"#E8F5E9",txt:"#2E7D32",border:"#C8E6C9",icon:"fa-circle-check"}},{bg:r,txt:i,border:a,icon:u}=t[e]||t.error,p=Z(`
        <div class="alert-box" style="
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 8px;
            background: ${r};
            color: ${i};
            border-left: 4px solid ${a};
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 300px;
            max-width: 90%;
            
        ">
            <i class="fas ${u}"></i>
            <span>${n}</span>
        </div>
    `).appendTo("body").hide().fadeIn(300);setTimeout(()=>p.fadeOut(300,()=>p.remove()),3e3)};function Rr(n,e,t){try{localStorage.setItem(n,JSON.stringify({value:e,expiry:Date.now()+t*36e5,type:typeof e,isArray:Array.isArray(e)}))}catch(r){console.error("Error savels",r)}}function cu(n){try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return!t||Date.now()>t.expiry?(localStorage.removeItem(n),null):t.value}catch(e){return console.error("Error getls:",e),rT(n),null}}function rT(...n){n.forEach(e=>{e&&typeof e=="string"&&localStorage.removeItem(e)})}function ri(n,e,t="top",r=1800){const i={success:"--success",error:"--error",warning:"--warning",info:"--info"},a=i[t]?t:null,u=a?"top":t;if(Z("#witip-styles").length||Z('<style id="witip-styles">.witip{position:fixed;background:var(--mco);color:var(--txa);z-index:10000;padding:8px 12px;border-radius:4px;font-size:.85rem;max-width:250px;box-shadow:0 2px 8px rgba(0,0,0,.2);opacity:0;transition:opacity .2s;pointer-events:none}.witip::after{content:"";position:absolute;border:6px solid transparent}.witip.show{opacity:1}.witip.top::after{top:100%;left:50%;margin-left:-6px;border-top-color:inherit}.witip.bottom::after{bottom:100%;left:50%;margin-left:-6px;border-bottom-color:inherit}.witip.left::after{left:100%;top:50%;margin-top:-6px;border-left-color:inherit}.witip.right::after{right:100%;top:50%;margin-top:-6px;border-right-color:inherit}.witip.success{background:var(--success);color:#fff}.witip.error{background:var(--error);color:#fff}.witip.warning{background:var(--warning);color:#000}.witip.info{background:var(--info);color:#fff}</style>').appendTo("head"),typeof n=="string"&&(n.includes(",")||n.match(/^[.#a-z]/i)))return Z(n).each((Be,Me)=>ri(Me,e,t,r)),Z(n);const p=Z(n);if(!p.length)return;clearTimeout(p.data("witip-timer")),Z(".witip").remove();const _=p.attr("id")||p.attr("id",`wtip-${Date.now()}-${Math.floor(Math.random()*1e3)}`).attr("id"),v=Z("<div>",{class:`witip ${u} ${a||""}`,"data-for":_,html:e,css:{"border-color":a?`var(${i[a]})`:"var(--mco)"}});a&&v.css("background-color",`var(${i[a]})`),Z("body").append(v);const{left:I,top:P,right:M,bottom:Q,width:L,height:$}=p[0].getBoundingClientRect(),G=v.outerWidth(),X=v.outerHeight(),le={top:{x:I+L/2-G/2,y:P-X-8},bottom:{x:I+L/2-G/2,y:Q+8},left:{x:I-G-8,y:P+$/2-X/2},right:{x:M+8,y:P+$/2-X/2}};let{x:pe,y:Re}=le[u];return pe=Math.max(8,Math.min(pe,window.innerWidth-G-8)),Re=Math.max(8,Math.min(Re,window.innerHeight-X-8)),v.css({left:pe,top:Re}),p.data("witip-timer",setTimeout(()=>{v.addClass("show"),r>0&&setTimeout(()=>{v.removeClass("show"),setTimeout(()=>v.remove(),200)},r)},10)),p}function iT(){const n=`
<div id="loginModal" class="modal authModals">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close-modal">&times;</button>
    </div>
    <div class="modal-body auth-form">
      <div class="auth-logo">
        <img src="./smile.png" alt="Smile Beneficios">
      </div>
      <h2 class="auth-title">Login</h2>
      
      <form id="loginForm" class="dfd">
        <div class="form-group">
          <div class="input-icon">
            <i class="fas fa-envelope"></i>
            <input type="email" id="email" placeholder="Email o usuario" required>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon">
            <i class="fas fa-lock"></i>
            <input type="password" id="password" placeholder="ContraseÃ±a" required>
            <i class="fas fa-eye togglePass"></i>
          </div>
        </div>
        <div class="form-check">
          <input type="checkbox" id="rememberMe">
          <label for="rememberMe">Recordar mis datos</label>
        </div>
        <button type="button" id="Login" class="inactivo btn-auth">Iniciar SesiÃ³n</button>
      </form>
      
      <div class="auth-links">
        <span class="olvidastePass">Â¿Olvidaste tu contraseÃ±a?</span>
        <span class="crearCuenta">Crear cuenta</span>
      </div>
    </div>
  </div>
</div>`,e=`
<div id="registroModal" class="modal authModals">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close-modal">&times;</button>
    </div>
    <div class="modal-body auth-form">
      <div class="auth-logo">
        <img src="./smile.png" alt="Smile Beneficios">
      </div>
      <h2 class="auth-title">Crear Cuenta</h2>
      
      <form id="registroForm" class="dfd">
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-envelope"></i>
            <input type="email" id="regEmail" placeholder="Correo electrÃ³nico" required>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-user"></i>
            <input type="text" id="regUsuario" placeholder="Crear usuario" required>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-user-tie"></i>
            <input type="text" id="regNombre" placeholder="Nombre" required>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-user-tie"></i>
            <input type="text" id="regApellidos" placeholder="Apellidos" required>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-lock"></i>
            <input type="password" id="regPassword" placeholder="ContraseÃ±a" required>
            <i class="fas fa-eye togglePass"></i>
          </div>
        </div>
        <div class="form-group">
          <div class="input-icon"> <i class="fas fa-lock"></i>
            <input type="password" id="regPassword1" placeholder="Confirmar ContraseÃ±a" required>
            <i class="fas fa-eye togglePass"></i>
          </div>
        </div>
        <button type="button" id="Registrar" class="inactivo btn-auth">Registrarme</button>
      </form>
      
      <div class="auth-links">
        <span class="conCuenta">Ya tengo cuenta</span>
      </div>
    </div>
  </div>
</div>`,t=`
<div id="recuperarModal" class="modal authModals">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close-modal">&times;</button>
    </div>
    <div class="modal-body auth-form">
      <div class="auth-logo">
        <img src="./smile.png" alt="Smile Beneficios">
      </div>
      <h2 class="auth-title">Restablecer ContraseÃ±a</h2>
      <form id="recuperarForm" class="dfd">
        <p class="auth-text">Ingresa tu Correo o usuario:</p>
        <div class="form-group">
          <div class="input-icon">
            <i class="fas fa-envelope"></i>
            <input type="email" id="recEmail" placeholder="Correo electrÃ³nico" required>
          </div>
        </div>
        <p class="auth-text">Valida tu fecha de nacimiento:</p>
        <div class="form-group">
          <div class="input-icon">
            <i class="fas fa-cake-candles"></i>
            <input type="date" id="recFechaNacimiento" placeholder="Fecha Nacimiento" class="datepicker" required>
          </div>
        </div>
        <button type="button" id="Recuperar" class="inactivo btn-auth">Restablecer ContraseÃ±a</button>
      </form>
      <div class="auth-links">
        <span class="volverLogin"><i class="fas fa-arrow-left"></i> Volver a Inicio</span>
      </div>
    </div>
  </div>
</div>`;Z(function(){let p="smiles",_="wiAuthIn",v="wiAuthRol",I="smile";Z(document).on("click",".login",()=>i("loginModal")),Z(document).on("click",".registrar",()=>i("registroModal")),Z(".crearCuenta").click(()=>{i("registroModal"),a("loginModal")}),Z(".conCuenta").click(()=>{i("loginModal"),a("registroModal")}),Z(".olvidastePass").click(()=>{i("recuperarModal"),a("loginModal")}),Z(".volverLogin").click(()=>{i("loginModal"),a("recuperarModal")}),Z(".togglePass").click(function(){const L=Z(this).siblings("input"),$=L.attr("type")==="password";L.attr("type",$?"text":"password"),Z(this).toggleClass("fa-eye fa-eye-slash")}),Z('.miauth input:not([type="checkbox"])').on("click",function(){ri(this,Z(this).attr("placeholder"))}),Z("#regUsuario, #regEmail, #email, #recEmail").on("input",function(){Z(this).val(Z(this).val().toLowerCase().trim())}),[["#password","#Login"],["#regPassword1","#Registrar"],["#recEmail","#Recuperar"]].forEach(([L,$])=>{Z(L).on("input keyup",G=>{Z($).removeClass("inactivo"),G.key==="Enter"&&(Z($).click(),Z($).addClass("inactivo"))})});const P={regEmail:[L=>L.toLowerCase(),L=>/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/.test(L)||"Correo invÃ¡lido"],regUsuario:[L=>L.toLowerCase().replace(/[^a-z0-9_]/g,""),L=>L.length>=4||"Usuario 4-20 caracteres"],regNombre:[L=>L.trim(),L=>L.length>0||"Ingrese nombre"],regApellidos:[L=>L.trim(),L=>L.length>0||"Ingrese apellidos"],regPassword:[L=>L,L=>L.length>=6||"MÃ­nimo 6 caracteres"],regPassword1:[L=>L,L=>L===Z("#regPassword").val()||"ContraseÃ±as no coinciden"]};Z.each(P,function(L,[$,G]){Z(`#${L}`).on("blur",function(){const X=$(Z(this).val());Z(this).val(X);const le=G(X);le!==!0&&ri(this,le,"error")})});let M=!1;Z("#regUsuario").on("blur focus",async function(){const L=Z(this).val();if(L.length>=3)try{const G=(await ja(hs(mn,p,L))).exists();M=!G,ri(this,`Usuario ${G?"no disponible":"disponible â"}`,G?"error":"success","top",7e3)}catch($){console.error($)}});let Q=!1;Z("#regEmail").on("blur focus",async function(){const L=Z(this).val();if(L.length>=3)try{const G=!(await mc(pc(fc(mn,p),gc("email","==",L)))).empty;Q=!G,ri(this,`Email ${G?"no disponible":"disponible â"}`,G?"error":"success","top",7e3)}catch($){console.error($)}}),Z("#Registrar").click(async function(){const L=[[M,Z("#regUsuario")[0],"Usuario no disponible"],[Q,Z("#regEmail")[0],"Email no disponible"],...Object.entries(P).map(([$,[G,X]])=>{const le=Z(`#${$}`),pe=G(le.val()),Re=X(pe);return[Re===!0,le[0],Re!==!0?Re:""]})];for(const[$,G,X]of L)if(!$&&X&&(ri(G,X,"error"),G.focus(),!0))return;try{const $=["regEmail","regUsuario","regNombre","regApellidos","regPassword"],[G,X,le,pe,Re]=$.map(l=>Z("#"+l).val().trim()),{user:Be}=await Em(vs,G,Re);await Promise.all([Am(Be,{displayName:X}),wm(Be)]),console.log("Registro completo en Auth â"+Date());const Me=hs(mn,p,X);await Ef(Me,{usuario:X,email:G,nombre:le,apellidos:pe,rol:I,creacion:Tf(),uid:Be.uid}),console.log("Registro completo en Firestore â"+Date()),gn("Registro completado! â")}catch($){gn({"auth/email-already-in-use":"Email ya registrado","auth/weak-password":"ContraseÃ±a muy dÃ©bil"}[$.code]||$.message)||console.error($)}finally{Rr(_,"wIn",24),Rr(v,I,24)}}),Z("#Login").click(async function(){try{const[L,$]=["#email","#password"].map(le=>Z(le).val());let G=null,X=L;if(!L.includes("@"))try{G=await ja(hs(mn,p,L)),X=G.exists()?G.data().email:null}catch(le){console.error("ebdUsuario",le),X=null}await Tm(vs,X,$),Rr(_,"wIn",24),Rr(v,G.data().rol,24),a("loginModal")}catch(L){gn({"auth/invalid-credential":"ContraseÃ±a incorrecta","auth/invalid-email":"Falta registrar Email","auth/missing-email":"Email o usuario no registrado"}[L.code]||L.message,"error"),console.error(L)}}),Z("#Recuperar").click(async function(){try{const[L,$]=["#recEmail","#recFechaNacimiento"].map(pe=>Z(pe).val()),G=L.includes("@")?L:await(async()=>{const pe=await ja(hs(mn,p,L));return pe.exists()?pe.data().email:null})();if(!G)return gn("Usuario no registrado","error");const X=await mc(pc(fc(mn,p),gc("email","==",G)));if(X.empty)return gn("Email incorrecto o no existe","error");if(X.docs[0].data().fechaNacimiento.toDate().toISOString().split("T")[0]!==$)return gn("Fecha de nacimiento incorrecta","error");await vm(vs,G),gn("Se enviÃ³ correo para restablecer su contraseÃ±a, revisa en principal o spam â","success")}catch(L){console.error(L)}})}),Z("body").append(n+e+t);function r(){const p=".modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:100;justify-content:center;align-items:center;backdrop-filter:saturate(120%) blur(2px)}.modal.active{display:flex}@keyframes mfade{from{opacity:0}to{opacity:1}}.modal{animation:mfade .25s ease}body.modal-open{overflow:hidden}.modal-content{background:var(--F);border-radius:1vh;box-shadow:var(--bsh);width:92%;max-width:600px;max-height:90vh;overflow:auto;animation:mpop .22s ease}@keyframes mpop{from{transform:translateY(10px) scale(.98);opacity:.6}to{transform:translateY(0) scale(1);opacity:1}}.authModals .modal-content{max-width:430px;padding:0;border:0;position:relative}.authModals .modal-header{border:0;padding:12px;position:absolute;right:0;z-index:10}.authModals .close-modal{background:0 0;border:0;color:var(--mco);font-size:1.4rem;cursor:pointer;transition:transform .15s,opacity .15s;text-shadow:0 1px 2px rgba(0,0,0,.15)}.authModals .close-modal:hover{transform:scale(1.08);opacity:.95}.auth-form{padding:0 36px 32px;display:flex;flex-direction:column;align-items:center}.auth-logo{width:76px;height:76px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:34px 0 8px;box-shadow:0 6px 18px var(--bxs)}.auth-logo img{width:100%;height:auto}.auth-title{font:700 1.6rem var(--ff_P);color:var(--mco);margin:4px 0 18px;text-align:center}.auth-title span{color:#ffe800}.auth-text{color:var(--tx);font-size:.92rem;margin:12px 0 4px;align-self:flex-start}#loginForm,#registroForm,#recuperarForm{width:100%;display:flex;flex-direction:column;gap:12px}.form-group{width:100%;position:relative}.input-icon{position:relative;display:flex;align-items:center}.input-icon i{position:absolute;left:14px;color:var(--mco);opacity:.75;transition:.25s}.input-icon .togglePass{left:auto;right:12px;cursor:pointer;color:#a8a8a8}.input-icon input{width:100%;padding:13px 38px 13px 42px;border-radius:10px;border:1px solid var(--bdr);background:var(--wb);color:var(--tx);transition:border-color .2s,box-shadow .2s}.input-icon input:focus{border-color:var(--mco);box-shadow:0 0 0 3px var(--bxs);outline:0}.input-icon input::placeholder{color:var(--txe);opacity:.7}.form-check{display:flex;align-items:center;gap:8px;margin:6px 0}.form-check input[type=checkbox]{width:16px;height:16px;accent-color:var(--mco)}.btn-auth{width:100%;padding:13px 14px;background:var(--mco);color:var(--txa);border:0;border-radius:10px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px var(--bxs);transition:transform .15s,box-shadow .15s,background .15s}.btn-auth:hover{background:var(--hva);transform:translateY(-1px)}.inactivo{opacity:.75}.auth-links{width:100%;display:flex;justify-content:space-between;margin-top:12px;flex-wrap:wrap}.auth-links span{color:var(--mco);cursor:pointer;padding:6px 0;font-size:.95rem}.auth-links span:hover{color:var(--hv);text-decoration:underline}#registroModal #registroForm{display:grid;grid-template-columns:1fr 1fr;gap:12px}#registroModal .modal-content{max-width:568px}@media (max-width:576px){.auth-form{padding:0 20px 24px}.auth-title{font-size:1.4rem}.auth-logo{width:70px;height:70px;margin-top:26px}#registroModal #registroForm{display:flex;flex-direction:column}}#recuperarModal *:not(i),#registroModal *:not(i),#loginModal *:not(i){font-family:'Poppins',segoe ui}",_=Z(".wiAuthCss");_.length?_.text(p):Z("head").append(`<style class="wiAuthCss">${p}</style>`)}const i=p=>{const _=Z(`#${p}`).addClass("active");Z("body").addClass("modal-open"),setTimeout(()=>{_.find("input,select,textarea,button").filter(":visible:first").trigger("focus")},20)},a=p=>{Z(`#${p}`).removeClass("active"),Z(".modal.active").length||Z("body").removeClass("modal-open")},u=()=>{const p=()=>{Z(".modal").removeClass("active"),Z("body").removeClass("modal-open")};Z(document).off(".authModals").on("click.authModals",".close-modal",p).on("click.authModals",".modal",_=>{Z(_.target).is(".modal")&&p()}).on("keydown.authModals",_=>{_.key==="Escape"&&p()})};r(),u()}iT();let sT=2024,oT="@wilder.taype",aT="https://wtaype.github.io/",cT="v14";function If(){const n=new Date;return`
<footer class="foo wb txc psa">
  <span>Creado con <i class="fas fa-heart"></i> by <a class="ftx lkme" href="${aT}" target="_blank">${oT}</a> </span>
  <span> ${sT} - <span class="wty">${n.getFullYear()}</span><span>
  <span class="abw"> | Acerca del app ${cT} | actualizado:
  <span class="wtu" id="7209768286404563606">${n.toLocaleString()}</span>
</footer>
  `}Z("style").append(".foo{width:100%;text-align:center;padding-block:1.5vh 1vh;background:var(--wb);border-radius:1vh 1vh 0 0;}.foo *{font-size:var(--fz_s2);margin-inline:.3vh;}.foo a{color:var(--bg2);}.foo i{color:var(--mco);}.abwc{background:var(--bg);top:0;width:99%;height:100%;padding:2vh 2vw;overflow:scroll;line-height:1.80;}.abwok{background:var(--mco);color:var(--txa);}");function uT(){Z(".app").html(`
    <header class="top-header">
      <div class="header-container miwp">
        <div class="header-content">
          <h1><i class="fas fa-heart"></i> WiiLove</h1>
        </div>
        <div class="header-right">
          <div class="witemas"></div>
          <div class="user-section">
            <div class="sesion">
              <span class="registrar">Registrate</span>
            </div>
            <div class="sesion">
              <span class="login">Login</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="miweb miwp">
      <section class="fest_sec">
        <div class="sec_head">
          <h2 class="sec_tit">Elige tu Festividad</h2>
          <p class="sec_sub">Selecciona la ocasiÃ³n especial y personaliza tu mensaje Ãºnico</p>
        </div>

        <div class="fest_grid">
          <!-- Card 1: Flores Amarillas -->
          <div class="fest_card anim_up" data-fest="Girasol">
            <div class="card_head">
              <div class="card_ico">ð»</div>
              <div class="card_tag popular">Popular</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">Flores Amarillas</h3>
              <p class="card_date">21 de Septiembre</p>
              <p class="card_desc">
                Celebra la llegada de la primavera con hermosos mensajes de girasoles y flores amarillas.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-sun"></i>
                  Primaveral
                </span>
                <span class="tag_item">
                  <i class="fas fa-heart"></i>
                  RomÃ¡ntico
                </span>
                <span class="tag_item">
                  <i class="fas fa-music"></i>
                  Con Audio
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>

          <!-- Card 2: CumpleaÃ±os -->
          <div class="fest_card anim_up" data-fest="cumple">
            <div class="card_head">
              <div class="card_ico">ð</div>
              <div class="card_tag especial">Especial</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">CumpleaÃ±os</h3>
              <p class="card_date">Todo el aÃ±o</p>
              <p class="card_desc">
                Felicita de manera especial con tarjetas personalizadas para cumpleaÃ±os Ãºnicos.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-birthday-cake"></i>
                  CelebraciÃ³n
                </span>
                <span class="tag_item">
                  <i class="fas fa-gift"></i>
                  Sorpresa
                </span>
                <span class="tag_item">
                  <i class="fas fa-confetti"></i>
                  Festivo
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>

          <!-- Card 3: DÃ­a del Padre -->
          <div class="fest_card anim_up" data-fest="padre">
            <div class="card_head">
              <div class="card_ico">ð¨âð§âð¦</div>
              <div class="card_tag amor">Familia</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">DÃ­a del Padre</h3>
              <p class="card_date">Tercer domingo de Junio</p>
              <p class="card_desc">
                Honra a papÃ¡ con mensajes emotivos y llenos de cariÃ±o en su dÃ­a especial.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-male"></i>
                  Paternal
                </span>
                <span class="tag_item">
                  <i class="fas fa-heart"></i>
                  Emotivo
                </span>
                <span class="tag_item">
                  <i class="fas fa-family"></i>
                  Familiar
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>

          <!-- Card 4: DÃ­a de la Madre -->
          <div class="fest_card anim_up" data-fest="madre">
            <div class="card_head">
              <div class="card_ico">ð©âð§âð¦</div>
              <div class="card_tag amor">Amor</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">DÃ­a de la Madre</h3>
              <p class="card_date">Segundo domingo de Mayo</p>
              <p class="card_desc">
                Dedica palabras hermosas a mamÃ¡ con tarjetas llenas de amor y gratitud.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-female"></i>
                  Maternal
                </span>
                <span class="tag_item">
                  <i class="fas fa-rose"></i>
                  Tierno
                </span>
                <span class="tag_item">
                  <i class="fas fa-heart"></i>
                  Amoroso
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>

          <!-- Card 5: Navidad -->
          <div class="fest_card anim_up" data-fest="navidad">
            <div class="card_head">
              <div class="card_ico">ð</div>
              <div class="card_tag festivo">Festivo</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">Navidad</h3>
              <p class="card_date">25 de Diciembre</p>
              <p class="card_desc">
                Comparte la magia navideÃ±a con mensajes llenos de paz, amor y alegrÃ­a.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-tree"></i>
                  NavideÃ±o
                </span>
                <span class="tag_item">
                  <i class="fas fa-snowflake"></i>
                  Invernal
                </span>
                <span class="tag_item">
                  <i class="fas fa-gift"></i>
                  MÃ¡gico
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>

          <!-- Card 6: AÃ±o Nuevo -->
          <div class="fest_card anim_up" data-fest="anio">
            <div class="card_head">
              <div class="card_ico">ð</div>
              <div class="card_tag nuevo">Nuevo</div>
            </div>
            <div class="card_cont">
              <h3 class="card_tit">AÃ±o Nuevo</h3>
              <p class="card_date">1 de Enero</p>
              <p class="card_desc">
                Recibe el nuevo aÃ±o con mensajes de esperanza, metas y nuevos comienzos.
              </p>
              <div class="card_tags">
                <span class="tag_item">
                  <i class="fas fa-calendar"></i>
                  RenovaciÃ³n
                </span>
                <span class="tag_item">
                  <i class="fas fa-star"></i>
                  Esperanza
                </span>
                <span class="tag_item">
                  <i class="fas fa-fireworks"></i>
                  CelebraciÃ³n
                </span>
              </div>
            </div>
            <div class="card_foot">
              <button class="btn_pers">
                <i class="fas fa-edit"></i>
                Personalizar Mensaje
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>


    <div id="notifications-container"></div>
    ${If()}
  `)}(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]],e=r=>{const[i,a]=Z(r).data("tema").split("|");Z("html").attr("data-theme",i),Z('meta[name="theme-color"]').length?Z('meta[name="theme-color"]').attr("content",a):Z("<meta>",{name:"theme-color",content:a}).appendTo("head"),Rr("witema",`${i}|${a}`,720),Z(".mtha").removeClass("mtha"),Z(r).addClass("mtha")},t=()=>{Z(".witemas").html(n.map(([a,u])=>`<div class="tema" data-tema="${a}|${u}" style="background:${u}"></div>`).join(""));const r=cu("witema"),i=Z(`[data-tema="${r}"]`)[0]||Z(".mtha")[0]||Z("[data-tema]").first()[0];i&&e(i),Z(document).off("click.witema").on("click.witema","[data-tema]",a=>e(a.currentTarget))};return Z(".witemas").length?t():new MutationObserver(r=>r.some(({addedNodes:i})=>[...i].some(a=>a.querySelector?.(".witemas")))&&(t(),!0)).observe(document.body,{childList:!0,subtree:!0}),{set:e}})();function $l(n){gn(`Bienvenido ${n.nombre}!`),Z(".app").html(`
    <header class="top-header">
      <div class="header-container miwp">
        <div class="header-content">
          <h1><i class="fas fa-trophy"></i> MI DASHBOARD</h1>
        </div>
        <div class="header-right">
          <div class="witemas"></div>
          <div class="user-section">
            <div class="sesion">
              <img src="${n.imagen||"/smile.png"}" alt="${n.nombre}" class="user-avatar">
              <span class="user-name">${n.nombre}</span>
            </div>
            <button class="logout-btn bt_salir">
              <i class="fas fa-sign-out-alt"></i> Salir
            </button>
          </div>
        </div>
      </div>
    </header>

    <main class="main-container miwp">
      <div class="welcome-panel">
        <h2><i class="fas fa-smile"></i> Hola ${n.nombre}!</h2>
      </div>

      <section class="stats-section">
        <div class="stat-card">
          <i class="fas fa-trophy"></i>
          <h3>Mis Logros</h3>
          <p class="stat-value">0</p>
        </div>
      </section>
    </main>

    <div id="notifications-container"></div>
    ${If()}
  `)}function lT(n){Z("body").html(`
    <div class="parati_wrap">
      <div class="parati_cont">
        <div class="parati_ico">ð</div>
        <h1 class="parati_tit">Hola ${n}</h1>
        <p class="parati_sub">Alguien especial tiene un mensaje para ti</p>
        <div class="parati_corazon">
          <i class="fas fa-heart"></i>
        </div>
      </div>
    </div>
  `),Z("style").append(`
    .parati_wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: 'Poppins', sans-serif;
    }

    .parati_cont {
      text-align: center;
      animation: fadeIn 1s ease-out;
    }

    .parati_ico {
      font-size: 8rem;
      animation: float 3s ease-in-out infinite;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
    }

    .parati_tit {
      font-size: clamp(2rem, 5vw, 4rem);
      color: #fff;
      font-weight: 900;
      text-shadow: 0 4px 20px rgba(0,0,0,0.3);
      margin: 2vh 0;
      animation: slideUp 0.8s ease-out 0.2s both;
    }

    .parati_sub {
      font-size: clamp(1rem, 2vw, 1.5rem);
      color: rgba(255,255,255,0.9);
      font-weight: 500;
      animation: slideUp 0.8s ease-out 0.4s both;
    }

    .parati_corazon {
      margin-top: 4vh;
      animation: slideUp 0.8s ease-out 0.6s both;
    }

    .parati_corazon i {
      font-size: 3rem;
      color: #ff3849;
      animation: latido 1.5s ease-in-out infinite;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes latido {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.2); }
      50% { transform: scale(1); }
      75% { transform: scale(1.1); }
    }
  `)}let qa=null;const hT=new URLSearchParams(window.location.search),Hl=hT.get("parati");Hl?lT(Hl):(Cm(vs,async n=>{if(!n)return uT();qa=n;try{const e=cu("wiSmile");if(e)return $l(e),Bl(mn,qa);const r=(await mc(pc(fc(mn,"smiles"),gc("usuario","==",n.displayName)))).docs[0].data();Rr("wiSmile",r,450),$l(r),Bl(mn,qa)}catch(e){console.error(e)}}),Z(document).on("click",".bt_salir",async()=>{await Rm(vs),window.location.href="/";try{localStorage.clear()}catch{Object.keys(localStorage).forEach(e=>localStorage.removeItem(e))}}));
