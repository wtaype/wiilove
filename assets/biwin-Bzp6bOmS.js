(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function wd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mo={exports:{}};var Id=mo.exports,iu;function bd(){return iu||(iu=1,(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:Id,function(e,t){var r=[],i=Object.getPrototypeOf,a=r.slice,u=r.flat?function(s){return r.flat.call(s)}:function(s){return r.concat.apply([],s)},p=r.push,_=r.indexOf,v={},I=v.toString,P=v.hasOwnProperty,L=P.toString,K=L.call(Object),W={},Q=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},J=function(c){return c!=null&&c===c.window},Y=e.document,ve={type:!0,src:!0,nonce:!0,noModule:!0};function Ee(s,c,h){h=h||Y;var d,m,y=h.createElement("script");if(y.text=s,c)for(d in ve)m=c[d]||c.getAttribute&&c.getAttribute(d),m&&y.setAttribute(d,m);h.head.appendChild(y).parentNode.removeChild(y)}function xe(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?v[I.call(s)]||"object":typeof s}var Je="3.7.1",qe=/HTML$/i,l=function(s,c){return new l.fn.init(s,c)};l.fn=l.prototype={jquery:Je,constructor:l,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var c=l.merge(this.constructor(),s);return c.prevObject=this,c},each:function(s){return l.each(this,s)},map:function(s){return this.pushStack(l.map(this,function(c,h){return s.call(c,h,c)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(s,c){return(c+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(s,c){return c%2}))},eq:function(s){var c=this.length,h=+s+(s<0?c:0);return this.pushStack(h>=0&&h<c?[this[h]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:r.sort,splice:r.splice},l.extend=l.fn.extend=function(){var s,c,h,d,m,y,E=arguments[0]||{},R=1,b=arguments.length,D=!1;for(typeof E=="boolean"&&(D=E,E=arguments[R]||{},R++),typeof E!="object"&&!Q(E)&&(E={}),R===b&&(E=this,R--);R<b;R++)if((s=arguments[R])!=null)for(c in s)d=s[c],!(c==="__proto__"||E===d)&&(D&&d&&(l.isPlainObject(d)||(m=Array.isArray(d)))?(h=E[c],m&&!Array.isArray(h)?y=[]:!m&&!l.isPlainObject(h)?y={}:y=h,m=!1,E[c]=l.extend(D,y,d)):d!==void 0&&(E[c]=d));return E},l.extend({expando:"jQuery"+(Je+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var c,h;return!s||I.call(s)!=="[object Object]"?!1:(c=i(s),c?(h=P.call(c,"constructor")&&c.constructor,typeof h=="function"&&L.call(h)===K):!0)},isEmptyObject:function(s){var c;for(c in s)return!1;return!0},globalEval:function(s,c,h){Ee(s,{nonce:c&&c.nonce},h)},each:function(s,c){var h,d=0;if(C(s))for(h=s.length;d<h&&c.call(s[d],d,s[d])!==!1;d++);else for(d in s)if(c.call(s[d],d,s[d])===!1)break;return s},text:function(s){var c,h="",d=0,m=s.nodeType;if(!m)for(;c=s[d++];)h+=l.text(c);return m===1||m===11?s.textContent:m===9?s.documentElement.textContent:m===3||m===4?s.nodeValue:h},makeArray:function(s,c){var h=c||[];return s!=null&&(C(Object(s))?l.merge(h,typeof s=="string"?[s]:s):p.call(h,s)),h},inArray:function(s,c,h){return c==null?-1:_.call(c,s,h)},isXMLDoc:function(s){var c=s&&s.namespaceURI,h=s&&(s.ownerDocument||s).documentElement;return!qe.test(c||h&&h.nodeName||"HTML")},merge:function(s,c){for(var h=+c.length,d=0,m=s.length;d<h;d++)s[m++]=c[d];return s.length=m,s},grep:function(s,c,h){for(var d,m=[],y=0,E=s.length,R=!h;y<E;y++)d=!c(s[y],y),d!==R&&m.push(s[y]);return m},map:function(s,c,h){var d,m,y=0,E=[];if(C(s))for(d=s.length;y<d;y++)m=c(s[y],y,h),m!=null&&E.push(m);else for(y in s)m=c(s[y],y,h),m!=null&&E.push(m);return u(E)},guid:1,support:W}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=r[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,c){v["[object "+c+"]"]=c.toLowerCase()});function C(s){var c=!!s&&"length"in s&&s.length,h=xe(s);return Q(s)||J(s)?!1:h==="array"||c===0||typeof c=="number"&&c>0&&c-1 in s}function S(s,c){return s.nodeName&&s.nodeName.toLowerCase()===c.toLowerCase()}var N=r.pop,x=r.sort,M=r.splice,A="[\\x20\\t\\r\\n\\f]",We=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");l.contains=function(s,c){var h=c&&c.parentNode;return s===h||!!(h&&h.nodeType===1&&(s.contains?s.contains(h):s.compareDocumentPosition&&s.compareDocumentPosition(h)&16))};var un=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ha(s,c){return c?s==="\0"?"ï¿½":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}l.escapeSelector=function(s){return(s+"").replace(un,ha)};var Dt=Y,Cn=p;(function(){var s,c,h,d,m,y=Cn,E,R,b,D,q,B=l.expando,U=0,X=0,oe=so(),Te=so(),ye=so(),Me=so(),o=function(w,k){return w===k&&(m=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",g="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",T="\\["+A+"*("+g+")(?:"+A+"*([*^$|!~]?=)"+A+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+g+"))|)"+A+"*\\]",O=":("+g+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+T+")*)|.*)\\)|)",V=new RegExp(A+"+","g"),G=new RegExp("^"+A+"*,"+A+"*"),de=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),Ue=new RegExp(A+"|>"),_e=new RegExp(O),Fe=new RegExp("^"+g+"$"),$e={ID:new RegExp("^#("+g+")"),CLASS:new RegExp("^\\.("+g+")"),TAG:new RegExp("^("+g+"|[*])"),ATTR:new RegExp("^"+T),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},lt=/^(?:input|select|textarea|button)$/i,it=/^h\d$/i,He=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Bn=/[+~]/,wt=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),mn=function(w,k){var F="0x"+w.slice(1)-65536;return k||(F<0?String.fromCharCode(F+65536):String.fromCharCode(F>>10|55296,F&1023|56320))},gd=function(){$n()},md=ao(function(w){return w.disabled===!0&&S(w,"fieldset")},{dir:"parentNode",next:"legend"});function yd(){try{return E.activeElement}catch{}}try{y.apply(r=a.call(Dt.childNodes),Dt.childNodes),r[Dt.childNodes.length].nodeType}catch{y={apply:function(k,F){Cn.apply(k,a.call(F))},call:function(k){Cn.apply(k,a.call(arguments,1))}}}function Pe(w,k,F,j){var $,Z,te,ae,ne,we,fe,pe=k&&k.ownerDocument,Ie=k?k.nodeType:9;if(F=F||[],typeof w!="string"||!w||Ie!==1&&Ie!==9&&Ie!==11)return F;if(!j&&($n(k),k=k||E,b)){if(Ie!==11&&(ne=He.exec(w)))if($=ne[1]){if(Ie===9)if(te=k.getElementById($)){if(te.id===$)return y.call(F,te),F}else return F;else if(pe&&(te=pe.getElementById($))&&Pe.contains(k,te)&&te.id===$)return y.call(F,te),F}else{if(ne[2])return y.apply(F,k.getElementsByTagName(w)),F;if(($=ne[3])&&k.getElementsByClassName)return y.apply(F,k.getElementsByClassName($)),F}if(!Me[w+" "]&&(!D||!D.test(w))){if(fe=w,pe=k,Ie===1&&(Ue.test(w)||de.test(w))){for(pe=Bn.test(w)&&Ea(k.parentNode)||k,(pe!=k||!W.scope)&&((ae=k.getAttribute("id"))?ae=l.escapeSelector(ae):k.setAttribute("id",ae=B)),we=rs(w),Z=we.length;Z--;)we[Z]=(ae?"#"+ae:":scope")+" "+oo(we[Z]);fe=we.join(",")}try{return y.apply(F,pe.querySelectorAll(fe)),F}catch{Me(w,!0)}finally{ae===B&&k.removeAttribute("id")}}}return ru(w.replace(We,"$1"),k,F,j)}function so(){var w=[];function k(F,j){return w.push(F+" ")>c.cacheLength&&delete k[w.shift()],k[F+" "]=j}return k}function Ft(w){return w[B]=!0,w}function Xr(w){var k=E.createElement("fieldset");try{return!!w(k)}catch{return!1}finally{k.parentNode&&k.parentNode.removeChild(k),k=null}}function _d(w){return function(k){return S(k,"input")&&k.type===w}}function vd(w){return function(k){return(S(k,"input")||S(k,"button"))&&k.type===w}}function tu(w){return function(k){return"form"in k?k.parentNode&&k.disabled===!1?"label"in k?"label"in k.parentNode?k.parentNode.disabled===w:k.disabled===w:k.isDisabled===w||k.isDisabled!==!w&&md(k)===w:k.disabled===w:"label"in k?k.disabled===w:!1}}function Ar(w){return Ft(function(k){return k=+k,Ft(function(F,j){for(var $,Z=w([],F.length,k),te=Z.length;te--;)F[$=Z[te]]&&(F[$]=!(j[$]=F[$]))})})}function Ea(w){return w&&typeof w.getElementsByTagName<"u"&&w}function $n(w){var k,F=w?w.ownerDocument||w:Dt;return F==E||F.nodeType!==9||!F.documentElement||(E=F,R=E.documentElement,b=!l.isXMLDoc(E),q=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&Dt!=E&&(k=E.defaultView)&&k.top!==k&&k.addEventListener("unload",gd),W.getById=Xr(function(j){return R.appendChild(j).id=l.expando,!E.getElementsByName||!E.getElementsByName(l.expando).length}),W.disconnectedMatch=Xr(function(j){return q.call(j,"*")}),W.scope=Xr(function(){return E.querySelectorAll(":scope")}),W.cssHas=Xr(function(){try{return E.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),W.getById?(c.filter.ID=function(j){var $=j.replace(wt,mn);return function(Z){return Z.getAttribute("id")===$}},c.find.ID=function(j,$){if(typeof $.getElementById<"u"&&b){var Z=$.getElementById(j);return Z?[Z]:[]}}):(c.filter.ID=function(j){var $=j.replace(wt,mn);return function(Z){var te=typeof Z.getAttributeNode<"u"&&Z.getAttributeNode("id");return te&&te.value===$}},c.find.ID=function(j,$){if(typeof $.getElementById<"u"&&b){var Z,te,ae,ne=$.getElementById(j);if(ne){if(Z=ne.getAttributeNode("id"),Z&&Z.value===j)return[ne];for(ae=$.getElementsByName(j),te=0;ne=ae[te++];)if(Z=ne.getAttributeNode("id"),Z&&Z.value===j)return[ne]}return[]}}),c.find.TAG=function(j,$){return typeof $.getElementsByTagName<"u"?$.getElementsByTagName(j):$.querySelectorAll(j)},c.find.CLASS=function(j,$){if(typeof $.getElementsByClassName<"u"&&b)return $.getElementsByClassName(j)},D=[],Xr(function(j){var $;R.appendChild(j).innerHTML="<a id='"+B+"' href='' disabled='disabled'></a><select id='"+B+"-\r\\' disabled='disabled'><option selected=''></option></select>",j.querySelectorAll("[selected]").length||D.push("\\["+A+"*(?:value|"+f+")"),j.querySelectorAll("[id~="+B+"-]").length||D.push("~="),j.querySelectorAll("a#"+B+"+*").length||D.push(".#.+[+~]"),j.querySelectorAll(":checked").length||D.push(":checked"),$=E.createElement("input"),$.setAttribute("type","hidden"),j.appendChild($).setAttribute("name","D"),R.appendChild(j).disabled=!0,j.querySelectorAll(":disabled").length!==2&&D.push(":enabled",":disabled"),$=E.createElement("input"),$.setAttribute("name",""),j.appendChild($),j.querySelectorAll("[name='']").length||D.push("\\["+A+"*name"+A+"*="+A+`*(?:''|"")`)}),W.cssHas||D.push(":has"),D=D.length&&new RegExp(D.join("|")),o=function(j,$){if(j===$)return m=!0,0;var Z=!j.compareDocumentPosition-!$.compareDocumentPosition;return Z||(Z=(j.ownerDocument||j)==($.ownerDocument||$)?j.compareDocumentPosition($):1,Z&1||!W.sortDetached&&$.compareDocumentPosition(j)===Z?j===E||j.ownerDocument==Dt&&Pe.contains(Dt,j)?-1:$===E||$.ownerDocument==Dt&&Pe.contains(Dt,$)?1:d?_.call(d,j)-_.call(d,$):0:Z&4?-1:1)}),E}Pe.matches=function(w,k){return Pe(w,null,null,k)},Pe.matchesSelector=function(w,k){if($n(w),b&&!Me[k+" "]&&(!D||!D.test(k)))try{var F=q.call(w,k);if(F||W.disconnectedMatch||w.document&&w.document.nodeType!==11)return F}catch{Me(k,!0)}return Pe(k,E,null,[w]).length>0},Pe.contains=function(w,k){return(w.ownerDocument||w)!=E&&$n(w),l.contains(w,k)},Pe.attr=function(w,k){(w.ownerDocument||w)!=E&&$n(w);var F=c.attrHandle[k.toLowerCase()],j=F&&P.call(c.attrHandle,k.toLowerCase())?F(w,k,!b):void 0;return j!==void 0?j:w.getAttribute(k)},Pe.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},l.uniqueSort=function(w){var k,F=[],j=0,$=0;if(m=!W.sortStable,d=!W.sortStable&&a.call(w,0),x.call(w,o),m){for(;k=w[$++];)k===w[$]&&(j=F.push($));for(;j--;)M.call(w,F[j],1)}return d=null,w},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(a.apply(this)))},c=l.expr={cacheLength:50,createPseudo:Ft,match:$e,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(wt,mn),w[3]=(w[3]||w[4]||w[5]||"").replace(wt,mn),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||Pe.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&Pe.error(w[0]),w},PSEUDO:function(w){var k,F=!w[6]&&w[2];return $e.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":F&&_e.test(F)&&(k=rs(F,!0))&&(k=F.indexOf(")",F.length-k)-F.length)&&(w[0]=w[0].slice(0,k),w[2]=F.slice(0,k)),w.slice(0,3))}},filter:{TAG:function(w){var k=w.replace(wt,mn).toLowerCase();return w==="*"?function(){return!0}:function(F){return S(F,k)}},CLASS:function(w){var k=oe[w+" "];return k||(k=new RegExp("(^|"+A+")"+w+"("+A+"|$)"))&&oe(w,function(F){return k.test(typeof F.className=="string"&&F.className||typeof F.getAttribute<"u"&&F.getAttribute("class")||"")})},ATTR:function(w,k,F){return function(j){var $=Pe.attr(j,w);return $==null?k==="!=":k?($+="",k==="="?$===F:k==="!="?$!==F:k==="^="?F&&$.indexOf(F)===0:k==="*="?F&&$.indexOf(F)>-1:k==="$="?F&&$.slice(-F.length)===F:k==="~="?(" "+$.replace(V," ")+" ").indexOf(F)>-1:k==="|="?$===F||$.slice(0,F.length+1)===F+"-":!1):!0}},CHILD:function(w,k,F,j,$){var Z=w.slice(0,3)!=="nth",te=w.slice(-4)!=="last",ae=k==="of-type";return j===1&&$===0?function(ne){return!!ne.parentNode}:function(ne,we,fe){var pe,Ie,ue,De,_t,ht=Z!==te?"nextSibling":"previousSibling",Rt=ne.parentNode,Yt=ae&&ne.nodeName.toLowerCase(),Yr=!fe&&!ae,yt=!1;if(Rt){if(Z){for(;ht;){for(ue=ne;ue=ue[ht];)if(ae?S(ue,Yt):ue.nodeType===1)return!1;_t=ht=w==="only"&&!_t&&"nextSibling"}return!0}if(_t=[te?Rt.firstChild:Rt.lastChild],te&&Yr){for(Ie=Rt[B]||(Rt[B]={}),pe=Ie[w]||[],De=pe[0]===U&&pe[1],yt=De&&pe[2],ue=De&&Rt.childNodes[De];ue=++De&&ue&&ue[ht]||(yt=De=0)||_t.pop();)if(ue.nodeType===1&&++yt&&ue===ne){Ie[w]=[U,De,yt];break}}else if(Yr&&(Ie=ne[B]||(ne[B]={}),pe=Ie[w]||[],De=pe[0]===U&&pe[1],yt=De),yt===!1)for(;(ue=++De&&ue&&ue[ht]||(yt=De=0)||_t.pop())&&!((ae?S(ue,Yt):ue.nodeType===1)&&++yt&&(Yr&&(Ie=ue[B]||(ue[B]={}),Ie[w]=[U,yt]),ue===ne)););return yt-=$,yt===j||yt%j===0&&yt/j>=0}}},PSEUDO:function(w,k){var F,j=c.pseudos[w]||c.setFilters[w.toLowerCase()]||Pe.error("unsupported pseudo: "+w);return j[B]?j(k):j.length>1?(F=[w,w,"",k],c.setFilters.hasOwnProperty(w.toLowerCase())?Ft(function($,Z){for(var te,ae=j($,k),ne=ae.length;ne--;)te=_.call($,ae[ne]),$[te]=!(Z[te]=ae[ne])}):function($){return j($,0,F)}):j}},pseudos:{not:Ft(function(w){var k=[],F=[],j=ba(w.replace(We,"$1"));return j[B]?Ft(function($,Z,te,ae){for(var ne,we=j($,null,ae,[]),fe=$.length;fe--;)(ne=we[fe])&&($[fe]=!(Z[fe]=ne))}):function($,Z,te){return k[0]=$,j(k,null,te,F),k[0]=null,!F.pop()}}),has:Ft(function(w){return function(k){return Pe(w,k).length>0}}),contains:Ft(function(w){return w=w.replace(wt,mn),function(k){return(k.textContent||l.text(k)).indexOf(w)>-1}}),lang:Ft(function(w){return Fe.test(w||"")||Pe.error("unsupported lang: "+w),w=w.replace(wt,mn).toLowerCase(),function(k){var F;do if(F=b?k.lang:k.getAttribute("xml:lang")||k.getAttribute("lang"))return F=F.toLowerCase(),F===w||F.indexOf(w+"-")===0;while((k=k.parentNode)&&k.nodeType===1);return!1}}),target:function(w){var k=e.location&&e.location.hash;return k&&k.slice(1)===w.id},root:function(w){return w===R},focus:function(w){return w===yd()&&E.hasFocus()&&!!(w.type||w.href||~w.tabIndex)},enabled:tu(!1),disabled:tu(!0),checked:function(w){return S(w,"input")&&!!w.checked||S(w,"option")&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!c.pseudos.empty(w)},header:function(w){return it.test(w.nodeName)},input:function(w){return lt.test(w.nodeName)},button:function(w){return S(w,"input")&&w.type==="button"||S(w,"button")},text:function(w){var k;return S(w,"input")&&w.type==="text"&&((k=w.getAttribute("type"))==null||k.toLowerCase()==="text")},first:Ar(function(){return[0]}),last:Ar(function(w,k){return[k-1]}),eq:Ar(function(w,k,F){return[F<0?F+k:F]}),even:Ar(function(w,k){for(var F=0;F<k;F+=2)w.push(F);return w}),odd:Ar(function(w,k){for(var F=1;F<k;F+=2)w.push(F);return w}),lt:Ar(function(w,k,F){var j;for(F<0?j=F+k:F>k?j=k:j=F;--j>=0;)w.push(j);return w}),gt:Ar(function(w,k,F){for(var j=F<0?F+k:F;++j<k;)w.push(j);return w})}},c.pseudos.nth=c.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[s]=_d(s);for(s in{submit:!0,reset:!0})c.pseudos[s]=vd(s);function nu(){}nu.prototype=c.filters=c.pseudos,c.setFilters=new nu;function rs(w,k){var F,j,$,Z,te,ae,ne,we=Te[w+" "];if(we)return k?0:we.slice(0);for(te=w,ae=[],ne=c.preFilter;te;){(!F||(j=G.exec(te)))&&(j&&(te=te.slice(j[0].length)||te),ae.push($=[])),F=!1,(j=de.exec(te))&&(F=j.shift(),$.push({value:F,type:j[0].replace(We," ")}),te=te.slice(F.length));for(Z in c.filter)(j=$e[Z].exec(te))&&(!ne[Z]||(j=ne[Z](j)))&&(F=j.shift(),$.push({value:F,type:Z,matches:j}),te=te.slice(F.length));if(!F)break}return k?te.length:te?Pe.error(w):Te(w,ae).slice(0)}function oo(w){for(var k=0,F=w.length,j="";k<F;k++)j+=w[k].value;return j}function ao(w,k,F){var j=k.dir,$=k.next,Z=$||j,te=F&&Z==="parentNode",ae=X++;return k.first?function(ne,we,fe){for(;ne=ne[j];)if(ne.nodeType===1||te)return w(ne,we,fe);return!1}:function(ne,we,fe){var pe,Ie,ue=[U,ae];if(fe){for(;ne=ne[j];)if((ne.nodeType===1||te)&&w(ne,we,fe))return!0}else for(;ne=ne[j];)if(ne.nodeType===1||te)if(Ie=ne[B]||(ne[B]={}),$&&S(ne,$))ne=ne[j]||ne;else{if((pe=Ie[Z])&&pe[0]===U&&pe[1]===ae)return ue[2]=pe[2];if(Ie[Z]=ue,ue[2]=w(ne,we,fe))return!0}return!1}}function Ta(w){return w.length>1?function(k,F,j){for(var $=w.length;$--;)if(!w[$](k,F,j))return!1;return!0}:w[0]}function Ed(w,k,F){for(var j=0,$=k.length;j<$;j++)Pe(w,k[j],F);return F}function co(w,k,F,j,$){for(var Z,te=[],ae=0,ne=w.length,we=k!=null;ae<ne;ae++)(Z=w[ae])&&(!F||F(Z,j,$))&&(te.push(Z),we&&k.push(ae));return te}function wa(w,k,F,j,$,Z){return j&&!j[B]&&(j=wa(j)),$&&!$[B]&&($=wa($,Z)),Ft(function(te,ae,ne,we){var fe,pe,Ie,ue,De=[],_t=[],ht=ae.length,Rt=te||Ed(k||"*",ne.nodeType?[ne]:ne,[]),Yt=w&&(te||!k)?co(Rt,De,w,ne,we):Rt;if(F?(ue=$||(te?w:ht||j)?[]:ae,F(Yt,ue,ne,we)):ue=Yt,j)for(fe=co(ue,_t),j(fe,[],ne,we),pe=fe.length;pe--;)(Ie=fe[pe])&&(ue[_t[pe]]=!(Yt[_t[pe]]=Ie));if(te){if($||w){if($){for(fe=[],pe=ue.length;pe--;)(Ie=ue[pe])&&fe.push(Yt[pe]=Ie);$(null,ue=[],fe,we)}for(pe=ue.length;pe--;)(Ie=ue[pe])&&(fe=$?_.call(te,Ie):De[pe])>-1&&(te[fe]=!(ae[fe]=Ie))}}else ue=co(ue===ae?ue.splice(ht,ue.length):ue),$?$(null,ae,ue,we):y.apply(ae,ue)})}function Ia(w){for(var k,F,j,$=w.length,Z=c.relative[w[0].type],te=Z||c.relative[" "],ae=Z?1:0,ne=ao(function(pe){return pe===k},te,!0),we=ao(function(pe){return _.call(k,pe)>-1},te,!0),fe=[function(pe,Ie,ue){var De=!Z&&(ue||Ie!=h)||((k=Ie).nodeType?ne(pe,Ie,ue):we(pe,Ie,ue));return k=null,De}];ae<$;ae++)if(F=c.relative[w[ae].type])fe=[ao(Ta(fe),F)];else{if(F=c.filter[w[ae].type].apply(null,w[ae].matches),F[B]){for(j=++ae;j<$&&!c.relative[w[j].type];j++);return wa(ae>1&&Ta(fe),ae>1&&oo(w.slice(0,ae-1).concat({value:w[ae-2].type===" "?"*":""})).replace(We,"$1"),F,ae<j&&Ia(w.slice(ae,j)),j<$&&Ia(w=w.slice(j)),j<$&&oo(w))}fe.push(F)}return Ta(fe)}function Td(w,k){var F=k.length>0,j=w.length>0,$=function(Z,te,ae,ne,we){var fe,pe,Ie,ue=0,De="0",_t=Z&&[],ht=[],Rt=h,Yt=Z||j&&c.find.TAG("*",we),Yr=U+=Rt==null?1:Math.random()||.1,yt=Yt.length;for(we&&(h=te==E||te||we);De!==yt&&(fe=Yt[De])!=null;De++){if(j&&fe){for(pe=0,!te&&fe.ownerDocument!=E&&($n(fe),ae=!b);Ie=w[pe++];)if(Ie(fe,te||E,ae)){y.call(ne,fe);break}we&&(U=Yr)}F&&((fe=!Ie&&fe)&&ue--,Z&&_t.push(fe))}if(ue+=De,F&&De!==ue){for(pe=0;Ie=k[pe++];)Ie(_t,ht,te,ae);if(Z){if(ue>0)for(;De--;)_t[De]||ht[De]||(ht[De]=N.call(ne));ht=co(ht)}y.apply(ne,ht),we&&!Z&&ht.length>0&&ue+k.length>1&&l.uniqueSort(ne)}return we&&(U=Yr,h=Rt),_t};return F?Ft($):$}function ba(w,k){var F,j=[],$=[],Z=ye[w+" "];if(!Z){for(k||(k=rs(w)),F=k.length;F--;)Z=Ia(k[F]),Z[B]?j.push(Z):$.push(Z);Z=ye(w,Td($,j)),Z.selector=w}return Z}function ru(w,k,F,j){var $,Z,te,ae,ne,we=typeof w=="function"&&w,fe=!j&&rs(w=we.selector||w);if(F=F||[],fe.length===1){if(Z=fe[0]=fe[0].slice(0),Z.length>2&&(te=Z[0]).type==="ID"&&k.nodeType===9&&b&&c.relative[Z[1].type]){if(k=(c.find.ID(te.matches[0].replace(wt,mn),k)||[])[0],k)we&&(k=k.parentNode);else return F;w=w.slice(Z.shift().value.length)}for($=$e.needsContext.test(w)?0:Z.length;$--&&(te=Z[$],!c.relative[ae=te.type]);)if((ne=c.find[ae])&&(j=ne(te.matches[0].replace(wt,mn),Bn.test(Z[0].type)&&Ea(k.parentNode)||k))){if(Z.splice($,1),w=j.length&&oo(Z),!w)return y.apply(F,j),F;break}}return(we||ba(w,fe))(j,k,!b,F,!k||Bn.test(w)&&Ea(k.parentNode)||k),F}W.sortStable=B.split("").sort(o).join("")===B,$n(),W.sortDetached=Xr(function(w){return w.compareDocumentPosition(E.createElement("fieldset"))&1}),l.find=Pe,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,Pe.compile=ba,Pe.select=ru,Pe.setDocument=$n,Pe.tokenize=rs,Pe.escape=l.escapeSelector,Pe.getText=l.text,Pe.isXML=l.isXMLDoc,Pe.selectors=l.expr,Pe.support=l.support,Pe.uniqueSort=l.uniqueSort})();var Nt=function(s,c,h){for(var d=[],m=h!==void 0;(s=s[c])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&l(s).is(h))break;d.push(s)}return d},Us=function(s,c){for(var h=[];s;s=s.nextSibling)s.nodeType===1&&s!==c&&h.push(s);return h},bi=l.expr.match.needsContext,Ai=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function jr(s,c,h){return Q(c)?l.grep(s,function(d,m){return!!c.call(d,m,d)!==h}):c.nodeType?l.grep(s,function(d){return d===c!==h}):typeof c!="string"?l.grep(s,function(d){return _.call(c,d)>-1!==h}):l.filter(c,s,h)}l.filter=function(s,c,h){var d=c[0];return h&&(s=":not("+s+")"),c.length===1&&d.nodeType===1?l.find.matchesSelector(d,s)?[d]:[]:l.find.matches(s,l.grep(c,function(m){return m.nodeType===1}))},l.fn.extend({find:function(s){var c,h,d=this.length,m=this;if(typeof s!="string")return this.pushStack(l(s).filter(function(){for(c=0;c<d;c++)if(l.contains(m[c],this))return!0}));for(h=this.pushStack([]),c=0;c<d;c++)l.find(s,m[c],h);return d>1?l.uniqueSort(h):h},filter:function(s){return this.pushStack(jr(this,s||[],!1))},not:function(s){return this.pushStack(jr(this,s||[],!0))},is:function(s){return!!jr(this,typeof s=="string"&&bi.test(s)?l(s):s||[],!1).length}});var ur,Si=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ci=l.fn.init=function(s,c,h){var d,m;if(!s)return this;if(h=h||ur,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?d=[null,s,null]:d=Si.exec(s),d&&(d[1]||!c))if(d[1]){if(c=c instanceof l?c[0]:c,l.merge(this,l.parseHTML(d[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),Ai.test(d[1])&&l.isPlainObject(c))for(d in c)Q(this[d])?this[d](c[d]):this.attr(d,c[d]);return this}else return m=Y.getElementById(d[2]),m&&(this[0]=m,this.length=1),this;else return!c||c.jquery?(c||h).find(s):this.constructor(c).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(Q(s))return h.ready!==void 0?h.ready(s):s(l)}return l.makeArray(s,this)};Ci.prototype=l.fn,ur=l(Y);var Ri=/^(?:parents|prev(?:Until|All))/,Pi={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(s){var c=l(s,this),h=c.length;return this.filter(function(){for(var d=0;d<h;d++)if(l.contains(this,c[d]))return!0})},closest:function(s,c){var h,d=0,m=this.length,y=[],E=typeof s!="string"&&l(s);if(!bi.test(s)){for(;d<m;d++)for(h=this[d];h&&h!==c;h=h.parentNode)if(h.nodeType<11&&(E?E.index(h)>-1:h.nodeType===1&&l.find.matchesSelector(h,s))){y.push(h);break}}return this.pushStack(y.length>1?l.uniqueSort(y):y)},index:function(s){return s?typeof s=="string"?_.call(l(s),this[0]):_.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,c){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(s,c))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function ki(s,c){for(;(s=s[c])&&s.nodeType!==1;);return s}l.each({parent:function(s){var c=s.parentNode;return c&&c.nodeType!==11?c:null},parents:function(s){return Nt(s,"parentNode")},parentsUntil:function(s,c,h){return Nt(s,"parentNode",h)},next:function(s){return ki(s,"nextSibling")},prev:function(s){return ki(s,"previousSibling")},nextAll:function(s){return Nt(s,"nextSibling")},prevAll:function(s){return Nt(s,"previousSibling")},nextUntil:function(s,c,h){return Nt(s,"nextSibling",h)},prevUntil:function(s,c,h){return Nt(s,"previousSibling",h)},siblings:function(s){return Us((s.parentNode||{}).firstChild,s)},children:function(s){return Us(s.firstChild)},contents:function(s){return s.contentDocument!=null&&i(s.contentDocument)?s.contentDocument:(S(s,"template")&&(s=s.content||s),l.merge([],s.childNodes))}},function(s,c){l.fn[s]=function(h,d){var m=l.map(this,c,h);return s.slice(-5)!=="Until"&&(d=h),d&&typeof d=="string"&&(m=l.filter(d,m)),this.length>1&&(Pi[s]||l.uniqueSort(m),Ri.test(s)&&m.reverse()),this.pushStack(m)}});var bt=/[^\x20\t\r\n\f]+/g;function fa(s){var c={};return l.each(s.match(bt)||[],function(h,d){c[d]=!0}),c}l.Callbacks=function(s){s=typeof s=="string"?fa(s):l.extend({},s);var c,h,d,m,y=[],E=[],R=-1,b=function(){for(m=m||s.once,d=c=!0;E.length;R=-1)for(h=E.shift();++R<y.length;)y[R].apply(h[0],h[1])===!1&&s.stopOnFalse&&(R=y.length,h=!1);s.memory||(h=!1),c=!1,m&&(h?y=[]:y="")},D={add:function(){return y&&(h&&!c&&(R=y.length-1,E.push(h)),(function q(B){l.each(B,function(U,X){Q(X)?(!s.unique||!D.has(X))&&y.push(X):X&&X.length&&xe(X)!=="string"&&q(X)})})(arguments),h&&!c&&b()),this},remove:function(){return l.each(arguments,function(q,B){for(var U;(U=l.inArray(B,y,U))>-1;)y.splice(U,1),U<=R&&R--}),this},has:function(q){return q?l.inArray(q,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return m=E=[],y=h="",this},disabled:function(){return!y},lock:function(){return m=E=[],!h&&!c&&(y=h=""),this},locked:function(){return!!m},fireWith:function(q,B){return m||(B=B||[],B=[q,B.slice?B.slice():B],E.push(B),c||b()),this},fire:function(){return D.fireWith(this,arguments),this},fired:function(){return!!d}};return D};function ln(s){return s}function Rn(s){throw s}function xi(s,c,h,d){var m;try{s&&Q(m=s.promise)?m.call(s).done(c).fail(h):s&&Q(m=s.then)?m.call(s,c,h):c.apply(void 0,[s].slice(d))}catch(y){h.apply(void 0,[y])}}l.extend({Deferred:function(s){var c=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],h="pending",d={state:function(){return h},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return d.then(null,y)},pipe:function(){var y=arguments;return l.Deferred(function(E){l.each(c,function(R,b){var D=Q(y[b[4]])&&y[b[4]];m[b[1]](function(){var q=D&&D.apply(this,arguments);q&&Q(q.promise)?q.promise().progress(E.notify).done(E.resolve).fail(E.reject):E[b[0]+"With"](this,D?[q]:arguments)})}),y=null}).promise()},then:function(y,E,R){var b=0;function D(q,B,U,X){return function(){var oe=this,Te=arguments,ye=function(){var o,f;if(!(q<b)){if(o=U.apply(oe,Te),o===B.promise())throw new TypeError("Thenable self-resolution");f=o&&(typeof o=="object"||typeof o=="function")&&o.then,Q(f)?X?f.call(o,D(b,B,ln,X),D(b,B,Rn,X)):(b++,f.call(o,D(b,B,ln,X),D(b,B,Rn,X),D(b,B,ln,B.notifyWith))):(U!==ln&&(oe=void 0,Te=[o]),(X||B.resolveWith)(oe,Te))}},Me=X?ye:function(){try{ye()}catch(o){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(o,Me.error),q+1>=b&&(U!==Rn&&(oe=void 0,Te=[o]),B.rejectWith(oe,Te))}};q?Me():(l.Deferred.getErrorHook?Me.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(Me.error=l.Deferred.getStackHook()),e.setTimeout(Me))}}return l.Deferred(function(q){c[0][3].add(D(0,q,Q(R)?R:ln,q.notifyWith)),c[1][3].add(D(0,q,Q(y)?y:ln)),c[2][3].add(D(0,q,Q(E)?E:Rn))}).promise()},promise:function(y){return y!=null?l.extend(y,d):d}},m={};return l.each(c,function(y,E){var R=E[2],b=E[5];d[E[1]]=R.add,b&&R.add(function(){h=b},c[3-y][2].disable,c[3-y][3].disable,c[0][2].lock,c[0][3].lock),R.add(E[3].fire),m[E[0]]=function(){return m[E[0]+"With"](this===m?void 0:this,arguments),this},m[E[0]+"With"]=R.fireWith}),d.promise(m),s&&s.call(m,m),m},when:function(s){var c=arguments.length,h=c,d=Array(h),m=a.call(arguments),y=l.Deferred(),E=function(R){return function(b){d[R]=this,m[R]=arguments.length>1?a.call(arguments):b,--c||y.resolveWith(d,m)}};if(c<=1&&(xi(s,y.done(E(h)).resolve,y.reject,!c),y.state()==="pending"||Q(m[h]&&m[h].then)))return y.then();for(;h--;)xi(m[h],E(h),y.reject);return y.promise()}});var da=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(s,c){e.console&&e.console.warn&&s&&da.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,c)},l.readyException=function(s){e.setTimeout(function(){throw s})};var lr=l.Deferred();l.fn.ready=function(s){return lr.then(s).catch(function(c){l.readyException(c)}),this},l.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(s!==!0&&--l.readyWait>0)&&lr.resolveWith(Y,[l]))}}),l.ready.then=lr.then;function Pn(){Y.removeEventListener("DOMContentLoaded",Pn),e.removeEventListener("load",Pn),l.ready()}Y.readyState==="complete"||Y.readyState!=="loading"&&!Y.documentElement.doScroll?e.setTimeout(l.ready):(Y.addEventListener("DOMContentLoaded",Pn),e.addEventListener("load",Pn));var At=function(s,c,h,d,m,y,E){var R=0,b=s.length,D=h==null;if(xe(h)==="object"){m=!0;for(R in h)At(s,c,R,h[R],!0,y,E)}else if(d!==void 0&&(m=!0,Q(d)||(E=!0),D&&(E?(c.call(s,d),c=null):(D=c,c=function(q,B,U){return D.call(l(q),U)})),c))for(;R<b;R++)c(s[R],h,E?d:d.call(s[R],R,c(s[R],h)));return m?s:D?c.call(s):b?c(s[0],h):y},Ze=/^-ms-/,nt=/-([a-z])/g;function qr(s,c){return c.toUpperCase()}function St(s){return s.replace(Ze,"ms-").replace(nt,qr)}var kn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function hr(){this.expando=l.expando+hr.uid++}hr.uid=1,hr.prototype={cache:function(s){var c=s[this.expando];return c||(c={},kn(s)&&(s.nodeType?s[this.expando]=c:Object.defineProperty(s,this.expando,{value:c,configurable:!0}))),c},set:function(s,c,h){var d,m=this.cache(s);if(typeof c=="string")m[St(c)]=h;else for(d in c)m[St(d)]=c[d];return m},get:function(s,c){return c===void 0?this.cache(s):s[this.expando]&&s[this.expando][St(c)]},access:function(s,c,h){return c===void 0||c&&typeof c=="string"&&h===void 0?this.get(s,c):(this.set(s,c,h),h!==void 0?h:c)},remove:function(s,c){var h,d=s[this.expando];if(d!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(St):(c=St(c),c=c in d?[c]:c.match(bt)||[]),h=c.length;h--;)delete d[c[h]];(c===void 0||l.isEmptyObject(d))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var c=s[this.expando];return c!==void 0&&!l.isEmptyObject(c)}};var ie=new hr,rt=new hr,js=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Di=/[A-Z]/g;function pa(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:js.test(s)?JSON.parse(s):s}function qs(s,c,h){var d;if(h===void 0&&s.nodeType===1)if(d="data-"+c.replace(Di,"-$&").toLowerCase(),h=s.getAttribute(d),typeof h=="string"){try{h=pa(h)}catch{}rt.set(s,c,h)}else h=void 0;return h}l.extend({hasData:function(s){return rt.hasData(s)||ie.hasData(s)},data:function(s,c,h){return rt.access(s,c,h)},removeData:function(s,c){rt.remove(s,c)},_data:function(s,c,h){return ie.access(s,c,h)},_removeData:function(s,c){ie.remove(s,c)}}),l.fn.extend({data:function(s,c){var h,d,m,y=this[0],E=y&&y.attributes;if(s===void 0){if(this.length&&(m=rt.get(y),y.nodeType===1&&!ie.get(y,"hasDataAttrs"))){for(h=E.length;h--;)E[h]&&(d=E[h].name,d.indexOf("data-")===0&&(d=St(d.slice(5)),qs(y,d,m[d])));ie.set(y,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){rt.set(this,s)}):At(this,function(R){var b;if(y&&R===void 0)return b=rt.get(y,s),b!==void 0||(b=qs(y,s),b!==void 0)?b:void 0;this.each(function(){rt.set(this,s,R)})},null,c,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){rt.remove(this,s)})}}),l.extend({queue:function(s,c,h){var d;if(s)return c=(c||"fx")+"queue",d=ie.get(s,c),h&&(!d||Array.isArray(h)?d=ie.access(s,c,l.makeArray(h)):d.push(h)),d||[]},dequeue:function(s,c){c=c||"fx";var h=l.queue(s,c),d=h.length,m=h.shift(),y=l._queueHooks(s,c),E=function(){l.dequeue(s,c)};m==="inprogress"&&(m=h.shift(),d--),m&&(c==="fx"&&h.unshift("inprogress"),delete y.stop,m.call(s,E,y)),!d&&y&&y.empty.fire()},_queueHooks:function(s,c){var h=c+"queueHooks";return ie.get(s,h)||ie.access(s,h,{empty:l.Callbacks("once memory").add(function(){ie.remove(s,[c+"queue",h])})})}}),l.fn.extend({queue:function(s,c){var h=2;return typeof s!="string"&&(c=s,s="fx",h--),arguments.length<h?l.queue(this[0],s):c===void 0?this:this.each(function(){var d=l.queue(this,s,c);l._queueHooks(this,s),s==="fx"&&d[0]!=="inprogress"&&l.dequeue(this,s)})},dequeue:function(s){return this.each(function(){l.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,c){var h,d=1,m=l.Deferred(),y=this,E=this.length,R=function(){--d||m.resolveWith(y,[y])};for(typeof s!="string"&&(c=s,s=void 0),s=s||"fx";E--;)h=ie.get(y[E],s+"queueHooks"),h&&h.empty&&(d++,h.empty.add(R));return R(),m.promise(c)}});var Ni=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xn=new RegExp("^(?:([+-])=|)("+Ni+")([a-z%]*)$","i"),mt=["Top","Right","Bottom","Left"],Vt=Y.documentElement,$t=function(s){return l.contains(s.ownerDocument,s)},hn={composed:!0};Vt.getRootNode&&($t=function(s){return l.contains(s.ownerDocument,s)||s.getRootNode(hn)===s.ownerDocument});var fr=function(s,c){return s=c||s,s.style.display==="none"||s.style.display===""&&$t(s)&&l.css(s,"display")==="none"};function dr(s,c,h,d){var m,y,E=20,R=d?function(){return d.cur()}:function(){return l.css(s,c,"")},b=R(),D=h&&h[3]||(l.cssNumber[c]?"":"px"),q=s.nodeType&&(l.cssNumber[c]||D!=="px"&&+b)&&xn.exec(l.css(s,c));if(q&&q[3]!==D){for(b=b/2,D=D||q[3],q=+b||1;E--;)l.style(s,c,q+D),(1-y)*(1-(y=R()/b||.5))<=0&&(E=0),q=q/y;q=q*2,l.style(s,c,q+D),h=h||[]}return h&&(q=+q||+b||0,m=h[1]?q+(h[1]+1)*h[2]:+h[2],d&&(d.unit=D,d.start=q,d.end=m)),m}var Vi={};function pr(s){var c,h=s.ownerDocument,d=s.nodeName,m=Vi[d];return m||(c=h.body.appendChild(h.createElement(d)),m=l.css(c,"display"),c.parentNode.removeChild(c),m==="none"&&(m="block"),Vi[d]=m,m)}function fn(s,c){for(var h,d,m=[],y=0,E=s.length;y<E;y++)d=s[y],d.style&&(h=d.style.display,c?(h==="none"&&(m[y]=ie.get(d,"display")||null,m[y]||(d.style.display="")),d.style.display===""&&fr(d)&&(m[y]=pr(d))):h!=="none"&&(m[y]="none",ie.set(d,"display",h)));for(y=0;y<E;y++)m[y]!=null&&(s[y].style.display=m[y]);return s}l.fn.extend({show:function(){return fn(this,!0)},hide:function(){return fn(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){fr(this)?l(this).show():l(this).hide()})}});var Be=/^(?:checkbox|radio)$/i,Oi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Dn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=Y.createDocumentFragment(),c=s.appendChild(Y.createElement("div")),h=Y.createElement("input");h.setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),c.appendChild(h),W.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",W.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",W.option=!!c.lastChild})();var et={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};et.tbody=et.tfoot=et.colgroup=et.caption=et.thead,et.th=et.td,W.option||(et.optgroup=et.option=[1,"<select multiple='multiple'>","</select>"]);function ut(s,c){var h;return typeof s.getElementsByTagName<"u"?h=s.getElementsByTagName(c||"*"):typeof s.querySelectorAll<"u"?h=s.querySelectorAll(c||"*"):h=[],c===void 0||c&&S(s,c)?l.merge([s],h):h}function Li(s,c){for(var h=0,d=s.length;h<d;h++)ie.set(s[h],"globalEval",!c||ie.get(c[h],"globalEval"))}var Nn=/<|&#?\w+;/;function Bs(s,c,h,d,m){for(var y,E,R,b,D,q,B=c.createDocumentFragment(),U=[],X=0,oe=s.length;X<oe;X++)if(y=s[X],y||y===0)if(xe(y)==="object")l.merge(U,y.nodeType?[y]:y);else if(!Nn.test(y))U.push(c.createTextNode(y));else{for(E=E||B.appendChild(c.createElement("div")),R=(Oi.exec(y)||["",""])[1].toLowerCase(),b=et[R]||et._default,E.innerHTML=b[1]+l.htmlPrefilter(y)+b[2],q=b[0];q--;)E=E.lastChild;l.merge(U,E.childNodes),E=B.firstChild,E.textContent=""}for(B.textContent="",X=0;y=U[X++];){if(d&&l.inArray(y,d)>-1){m&&m.push(y);continue}if(D=$t(y),E=ut(B.appendChild(y),"script"),D&&Li(E),h)for(q=0;y=E[q++];)Dn.test(y.type||"")&&h.push(y)}return B}var $s=/^([^.]*)(?:\.(.+)|)/;function Ot(){return!0}function dn(){return!1}function Br(s,c,h,d,m,y){var E,R;if(typeof c=="object"){typeof h!="string"&&(d=d||h,h=void 0);for(R in c)Br(s,R,h,d,c[R],y);return s}if(d==null&&m==null?(m=h,d=h=void 0):m==null&&(typeof h=="string"?(m=d,d=void 0):(m=d,d=h,h=void 0)),m===!1)m=dn;else if(!m)return s;return y===1&&(E=m,m=function(b){return l().off(b),E.apply(this,arguments)},m.guid=E.guid||(E.guid=l.guid++)),s.each(function(){l.event.add(this,c,m,d,h)})}l.event={global:{},add:function(s,c,h,d,m){var y,E,R,b,D,q,B,U,X,oe,Te,ye=ie.get(s);if(kn(s))for(h.handler&&(y=h,h=y.handler,m=y.selector),m&&l.find.matchesSelector(Vt,m),h.guid||(h.guid=l.guid++),(b=ye.events)||(b=ye.events=Object.create(null)),(E=ye.handle)||(E=ye.handle=function(Me){return typeof l<"u"&&l.event.triggered!==Me.type?l.event.dispatch.apply(s,arguments):void 0}),c=(c||"").match(bt)||[""],D=c.length;D--;)R=$s.exec(c[D])||[],X=Te=R[1],oe=(R[2]||"").split(".").sort(),X&&(B=l.event.special[X]||{},X=(m?B.delegateType:B.bindType)||X,B=l.event.special[X]||{},q=l.extend({type:X,origType:Te,data:d,handler:h,guid:h.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:oe.join(".")},y),(U=b[X])||(U=b[X]=[],U.delegateCount=0,(!B.setup||B.setup.call(s,d,oe,E)===!1)&&s.addEventListener&&s.addEventListener(X,E)),B.add&&(B.add.call(s,q),q.handler.guid||(q.handler.guid=h.guid)),m?U.splice(U.delegateCount++,0,q):U.push(q),l.event.global[X]=!0)},remove:function(s,c,h,d,m){var y,E,R,b,D,q,B,U,X,oe,Te,ye=ie.hasData(s)&&ie.get(s);if(!(!ye||!(b=ye.events))){for(c=(c||"").match(bt)||[""],D=c.length;D--;){if(R=$s.exec(c[D])||[],X=Te=R[1],oe=(R[2]||"").split(".").sort(),!X){for(X in b)l.event.remove(s,X+c[D],h,d,!0);continue}for(B=l.event.special[X]||{},X=(d?B.delegateType:B.bindType)||X,U=b[X]||[],R=R[2]&&new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"),E=y=U.length;y--;)q=U[y],(m||Te===q.origType)&&(!h||h.guid===q.guid)&&(!R||R.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(U.splice(y,1),q.selector&&U.delegateCount--,B.remove&&B.remove.call(s,q));E&&!U.length&&((!B.teardown||B.teardown.call(s,oe,ye.handle)===!1)&&l.removeEvent(s,X,ye.handle),delete b[X])}l.isEmptyObject(b)&&ie.remove(s,"handle events")}},dispatch:function(s){var c,h,d,m,y,E,R=new Array(arguments.length),b=l.event.fix(s),D=(ie.get(this,"events")||Object.create(null))[b.type]||[],q=l.event.special[b.type]||{};for(R[0]=b,c=1;c<arguments.length;c++)R[c]=arguments[c];if(b.delegateTarget=this,!(q.preDispatch&&q.preDispatch.call(this,b)===!1)){for(E=l.event.handlers.call(this,b,D),c=0;(m=E[c++])&&!b.isPropagationStopped();)for(b.currentTarget=m.elem,h=0;(y=m.handlers[h++])&&!b.isImmediatePropagationStopped();)(!b.rnamespace||y.namespace===!1||b.rnamespace.test(y.namespace))&&(b.handleObj=y,b.data=y.data,d=((l.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,R),d!==void 0&&(b.result=d)===!1&&(b.preventDefault(),b.stopPropagation()));return q.postDispatch&&q.postDispatch.call(this,b),b.result}},handlers:function(s,c){var h,d,m,y,E,R=[],b=c.delegateCount,D=s.target;if(b&&D.nodeType&&!(s.type==="click"&&s.button>=1)){for(;D!==this;D=D.parentNode||this)if(D.nodeType===1&&!(s.type==="click"&&D.disabled===!0)){for(y=[],E={},h=0;h<b;h++)d=c[h],m=d.selector+" ",E[m]===void 0&&(E[m]=d.needsContext?l(m,this).index(D)>-1:l.find(m,this,null,[D]).length),E[m]&&y.push(d);y.length&&R.push({elem:D,handlers:y})}}return D=this,b<c.length&&R.push({elem:D,handlers:c.slice(b)}),R},addProp:function(s,c){Object.defineProperty(l.Event.prototype,s,{enumerable:!0,configurable:!0,get:Q(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(h){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:h})}})},fix:function(s){return s[l.expando]?s:new l.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var c=this||s;return Be.test(c.type)&&c.click&&S(c,"input")&&Vn(c,"click",!0),!1},trigger:function(s){var c=this||s;return Be.test(c.type)&&c.click&&S(c,"input")&&Vn(c,"click"),!0},_default:function(s){var c=s.target;return Be.test(c.type)&&c.click&&S(c,"input")&&ie.get(c,"click")||S(c,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function Vn(s,c,h){if(!h){ie.get(s,c)===void 0&&l.event.add(s,c,Ot);return}ie.set(s,c,!1),l.event.add(s,c,{namespace:!1,handler:function(d){var m,y=ie.get(this,c);if(d.isTrigger&1&&this[c]){if(y)(l.event.special[c]||{}).delegateType&&d.stopPropagation();else if(y=a.call(arguments),ie.set(this,c,y),this[c](),m=ie.get(this,c),ie.set(this,c,!1),y!==m)return d.stopImmediatePropagation(),d.preventDefault(),m}else y&&(ie.set(this,c,l.event.trigger(y[0],y.slice(1),this)),d.stopPropagation(),d.isImmediatePropagationStopped=Ot)}})}l.removeEvent=function(s,c,h){s.removeEventListener&&s.removeEventListener(c,h)},l.Event=function(s,c){if(!(this instanceof l.Event))return new l.Event(s,c);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Ot:dn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,c&&l.extend(this,c),this.timeStamp=s&&s.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:dn,isPropagationStopped:dn,isImmediatePropagationStopped:dn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Ot,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Ot,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Ot,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(s,c){function h(d){if(Y.documentMode){var m=ie.get(this,"handle"),y=l.event.fix(d);y.type=d.type==="focusin"?"focus":"blur",y.isSimulated=!0,m(d),y.target===y.currentTarget&&m(y)}else l.event.simulate(c,d.target,l.event.fix(d))}l.event.special[s]={setup:function(){var d;if(Vn(this,s,!0),Y.documentMode)d=ie.get(this,c),d||this.addEventListener(c,h),ie.set(this,c,(d||0)+1);else return!1},trigger:function(){return Vn(this,s),!0},teardown:function(){var d;if(Y.documentMode)d=ie.get(this,c)-1,d?ie.set(this,c,d):(this.removeEventListener(c,h),ie.remove(this,c));else return!1},_default:function(d){return ie.get(d.target,s)},delegateType:c},l.event.special[c]={setup:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=ie.get(m,c);y||(Y.documentMode?this.addEventListener(c,h):d.addEventListener(s,h,!0)),ie.set(m,c,(y||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=ie.get(m,c)-1;y?ie.set(m,c,y):(Y.documentMode?this.removeEventListener(c,h):d.removeEventListener(s,h,!0),ie.remove(m,c))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,c){l.event.special[s]={delegateType:c,bindType:c,handle:function(h){var d,m=this,y=h.relatedTarget,E=h.handleObj;return(!y||y!==m&&!l.contains(m,y))&&(h.type=E.origType,d=E.handler.apply(this,arguments),h.type=c),d}}}),l.fn.extend({on:function(s,c,h,d){return Br(this,s,c,h,d)},one:function(s,c,h,d){return Br(this,s,c,h,d,1)},off:function(s,c,h){var d,m;if(s&&s.preventDefault&&s.handleObj)return d=s.handleObj,l(s.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof s=="object"){for(m in s)this.off(m,c,s[m]);return this}return(c===!1||typeof c=="function")&&(h=c,c=void 0),h===!1&&(h=dn),this.each(function(){l.event.remove(this,s,h,c)})}});var gr=/<script|<style|<link/i,ga=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Mi(s,c){return S(s,"table")&&S(c.nodeType!==11?c:c.firstChild,"tr")&&l(s).children("tbody")[0]||s}function Hs(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function Fi(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function $r(s,c){var h,d,m,y,E,R,b;if(c.nodeType===1){if(ie.hasData(s)&&(y=ie.get(s),b=y.events,b)){ie.remove(c,"handle events");for(m in b)for(h=0,d=b[m].length;h<d;h++)l.event.add(c,m,b[m][h])}rt.hasData(s)&&(E=rt.access(s),R=l.extend({},E),rt.set(c,R))}}function zs(s,c){var h=c.nodeName.toLowerCase();h==="input"&&Be.test(s.type)?c.checked=s.checked:(h==="input"||h==="textarea")&&(c.defaultValue=s.defaultValue)}function On(s,c,h,d){c=u(c);var m,y,E,R,b,D,q=0,B=s.length,U=B-1,X=c[0],oe=Q(X);if(oe||B>1&&typeof X=="string"&&!W.checkClone&&ga.test(X))return s.each(function(Te){var ye=s.eq(Te);oe&&(c[0]=X.call(this,Te,ye.html())),On(ye,c,h,d)});if(B&&(m=Bs(c,s[0].ownerDocument,!1,s,d),y=m.firstChild,m.childNodes.length===1&&(m=y),y||d)){for(E=l.map(ut(m,"script"),Hs),R=E.length;q<B;q++)b=m,q!==U&&(b=l.clone(b,!0,!0),R&&l.merge(E,ut(b,"script"))),h.call(s[q],b,q);if(R)for(D=E[E.length-1].ownerDocument,l.map(E,Fi),q=0;q<R;q++)b=E[q],Dn.test(b.type||"")&&!ie.access(b,"globalEval")&&l.contains(D,b)&&(b.src&&(b.type||"").toLowerCase()!=="module"?l._evalUrl&&!b.noModule&&l._evalUrl(b.src,{nonce:b.nonce||b.getAttribute("nonce")},D):Ee(b.textContent.replace(Ht,""),b,D))}return s}function Ui(s,c,h){for(var d,m=c?l.filter(c,s):s,y=0;(d=m[y])!=null;y++)!h&&d.nodeType===1&&l.cleanData(ut(d)),d.parentNode&&(h&&$t(d)&&Li(ut(d,"script")),d.parentNode.removeChild(d));return s}l.extend({htmlPrefilter:function(s){return s},clone:function(s,c,h){var d,m,y,E,R=s.cloneNode(!0),b=$t(s);if(!W.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!l.isXMLDoc(s))for(E=ut(R),y=ut(s),d=0,m=y.length;d<m;d++)zs(y[d],E[d]);if(c)if(h)for(y=y||ut(s),E=E||ut(R),d=0,m=y.length;d<m;d++)$r(y[d],E[d]);else $r(s,R);return E=ut(R,"script"),E.length>0&&Li(E,!b&&ut(s,"script")),R},cleanData:function(s){for(var c,h,d,m=l.event.special,y=0;(h=s[y])!==void 0;y++)if(kn(h)){if(c=h[ie.expando]){if(c.events)for(d in c.events)m[d]?l.event.remove(h,d):l.removeEvent(h,d,c.handle);h[ie.expando]=void 0}h[rt.expando]&&(h[rt.expando]=void 0)}}}),l.fn.extend({detach:function(s){return Ui(this,s,!0)},remove:function(s){return Ui(this,s)},text:function(s){return At(this,function(c){return c===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,s,arguments.length)},append:function(){return On(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Mi(this,s);c.appendChild(s)}})},prepend:function(){return On(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=Mi(this,s);c.insertBefore(s,c.firstChild)}})},before:function(){return On(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return On(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,c=0;(s=this[c])!=null;c++)s.nodeType===1&&(l.cleanData(ut(s,!1)),s.textContent="");return this},clone:function(s,c){return s=s??!1,c=c??s,this.map(function(){return l.clone(this,s,c)})},html:function(s){return At(this,function(c){var h=this[0]||{},d=0,m=this.length;if(c===void 0&&h.nodeType===1)return h.innerHTML;if(typeof c=="string"&&!gr.test(c)&&!et[(Oi.exec(c)||["",""])[1].toLowerCase()]){c=l.htmlPrefilter(c);try{for(;d<m;d++)h=this[d]||{},h.nodeType===1&&(l.cleanData(ut(h,!1)),h.innerHTML=c);h=0}catch{}}h&&this.empty().append(c)},null,s,arguments.length)},replaceWith:function(){var s=[];return On(this,arguments,function(c){var h=this.parentNode;l.inArray(this,s)<0&&(l.cleanData(ut(this)),h&&h.replaceChild(c,this))},s)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,c){l.fn[s]=function(h){for(var d,m=[],y=l(h),E=y.length-1,R=0;R<=E;R++)d=R===E?this:this.clone(!0),l(y[R])[c](d),p.apply(m,d.get());return this.pushStack(m)}});var ji=new RegExp("^("+Ni+")(?!px)[a-z%]+$","i"),Ln=/^--/,mr=function(s){var c=s.ownerDocument.defaultView;return(!c||!c.opener)&&(c=e),c.getComputedStyle(s)},Hr=function(s,c,h){var d,m,y={};for(m in c)y[m]=s.style[m],s.style[m]=c[m];d=h.call(s);for(m in c)s.style[m]=y[m];return d},yr=new RegExp(mt.join("|"),"i");(function(){function s(){if(D){b.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",D.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Vt.appendChild(b).appendChild(D);var q=e.getComputedStyle(D);h=q.top!=="1%",R=c(q.marginLeft)===12,D.style.right="60%",y=c(q.right)===36,d=c(q.width)===36,D.style.position="absolute",m=c(D.offsetWidth/3)===12,Vt.removeChild(b),D=null}}function c(q){return Math.round(parseFloat(q))}var h,d,m,y,E,R,b=Y.createElement("div"),D=Y.createElement("div");D.style&&(D.style.backgroundClip="content-box",D.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle=D.style.backgroundClip==="content-box",l.extend(W,{boxSizingReliable:function(){return s(),d},pixelBoxStyles:function(){return s(),y},pixelPosition:function(){return s(),h},reliableMarginLeft:function(){return s(),R},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var q,B,U,X;return E==null&&(q=Y.createElement("table"),B=Y.createElement("tr"),U=Y.createElement("div"),q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",B.style.cssText="box-sizing:content-box;border:1px solid",B.style.height="1px",U.style.height="9px",U.style.display="block",Vt.appendChild(q).appendChild(B).appendChild(U),X=e.getComputedStyle(B),E=parseInt(X.height,10)+parseInt(X.borderTopWidth,10)+parseInt(X.borderBottomWidth,10)===B.offsetHeight,Vt.removeChild(q)),E}}))})();function Et(s,c,h){var d,m,y,E,R=Ln.test(c),b=s.style;return h=h||mr(s),h&&(E=h.getPropertyValue(c)||h[c],R&&E&&(E=E.replace(We,"$1")||void 0),E===""&&!$t(s)&&(E=l.style(s,c)),!W.pixelBoxStyles()&&ji.test(E)&&yr.test(c)&&(d=b.width,m=b.minWidth,y=b.maxWidth,b.minWidth=b.maxWidth=b.width=E,E=h.width,b.width=d,b.minWidth=m,b.maxWidth=y)),E!==void 0?E+"":E}function zr(s,c){return{get:function(){if(s()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Ws=["Webkit","Moz","ms"],qi=Y.createElement("div").style,Bi={};function Gs(s){for(var c=s[0].toUpperCase()+s.slice(1),h=Ws.length;h--;)if(s=Ws[h]+c,s in qi)return s}function _r(s){var c=l.cssProps[s]||Bi[s];return c||(s in qi?s:Bi[s]=Gs(s)||s)}var $i=/^(none|table(?!-c[ea]).+)/,Ks={position:"absolute",visibility:"hidden",display:"block"},Hi={letterSpacing:"0",fontWeight:"400"};function zi(s,c,h){var d=xn.exec(c);return d?Math.max(0,d[2]-(h||0))+(d[3]||"px"):c}function Wi(s,c,h,d,m,y){var E=c==="width"?1:0,R=0,b=0,D=0;if(h===(d?"border":"content"))return 0;for(;E<4;E+=2)h==="margin"&&(D+=l.css(s,h+mt[E],!0,m)),d?(h==="content"&&(b-=l.css(s,"padding"+mt[E],!0,m)),h!=="margin"&&(b-=l.css(s,"border"+mt[E]+"Width",!0,m))):(b+=l.css(s,"padding"+mt[E],!0,m),h!=="padding"?b+=l.css(s,"border"+mt[E]+"Width",!0,m):R+=l.css(s,"border"+mt[E]+"Width",!0,m));return!d&&y>=0&&(b+=Math.max(0,Math.ceil(s["offset"+c[0].toUpperCase()+c.slice(1)]-y-b-R-.5))||0),b+D}function Lt(s,c,h){var d=mr(s),m=!W.boxSizingReliable()||h,y=m&&l.css(s,"boxSizing",!1,d)==="border-box",E=y,R=Et(s,c,d),b="offset"+c[0].toUpperCase()+c.slice(1);if(ji.test(R)){if(!h)return R;R="auto"}return(!W.boxSizingReliable()&&y||!W.reliableTrDimensions()&&S(s,"tr")||R==="auto"||!parseFloat(R)&&l.css(s,"display",!1,d)==="inline")&&s.getClientRects().length&&(y=l.css(s,"boxSizing",!1,d)==="border-box",E=b in s,E&&(R=s[b])),R=parseFloat(R)||0,R+Wi(s,c,h||(y?"border":"content"),E,d,R)+"px"}l.extend({cssHooks:{opacity:{get:function(s,c){if(c){var h=Et(s,"opacity");return h===""?"1":h}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,c,h,d){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,y,E,R=St(c),b=Ln.test(c),D=s.style;if(b||(c=_r(R)),E=l.cssHooks[c]||l.cssHooks[R],h!==void 0){if(y=typeof h,y==="string"&&(m=xn.exec(h))&&m[1]&&(h=dr(s,c,m),y="number"),h==null||h!==h)return;y==="number"&&!b&&(h+=m&&m[3]||(l.cssNumber[R]?"":"px")),!W.clearCloneStyle&&h===""&&c.indexOf("background")===0&&(D[c]="inherit"),(!E||!("set"in E)||(h=E.set(s,h,d))!==void 0)&&(b?D.setProperty(c,h):D[c]=h)}else return E&&"get"in E&&(m=E.get(s,!1,d))!==void 0?m:D[c]}},css:function(s,c,h,d){var m,y,E,R=St(c),b=Ln.test(c);return b||(c=_r(R)),E=l.cssHooks[c]||l.cssHooks[R],E&&"get"in E&&(m=E.get(s,!0,h)),m===void 0&&(m=Et(s,c,d)),m==="normal"&&c in Hi&&(m=Hi[c]),h===""||h?(y=parseFloat(m),h===!0||isFinite(y)?y||0:m):m}}),l.each(["height","width"],function(s,c){l.cssHooks[c]={get:function(h,d,m){if(d)return $i.test(l.css(h,"display"))&&(!h.getClientRects().length||!h.getBoundingClientRect().width)?Hr(h,Ks,function(){return Lt(h,c,m)}):Lt(h,c,m)},set:function(h,d,m){var y,E=mr(h),R=!W.scrollboxSize()&&E.position==="absolute",b=R||m,D=b&&l.css(h,"boxSizing",!1,E)==="border-box",q=m?Wi(h,c,m,D,E):0;return D&&R&&(q-=Math.ceil(h["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(E[c])-Wi(h,c,"border",!1,E)-.5)),q&&(y=xn.exec(d))&&(y[3]||"px")!=="px"&&(h.style[c]=d,d=l.css(h,c)),zi(h,d,q)}}}),l.cssHooks.marginLeft=zr(W.reliableMarginLeft,function(s,c){if(c)return(parseFloat(Et(s,"marginLeft"))||s.getBoundingClientRect().left-Hr(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(s,c){l.cssHooks[s+c]={expand:function(h){for(var d=0,m={},y=typeof h=="string"?h.split(" "):[h];d<4;d++)m[s+mt[d]+c]=y[d]||y[d-2]||y[0];return m}},s!=="margin"&&(l.cssHooks[s+c].set=zi)}),l.fn.extend({css:function(s,c){return At(this,function(h,d,m){var y,E,R={},b=0;if(Array.isArray(d)){for(y=mr(h),E=d.length;b<E;b++)R[d[b]]=l.css(h,d[b],!1,y);return R}return m!==void 0?l.style(h,d,m):l.css(h,d)},s,c,arguments.length>1)}});function Ve(s,c,h,d,m){return new Ve.prototype.init(s,c,h,d,m)}l.Tween=Ve,Ve.prototype={constructor:Ve,init:function(s,c,h,d,m,y){this.elem=s,this.prop=h,this.easing=m||l.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=d,this.unit=y||(l.cssNumber[h]?"":"px")},cur:function(){var s=Ve.propHooks[this.prop];return s&&s.get?s.get(this):Ve.propHooks._default.get(this)},run:function(s){var c,h=Ve.propHooks[this.prop];return this.options.duration?this.pos=c=l.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=c=s,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),h&&h.set?h.set(this):Ve.propHooks._default.set(this),this}},Ve.prototype.init.prototype=Ve.prototype,Ve.propHooks={_default:{get:function(s){var c;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(c=l.css(s.elem,s.prop,""),!c||c==="auto"?0:c)},set:function(s){l.fx.step[s.prop]?l.fx.step[s.prop](s):s.elem.nodeType===1&&(l.cssHooks[s.prop]||s.elem.style[_r(s.prop)]!=null)?l.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Ve.propHooks.scrollTop=Ve.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},l.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},l.fx=Ve.prototype.init,l.fx.step={};var Ct,zt,Gi=/^(?:toggle|show|hide)$/,ke=/queueHooks$/;function Mn(){zt&&(Y.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Mn):e.setTimeout(Mn,l.fx.interval),l.fx.tick())}function Fn(){return e.setTimeout(function(){Ct=void 0}),Ct=Date.now()}function Wt(s,c){var h,d=0,m={height:s};for(c=c?1:0;d<4;d+=2-c)h=mt[d],m["margin"+h]=m["padding"+h]=s;return c&&(m.opacity=m.width=s),m}function Qs(s,c,h){for(var d,m=(Tt.tweeners[c]||[]).concat(Tt.tweeners["*"]),y=0,E=m.length;y<E;y++)if(d=m[y].call(h,c,s))return d}function Xs(s,c,h){var d,m,y,E,R,b,D,q,B="width"in c||"height"in c,U=this,X={},oe=s.style,Te=s.nodeType&&fr(s),ye=ie.get(s,"fxshow");h.queue||(E=l._queueHooks(s,"fx"),E.unqueued==null&&(E.unqueued=0,R=E.empty.fire,E.empty.fire=function(){E.unqueued||R()}),E.unqueued++,U.always(function(){U.always(function(){E.unqueued--,l.queue(s,"fx").length||E.empty.fire()})}));for(d in c)if(m=c[d],Gi.test(m)){if(delete c[d],y=y||m==="toggle",m===(Te?"hide":"show"))if(m==="show"&&ye&&ye[d]!==void 0)Te=!0;else continue;X[d]=ye&&ye[d]||l.style(s,d)}if(b=!l.isEmptyObject(c),!(!b&&l.isEmptyObject(X))){B&&s.nodeType===1&&(h.overflow=[oe.overflow,oe.overflowX,oe.overflowY],D=ye&&ye.display,D==null&&(D=ie.get(s,"display")),q=l.css(s,"display"),q==="none"&&(D?q=D:(fn([s],!0),D=s.style.display||D,q=l.css(s,"display"),fn([s]))),(q==="inline"||q==="inline-block"&&D!=null)&&l.css(s,"float")==="none"&&(b||(U.done(function(){oe.display=D}),D==null&&(q=oe.display,D=q==="none"?"":q)),oe.display="inline-block")),h.overflow&&(oe.overflow="hidden",U.always(function(){oe.overflow=h.overflow[0],oe.overflowX=h.overflow[1],oe.overflowY=h.overflow[2]})),b=!1;for(d in X)b||(ye?"hidden"in ye&&(Te=ye.hidden):ye=ie.access(s,"fxshow",{display:D}),y&&(ye.hidden=!Te),Te&&fn([s],!0),U.done(function(){Te||fn([s]),ie.remove(s,"fxshow");for(d in X)l.style(s,d,X[d])})),b=Qs(Te?ye[d]:0,d,U),d in ye||(ye[d]=b.start,Te&&(b.end=b.start,b.start=0))}}function ma(s,c){var h,d,m,y,E;for(h in s)if(d=St(h),m=c[d],y=s[h],Array.isArray(y)&&(m=y[1],y=s[h]=y[0]),h!==d&&(s[d]=y,delete s[h]),E=l.cssHooks[d],E&&"expand"in E){y=E.expand(y),delete s[d];for(h in y)h in s||(s[h]=y[h],c[h]=m)}else c[d]=m}function Tt(s,c,h){var d,m,y=0,E=Tt.prefilters.length,R=l.Deferred().always(function(){delete b.elem}),b=function(){if(m)return!1;for(var B=Ct||Fn(),U=Math.max(0,D.startTime+D.duration-B),X=U/D.duration||0,oe=1-X,Te=0,ye=D.tweens.length;Te<ye;Te++)D.tweens[Te].run(oe);return R.notifyWith(s,[D,oe,U]),oe<1&&ye?U:(ye||R.notifyWith(s,[D,1,0]),R.resolveWith(s,[D]),!1)},D=R.promise({elem:s,props:l.extend({},c),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},h),originalProperties:c,originalOptions:h,startTime:Ct||Fn(),duration:h.duration,tweens:[],createTween:function(B,U){var X=l.Tween(s,D.opts,B,U,D.opts.specialEasing[B]||D.opts.easing);return D.tweens.push(X),X},stop:function(B){var U=0,X=B?D.tweens.length:0;if(m)return this;for(m=!0;U<X;U++)D.tweens[U].run(1);return B?(R.notifyWith(s,[D,1,0]),R.resolveWith(s,[D,B])):R.rejectWith(s,[D,B]),this}}),q=D.props;for(ma(q,D.opts.specialEasing);y<E;y++)if(d=Tt.prefilters[y].call(D,s,q,D.opts),d)return Q(d.stop)&&(l._queueHooks(D.elem,D.opts.queue).stop=d.stop.bind(d)),d;return l.map(q,Qs,D),Q(D.opts.start)&&D.opts.start.call(s,D),D.progress(D.opts.progress).done(D.opts.done,D.opts.complete).fail(D.opts.fail).always(D.opts.always),l.fx.timer(l.extend(b,{elem:s,anim:D,queue:D.opts.queue})),D}l.Animation=l.extend(Tt,{tweeners:{"*":[function(s,c){var h=this.createTween(s,c);return dr(h.elem,s,xn.exec(c),h),h}]},tweener:function(s,c){Q(s)?(c=s,s=["*"]):s=s.match(bt);for(var h,d=0,m=s.length;d<m;d++)h=s[d],Tt.tweeners[h]=Tt.tweeners[h]||[],Tt.tweeners[h].unshift(c)},prefilters:[Xs],prefilter:function(s,c){c?Tt.prefilters.unshift(s):Tt.prefilters.push(s)}}),l.speed=function(s,c,h){var d=s&&typeof s=="object"?l.extend({},s):{complete:h||!h&&c||Q(s)&&s,duration:s,easing:h&&c||c&&!Q(c)&&c};return l.fx.off?d.duration=0:typeof d.duration!="number"&&(d.duration in l.fx.speeds?d.duration=l.fx.speeds[d.duration]:d.duration=l.fx.speeds._default),(d.queue==null||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){Q(d.old)&&d.old.call(this),d.queue&&l.dequeue(this,d.queue)},d},l.fn.extend({fadeTo:function(s,c,h,d){return this.filter(fr).css("opacity",0).show().end().animate({opacity:c},s,h,d)},animate:function(s,c,h,d){var m=l.isEmptyObject(s),y=l.speed(c,h,d),E=function(){var R=Tt(this,l.extend({},s),y);(m||ie.get(this,"finish"))&&R.stop(!0)};return E.finish=E,m||y.queue===!1?this.each(E):this.queue(y.queue,E)},stop:function(s,c,h){var d=function(m){var y=m.stop;delete m.stop,y(h)};return typeof s!="string"&&(h=c,c=s,s=void 0),c&&this.queue(s||"fx",[]),this.each(function(){var m=!0,y=s!=null&&s+"queueHooks",E=l.timers,R=ie.get(this);if(y)R[y]&&R[y].stop&&d(R[y]);else for(y in R)R[y]&&R[y].stop&&ke.test(y)&&d(R[y]);for(y=E.length;y--;)E[y].elem===this&&(s==null||E[y].queue===s)&&(E[y].anim.stop(h),m=!1,E.splice(y,1));(m||!h)&&l.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var c,h=ie.get(this),d=h[s+"queue"],m=h[s+"queueHooks"],y=l.timers,E=d?d.length:0;for(h.finish=!0,l.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),c=y.length;c--;)y[c].elem===this&&y[c].queue===s&&(y[c].anim.stop(!0),y.splice(c,1));for(c=0;c<E;c++)d[c]&&d[c].finish&&d[c].finish.call(this);delete h.finish})}}),l.each(["toggle","show","hide"],function(s,c){var h=l.fn[c];l.fn[c]=function(d,m,y){return d==null||typeof d=="boolean"?h.apply(this,arguments):this.animate(Wt(c,!0),d,m,y)}}),l.each({slideDown:Wt("show"),slideUp:Wt("hide"),slideToggle:Wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,c){l.fn[s]=function(h,d,m){return this.animate(c,h,d,m)}}),l.timers=[],l.fx.tick=function(){var s,c=0,h=l.timers;for(Ct=Date.now();c<h.length;c++)s=h[c],!s()&&h[c]===s&&h.splice(c--,1);h.length||l.fx.stop(),Ct=void 0},l.fx.timer=function(s){l.timers.push(s),l.fx.start()},l.fx.interval=13,l.fx.start=function(){zt||(zt=!0,Mn())},l.fx.stop=function(){zt=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(s,c){return s=l.fx&&l.fx.speeds[s]||s,c=c||"fx",this.queue(c,function(h,d){var m=e.setTimeout(h,s);d.stop=function(){e.clearTimeout(m)}})},(function(){var s=Y.createElement("input"),c=Y.createElement("select"),h=c.appendChild(Y.createElement("option"));s.type="checkbox",W.checkOn=s.value!=="",W.optSelected=h.selected,s=Y.createElement("input"),s.value="t",s.type="radio",W.radioValue=s.value==="t"})();var Ys,vr=l.expr.attrHandle;l.fn.extend({attr:function(s,c){return At(this,l.attr,s,c,arguments.length>1)},removeAttr:function(s){return this.each(function(){l.removeAttr(this,s)})}}),l.extend({attr:function(s,c,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2)){if(typeof s.getAttribute>"u")return l.prop(s,c,h);if((y!==1||!l.isXMLDoc(s))&&(m=l.attrHooks[c.toLowerCase()]||(l.expr.match.bool.test(c)?Ys:void 0)),h!==void 0){if(h===null){l.removeAttr(s,c);return}return m&&"set"in m&&(d=m.set(s,h,c))!==void 0?d:(s.setAttribute(c,h+""),h)}return m&&"get"in m&&(d=m.get(s,c))!==null?d:(d=l.find.attr(s,c),d??void 0)}},attrHooks:{type:{set:function(s,c){if(!W.radioValue&&c==="radio"&&S(s,"input")){var h=s.value;return s.setAttribute("type",c),h&&(s.value=h),c}}}},removeAttr:function(s,c){var h,d=0,m=c&&c.match(bt);if(m&&s.nodeType===1)for(;h=m[d++];)s.removeAttribute(h)}}),Ys={set:function(s,c,h){return c===!1?l.removeAttr(s,h):s.setAttribute(h,h),h}},l.each(l.expr.match.bool.source.match(/\w+/g),function(s,c){var h=vr[c]||l.find.attr;vr[c]=function(d,m,y){var E,R,b=m.toLowerCase();return y||(R=vr[b],vr[b]=E,E=h(d,m,y)!=null?b:null,vr[b]=R),E}});var Er=/^(?:input|select|textarea|button)$/i,pn=/^(?:a|area)$/i;l.fn.extend({prop:function(s,c){return At(this,l.prop,s,c,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[l.propFix[s]||s]})}}),l.extend({prop:function(s,c,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!l.isXMLDoc(s))&&(c=l.propFix[c]||c,m=l.propHooks[c]),h!==void 0?m&&"set"in m&&(d=m.set(s,h,c))!==void 0?d:s[c]=h:m&&"get"in m&&(d=m.get(s,c))!==null?d:s[c]},propHooks:{tabIndex:{get:function(s){var c=l.find.attr(s,"tabindex");return c?parseInt(c,10):Er.test(s.nodeName)||pn.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),W.optSelected||(l.propHooks.selected={get:function(s){var c=s.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(s){var c=s.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function Gt(s){var c=s.match(bt)||[];return c.join(" ")}function Kt(s){return s.getAttribute&&s.getAttribute("class")||""}function Wr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(bt)||[]:[]}l.fn.extend({addClass:function(s){var c,h,d,m,y,E;return Q(s)?this.each(function(R){l(this).addClass(s.call(this,R,Kt(this)))}):(c=Wr(s),c.length?this.each(function(){if(d=Kt(this),h=this.nodeType===1&&" "+Gt(d)+" ",h){for(y=0;y<c.length;y++)m=c[y],h.indexOf(" "+m+" ")<0&&(h+=m+" ");E=Gt(h),d!==E&&this.setAttribute("class",E)}}):this)},removeClass:function(s){var c,h,d,m,y,E;return Q(s)?this.each(function(R){l(this).removeClass(s.call(this,R,Kt(this)))}):arguments.length?(c=Wr(s),c.length?this.each(function(){if(d=Kt(this),h=this.nodeType===1&&" "+Gt(d)+" ",h){for(y=0;y<c.length;y++)for(m=c[y];h.indexOf(" "+m+" ")>-1;)h=h.replace(" "+m+" "," ");E=Gt(h),d!==E&&this.setAttribute("class",E)}}):this):this.attr("class","")},toggleClass:function(s,c){var h,d,m,y,E=typeof s,R=E==="string"||Array.isArray(s);return Q(s)?this.each(function(b){l(this).toggleClass(s.call(this,b,Kt(this),c),c)}):typeof c=="boolean"&&R?c?this.addClass(s):this.removeClass(s):(h=Wr(s),this.each(function(){if(R)for(y=l(this),m=0;m<h.length;m++)d=h[m],y.hasClass(d)?y.removeClass(d):y.addClass(d);else(s===void 0||E==="boolean")&&(d=Kt(this),d&&ie.set(this,"__className__",d),this.setAttribute&&this.setAttribute("class",d||s===!1?"":ie.get(this,"__className__")||""))}))},hasClass:function(s){var c,h,d=0;for(c=" "+s+" ";h=this[d++];)if(h.nodeType===1&&(" "+Gt(Kt(h))+" ").indexOf(c)>-1)return!0;return!1}});var Js=/\r/g;l.fn.extend({val:function(s){var c,h,d,m=this[0];return arguments.length?(d=Q(s),this.each(function(y){var E;this.nodeType===1&&(d?E=s.call(this,y,l(this).val()):E=s,E==null?E="":typeof E=="number"?E+="":Array.isArray(E)&&(E=l.map(E,function(R){return R==null?"":R+""})),c=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,E,"value")===void 0)&&(this.value=E))})):m?(c=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()],c&&"get"in c&&(h=c.get(m,"value"))!==void 0?h:(h=m.value,typeof h=="string"?h.replace(Js,""):h??"")):void 0}}),l.extend({valHooks:{option:{get:function(s){var c=l.find.attr(s,"value");return c??Gt(l.text(s))}},select:{get:function(s){var c,h,d,m=s.options,y=s.selectedIndex,E=s.type==="select-one",R=E?null:[],b=E?y+1:m.length;for(y<0?d=b:d=E?y:0;d<b;d++)if(h=m[d],(h.selected||d===y)&&!h.disabled&&(!h.parentNode.disabled||!S(h.parentNode,"optgroup"))){if(c=l(h).val(),E)return c;R.push(c)}return R},set:function(s,c){for(var h,d,m=s.options,y=l.makeArray(c),E=m.length;E--;)d=m[E],(d.selected=l.inArray(l.valHooks.option.get(d),y)>-1)&&(h=!0);return h||(s.selectedIndex=-1),y}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(s,c){if(Array.isArray(c))return s.checked=l.inArray(l(s).val(),c)>-1}},W.checkOn||(l.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var Un=e.location,gn={guid:Date.now()},Ki=/\?/;l.parseXML=function(s){var c,h;if(!s||typeof s!="string")return null;try{c=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return h=c&&c.getElementsByTagName("parsererror")[0],(!c||h)&&l.error("Invalid XML: "+(h?l.map(h.childNodes,function(d){return d.textContent}).join(`
`):s)),c};var Zs=/^(?:focusinfocus|focusoutblur)$/,eo=function(s){s.stopPropagation()};l.extend(l.event,{trigger:function(s,c,h,d){var m,y,E,R,b,D,q,B,U=[h||Y],X=P.call(s,"type")?s.type:s,oe=P.call(s,"namespace")?s.namespace.split("."):[];if(y=B=E=h=h||Y,!(h.nodeType===3||h.nodeType===8)&&!Zs.test(X+l.event.triggered)&&(X.indexOf(".")>-1&&(oe=X.split("."),X=oe.shift(),oe.sort()),b=X.indexOf(":")<0&&"on"+X,s=s[l.expando]?s:new l.Event(X,typeof s=="object"&&s),s.isTrigger=d?2:3,s.namespace=oe.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+oe.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=h),c=c==null?[s]:l.makeArray(c,[s]),q=l.event.special[X]||{},!(!d&&q.trigger&&q.trigger.apply(h,c)===!1))){if(!d&&!q.noBubble&&!J(h)){for(R=q.delegateType||X,Zs.test(R+X)||(y=y.parentNode);y;y=y.parentNode)U.push(y),E=y;E===(h.ownerDocument||Y)&&U.push(E.defaultView||E.parentWindow||e)}for(m=0;(y=U[m++])&&!s.isPropagationStopped();)B=y,s.type=m>1?R:q.bindType||X,D=(ie.get(y,"events")||Object.create(null))[s.type]&&ie.get(y,"handle"),D&&D.apply(y,c),D=b&&y[b],D&&D.apply&&kn(y)&&(s.result=D.apply(y,c),s.result===!1&&s.preventDefault());return s.type=X,!d&&!s.isDefaultPrevented()&&(!q._default||q._default.apply(U.pop(),c)===!1)&&kn(h)&&b&&Q(h[X])&&!J(h)&&(E=h[b],E&&(h[b]=null),l.event.triggered=X,s.isPropagationStopped()&&B.addEventListener(X,eo),h[X](),s.isPropagationStopped()&&B.removeEventListener(X,eo),l.event.triggered=void 0,E&&(h[b]=E)),s.result}},simulate:function(s,c,h){var d=l.extend(new l.Event,h,{type:s,isSimulated:!0});l.event.trigger(d,null,c)}}),l.fn.extend({trigger:function(s,c){return this.each(function(){l.event.trigger(s,c,this)})},triggerHandler:function(s,c){var h=this[0];if(h)return l.event.trigger(s,c,h,!0)}});var Qt=/\[\]$/,to=/\r?\n/g,Qi=/^(?:submit|button|image|reset|file)$/i,Gr=/^(?:input|select|textarea|keygen)/i;function Kr(s,c,h,d){var m;if(Array.isArray(c))l.each(c,function(y,E){h||Qt.test(s)?d(s,E):Kr(s+"["+(typeof E=="object"&&E!=null?y:"")+"]",E,h,d)});else if(!h&&xe(c)==="object")for(m in c)Kr(s+"["+m+"]",c[m],h,d);else d(s,c)}l.param=function(s,c){var h,d=[],m=function(y,E){var R=Q(E)?E():E;d[d.length]=encodeURIComponent(y)+"="+encodeURIComponent(R??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!l.isPlainObject(s))l.each(s,function(){m(this.name,this.value)});else for(h in s)Kr(h,s[h],c,m);return d.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=l.prop(this,"elements");return s?l.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!l(this).is(":disabled")&&Gr.test(this.nodeName)&&!Qi.test(s)&&(this.checked||!Be.test(s))}).map(function(s,c){var h=l(this).val();return h==null?null:Array.isArray(h)?l.map(h,function(d){return{name:c.name,value:d.replace(to,`\r
`)}}):{name:c.name,value:h.replace(to,`\r
`)}}).get()}});var Tr=/%20/g,wr=/#.*$/,no=/([?&])_=[^&]*/,Xi=/^(.*?):[ \t]*([^\r\n]*)$/mg,Le=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ya=/^(?:GET|HEAD)$/,_a=/^\/\//,Yi={},Qr={},Ji="*/".concat("*"),jn=Y.createElement("a");jn.href=Un.href;function Mt(s){return function(c,h){typeof c!="string"&&(h=c,c="*");var d,m=0,y=c.toLowerCase().match(bt)||[];if(Q(h))for(;d=y[m++];)d[0]==="+"?(d=d.slice(1)||"*",(s[d]=s[d]||[]).unshift(h)):(s[d]=s[d]||[]).push(h)}}function Zi(s,c,h,d){var m={},y=s===Qr;function E(R){var b;return m[R]=!0,l.each(s[R]||[],function(D,q){var B=q(c,h,d);if(typeof B=="string"&&!y&&!m[B])return c.dataTypes.unshift(B),E(B),!1;if(y)return!(b=B)}),b}return E(c.dataTypes[0])||!m["*"]&&E("*")}function es(s,c){var h,d,m=l.ajaxSettings.flatOptions||{};for(h in c)c[h]!==void 0&&((m[h]?s:d||(d={}))[h]=c[h]);return d&&l.extend(!0,s,d),s}function Ir(s,c,h){for(var d,m,y,E,R=s.contents,b=s.dataTypes;b[0]==="*";)b.shift(),d===void 0&&(d=s.mimeType||c.getResponseHeader("Content-Type"));if(d){for(m in R)if(R[m]&&R[m].test(d)){b.unshift(m);break}}if(b[0]in h)y=b[0];else{for(m in h){if(!b[0]||s.converters[m+" "+b[0]]){y=m;break}E||(E=m)}y=y||E}if(y)return y!==b[0]&&b.unshift(y),h[y]}function ro(s,c,h,d){var m,y,E,R,b,D={},q=s.dataTypes.slice();if(q[1])for(E in s.converters)D[E.toLowerCase()]=s.converters[E];for(y=q.shift();y;)if(s.responseFields[y]&&(h[s.responseFields[y]]=c),!b&&d&&s.dataFilter&&(c=s.dataFilter(c,s.dataType)),b=y,y=q.shift(),y){if(y==="*")y=b;else if(b!=="*"&&b!==y){if(E=D[b+" "+y]||D["* "+y],!E){for(m in D)if(R=m.split(" "),R[1]===y&&(E=D[b+" "+R[0]]||D["* "+R[0]],E)){E===!0?E=D[m]:D[m]!==!0&&(y=R[0],q.unshift(R[1]));break}}if(E!==!0)if(E&&s.throws)c=E(c);else try{c=E(c)}catch(B){return{state:"parsererror",error:E?B:"No conversion from "+b+" to "+y}}}}return{state:"success",data:c}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Un.href,type:"GET",isLocal:Le.test(Un.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ji,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,c){return c?es(es(s,l.ajaxSettings),c):es(l.ajaxSettings,s)},ajaxPrefilter:Mt(Yi),ajaxTransport:Mt(Qr),ajax:function(s,c){typeof s=="object"&&(c=s,s=void 0),c=c||{};var h,d,m,y,E,R,b,D,q,B,U=l.ajaxSetup({},c),X=U.context||U,oe=U.context&&(X.nodeType||X.jquery)?l(X):l.event,Te=l.Deferred(),ye=l.Callbacks("once memory"),Me=U.statusCode||{},o={},f={},g="canceled",T={readyState:0,getResponseHeader:function(V){var G;if(b){if(!y)for(y={};G=Xi.exec(m);)y[G[1].toLowerCase()+" "]=(y[G[1].toLowerCase()+" "]||[]).concat(G[2]);G=y[V.toLowerCase()+" "]}return G==null?null:G.join(", ")},getAllResponseHeaders:function(){return b?m:null},setRequestHeader:function(V,G){return b==null&&(V=f[V.toLowerCase()]=f[V.toLowerCase()]||V,o[V]=G),this},overrideMimeType:function(V){return b==null&&(U.mimeType=V),this},statusCode:function(V){var G;if(V)if(b)T.always(V[T.status]);else for(G in V)Me[G]=[Me[G],V[G]];return this},abort:function(V){var G=V||g;return h&&h.abort(G),O(0,G),this}};if(Te.promise(T),U.url=((s||U.url||Un.href)+"").replace(_a,Un.protocol+"//"),U.type=c.method||c.type||U.method||U.type,U.dataTypes=(U.dataType||"*").toLowerCase().match(bt)||[""],U.crossDomain==null){R=Y.createElement("a");try{R.href=U.url,R.href=R.href,U.crossDomain=jn.protocol+"//"+jn.host!=R.protocol+"//"+R.host}catch{U.crossDomain=!0}}if(U.data&&U.processData&&typeof U.data!="string"&&(U.data=l.param(U.data,U.traditional)),Zi(Yi,U,c,T),b)return T;D=l.event&&U.global,D&&l.active++===0&&l.event.trigger("ajaxStart"),U.type=U.type.toUpperCase(),U.hasContent=!ya.test(U.type),d=U.url.replace(wr,""),U.hasContent?U.data&&U.processData&&(U.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(U.data=U.data.replace(Tr,"+")):(B=U.url.slice(d.length),U.data&&(U.processData||typeof U.data=="string")&&(d+=(Ki.test(d)?"&":"?")+U.data,delete U.data),U.cache===!1&&(d=d.replace(no,"$1"),B=(Ki.test(d)?"&":"?")+"_="+gn.guid+++B),U.url=d+B),U.ifModified&&(l.lastModified[d]&&T.setRequestHeader("If-Modified-Since",l.lastModified[d]),l.etag[d]&&T.setRequestHeader("If-None-Match",l.etag[d])),(U.data&&U.hasContent&&U.contentType!==!1||c.contentType)&&T.setRequestHeader("Content-Type",U.contentType),T.setRequestHeader("Accept",U.dataTypes[0]&&U.accepts[U.dataTypes[0]]?U.accepts[U.dataTypes[0]]+(U.dataTypes[0]!=="*"?", "+Ji+"; q=0.01":""):U.accepts["*"]);for(q in U.headers)T.setRequestHeader(q,U.headers[q]);if(U.beforeSend&&(U.beforeSend.call(X,T,U)===!1||b))return T.abort();if(g="abort",ye.add(U.complete),T.done(U.success),T.fail(U.error),h=Zi(Qr,U,c,T),!h)O(-1,"No Transport");else{if(T.readyState=1,D&&oe.trigger("ajaxSend",[T,U]),b)return T;U.async&&U.timeout>0&&(E=e.setTimeout(function(){T.abort("timeout")},U.timeout));try{b=!1,h.send(o,O)}catch(V){if(b)throw V;O(-1,V)}}function O(V,G,de,Ue){var _e,Fe,$e,lt,it,He=G;b||(b=!0,E&&e.clearTimeout(E),h=void 0,m=Ue||"",T.readyState=V>0?4:0,_e=V>=200&&V<300||V===304,de&&(lt=Ir(U,T,de)),!_e&&l.inArray("script",U.dataTypes)>-1&&l.inArray("json",U.dataTypes)<0&&(U.converters["text script"]=function(){}),lt=ro(U,lt,T,_e),_e?(U.ifModified&&(it=T.getResponseHeader("Last-Modified"),it&&(l.lastModified[d]=it),it=T.getResponseHeader("etag"),it&&(l.etag[d]=it)),V===204||U.type==="HEAD"?He="nocontent":V===304?He="notmodified":(He=lt.state,Fe=lt.data,$e=lt.error,_e=!$e)):($e=He,(V||!He)&&(He="error",V<0&&(V=0))),T.status=V,T.statusText=(G||He)+"",_e?Te.resolveWith(X,[Fe,He,T]):Te.rejectWith(X,[T,He,$e]),T.statusCode(Me),Me=void 0,D&&oe.trigger(_e?"ajaxSuccess":"ajaxError",[T,U,_e?Fe:$e]),ye.fireWith(X,[T,He]),D&&(oe.trigger("ajaxComplete",[T,U]),--l.active||l.event.trigger("ajaxStop")))}return T},getJSON:function(s,c,h){return l.get(s,c,h,"json")},getScript:function(s,c){return l.get(s,void 0,c,"script")}}),l.each(["get","post"],function(s,c){l[c]=function(h,d,m,y){return Q(d)&&(y=y||m,m=d,d=void 0),l.ajax(l.extend({url:h,type:c,dataType:y,data:d,success:m},l.isPlainObject(h)&&h))}}),l.ajaxPrefilter(function(s){var c;for(c in s.headers)c.toLowerCase()==="content-type"&&(s.contentType=s.headers[c]||"")}),l._evalUrl=function(s,c,h){return l.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(d){l.globalEval(d,c,h)}})},l.fn.extend({wrapAll:function(s){var c;return this[0]&&(Q(s)&&(s=s.call(this[0])),c=l(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var h=this;h.firstElementChild;)h=h.firstElementChild;return h}).append(this)),this},wrapInner:function(s){return Q(s)?this.each(function(c){l(this).wrapInner(s.call(this,c))}):this.each(function(){var c=l(this),h=c.contents();h.length?h.wrapAll(s):c.append(s)})},wrap:function(s){var c=Q(s);return this.each(function(h){l(this).wrapAll(c?s.call(this,h):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(s){return!l.expr.pseudos.visible(s)},l.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var ts={0:200,1223:204},Xt=l.ajaxSettings.xhr();W.cors=!!Xt&&"withCredentials"in Xt,W.ajax=Xt=!!Xt,l.ajaxTransport(function(s){var c,h;if(W.cors||Xt&&!s.crossDomain)return{send:function(d,m){var y,E=s.xhr();if(E.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(y in s.xhrFields)E[y]=s.xhrFields[y];s.mimeType&&E.overrideMimeType&&E.overrideMimeType(s.mimeType),!s.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");for(y in d)E.setRequestHeader(y,d[y]);c=function(R){return function(){c&&(c=h=E.onload=E.onerror=E.onabort=E.ontimeout=E.onreadystatechange=null,R==="abort"?E.abort():R==="error"?typeof E.status!="number"?m(0,"error"):m(E.status,E.statusText):m(ts[E.status]||E.status,E.statusText,(E.responseType||"text")!=="text"||typeof E.responseText!="string"?{binary:E.response}:{text:E.responseText},E.getAllResponseHeaders()))}},E.onload=c(),h=E.onerror=E.ontimeout=c("error"),E.onabort!==void 0?E.onabort=h:E.onreadystatechange=function(){E.readyState===4&&e.setTimeout(function(){c&&h()})},c=c("abort");try{E.send(s.hasContent&&s.data||null)}catch(R){if(c)throw R}},abort:function(){c&&c()}}}),l.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return l.globalEval(s),s}}}),l.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),l.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var c,h;return{send:function(d,m){c=l("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",h=function(y){c.remove(),h=null,y&&m(y.type==="error"?404:200,y.type)}),Y.head.appendChild(c[0])},abort:function(){h&&h()}}}});var ns=[],qn=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=ns.pop()||l.expando+"_"+gn.guid++;return this[s]=!0,s}}),l.ajaxPrefilter("json jsonp",function(s,c,h){var d,m,y,E=s.jsonp!==!1&&(qn.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&qn.test(s.data)&&"data");if(E||s.dataTypes[0]==="jsonp")return d=s.jsonpCallback=Q(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,E?s[E]=s[E].replace(qn,"$1"+d):s.jsonp!==!1&&(s.url+=(Ki.test(s.url)?"&":"?")+s.jsonp+"="+d),s.converters["script json"]=function(){return y||l.error(d+" was not called"),y[0]},s.dataTypes[0]="json",m=e[d],e[d]=function(){y=arguments},h.always(function(){m===void 0?l(e).removeProp(d):e[d]=m,s[d]&&(s.jsonpCallback=c.jsonpCallback,ns.push(d)),y&&Q(m)&&m(y[0]),y=m=void 0}),"script"}),W.createHTMLDocument=(function(){var s=Y.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2})(),l.parseHTML=function(s,c,h){if(typeof s!="string")return[];typeof c=="boolean"&&(h=c,c=!1);var d,m,y;return c||(W.createHTMLDocument?(c=Y.implementation.createHTMLDocument(""),d=c.createElement("base"),d.href=Y.location.href,c.head.appendChild(d)):c=Y),m=Ai.exec(s),y=!h&&[],m?[c.createElement(m[1])]:(m=Bs([s],c,y),y&&y.length&&l(y).remove(),l.merge([],m.childNodes))},l.fn.load=function(s,c,h){var d,m,y,E=this,R=s.indexOf(" ");return R>-1&&(d=Gt(s.slice(R)),s=s.slice(0,R)),Q(c)?(h=c,c=void 0):c&&typeof c=="object"&&(m="POST"),E.length>0&&l.ajax({url:s,type:m||"GET",dataType:"html",data:c}).done(function(b){y=arguments,E.html(d?l("<div>").append(l.parseHTML(b)).find(d):b)}).always(h&&function(b,D){E.each(function(){h.apply(this,y||[b.responseText,D,b])})}),this},l.expr.pseudos.animated=function(s){return l.grep(l.timers,function(c){return s===c.elem}).length},l.offset={setOffset:function(s,c,h){var d,m,y,E,R,b,D,q=l.css(s,"position"),B=l(s),U={};q==="static"&&(s.style.position="relative"),R=B.offset(),y=l.css(s,"top"),b=l.css(s,"left"),D=(q==="absolute"||q==="fixed")&&(y+b).indexOf("auto")>-1,D?(d=B.position(),E=d.top,m=d.left):(E=parseFloat(y)||0,m=parseFloat(b)||0),Q(c)&&(c=c.call(s,h,l.extend({},R))),c.top!=null&&(U.top=c.top-R.top+E),c.left!=null&&(U.left=c.left-R.left+m),"using"in c?c.using.call(s,U):B.css(U)}},l.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){l.offset.setOffset(this,s,m)});var c,h,d=this[0];if(d)return d.getClientRects().length?(c=d.getBoundingClientRect(),h=d.ownerDocument.defaultView,{top:c.top+h.pageYOffset,left:c.left+h.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,c,h,d=this[0],m={top:0,left:0};if(l.css(d,"position")==="fixed")c=d.getBoundingClientRect();else{for(c=this.offset(),h=d.ownerDocument,s=d.offsetParent||h.documentElement;s&&(s===h.body||s===h.documentElement)&&l.css(s,"position")==="static";)s=s.parentNode;s&&s!==d&&s.nodeType===1&&(m=l(s).offset(),m.top+=l.css(s,"borderTopWidth",!0),m.left+=l.css(s,"borderLeftWidth",!0))}return{top:c.top-m.top-l.css(d,"marginTop",!0),left:c.left-m.left-l.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&l.css(s,"position")==="static";)s=s.offsetParent;return s||Vt})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,c){var h=c==="pageYOffset";l.fn[s]=function(d){return At(this,function(m,y,E){var R;if(J(m)?R=m:m.nodeType===9&&(R=m.defaultView),E===void 0)return R?R[c]:m[y];R?R.scrollTo(h?R.pageXOffset:E,h?E:R.pageYOffset):m[y]=E},s,d,arguments.length)}}),l.each(["top","left"],function(s,c){l.cssHooks[c]=zr(W.pixelPosition,function(h,d){if(d)return d=Et(h,c),ji.test(d)?l(h).position()[c]+"px":d})}),l.each({Height:"height",Width:"width"},function(s,c){l.each({padding:"inner"+s,content:c,"":"outer"+s},function(h,d){l.fn[d]=function(m,y){var E=arguments.length&&(h||typeof m!="boolean"),R=h||(m===!0||y===!0?"margin":"border");return At(this,function(b,D,q){var B;return J(b)?d.indexOf("outer")===0?b["inner"+s]:b.document.documentElement["client"+s]:b.nodeType===9?(B=b.documentElement,Math.max(b.body["scroll"+s],B["scroll"+s],b.body["offset"+s],B["offset"+s],B["client"+s])):q===void 0?l.css(b,D,R):l.style(b,D,q,R)},c,E?m:void 0,E)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,c){l.fn[c]=function(h){return this.on(c,h)}}),l.fn.extend({bind:function(s,c,h){return this.on(s,null,c,h)},unbind:function(s,c){return this.off(s,null,c)},delegate:function(s,c,h,d){return this.on(c,s,h,d)},undelegate:function(s,c,h){return arguments.length===1?this.off(s,"**"):this.off(c,s||"**",h)},hover:function(s,c){return this.on("mouseenter",s).on("mouseleave",c||s)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,c){l.fn[c]=function(h,d){return arguments.length>0?this.on(c,null,h,d):this.trigger(c)}});var va=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(s,c){var h,d,m;if(typeof c=="string"&&(h=s[c],c=s,s=h),!!Q(s))return d=a.call(arguments,2),m=function(){return s.apply(c||this,d.concat(a.call(arguments)))},m.guid=s.guid=s.guid||l.guid++,m},l.holdReady=function(s){s?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=S,l.isFunction=Q,l.isWindow=J,l.camelCase=St,l.type=xe,l.now=Date.now,l.isNumeric=function(s){var c=l.type(s);return(c==="number"||c==="string")&&!isNaN(s-parseFloat(s))},l.trim=function(s){return s==null?"":(s+"").replace(va,"$1")};var io=e.jQuery,br=e.$;return l.noConflict=function(s){return e.$===l&&(e.$=br),s&&e.jQuery===l&&(e.jQuery=io),l},typeof t>"u"&&(e.jQuery=e.$=l),l})})(mo)),mo.exports}var Ad=bd();const se=wd(Ad),Sd=()=>{};var su={};const Ml=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Cd=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],u=n[t++],p=n[t++],_=((i&7)<<18|(a&63)<<12|(u&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},Fl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],u=i+1<n.length,p=u?n[i+1]:0,_=i+2<n.length,v=_?n[i+2]:0,I=a>>2,P=(a&3)<<4|p>>4;let L=(p&15)<<2|v>>6,K=v&63;_||(K=64,u||(L=64)),r.push(t[I],t[P],t[L],t[K])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ml(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Cd(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],p=i<n.length?t[n.charAt(i)]:0;++i;const v=i<n.length?t[n.charAt(i)]:64;++i;const P=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||p==null||v==null||P==null)throw new Rd;const L=a<<2|p>>4;if(r.push(L),v!==64){const K=p<<4&240|v>>2;if(r.push(K),P!==64){const W=v<<6&192|P;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Rd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pd=function(n){const e=Ml(n);return Fl.encodeByteArray(e,!0)},Co=function(n){return Pd(n).replace(/\./g,"")},Ul=function(n){try{return Fl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const xd=()=>kd().__FIREBASE_DEFAULTS__,Dd=()=>{if(typeof process>"u"||typeof su>"u")return;const n=su.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Nd=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ul(n[1]);return e&&JSON.parse(e)},Wo=()=>{try{return Sd()||xd()||Dd()||Nd()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jl=n=>Wo()?.emulatorHosts?.[n],Vd=n=>{const e=jl(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ql=()=>Wo()?.config,Bl=n=>Wo()?.[`_${n}`];class Od{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function mi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $l(n){return(await fetch(n,{credentials:"include"})).ok}function Ld(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Co(JSON.stringify(t)),Co(JSON.stringify(u)),""].join(".")}const hs={};function Md(){const n={prod:[],emulator:[]};for(const e of Object.keys(hs))hs[e]?n.emulator.push(e):n.prod.push(e);return n}function Fd(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ou=!1;function Hl(n,e){if(typeof window>"u"||typeof document>"u"||!mi(window.location.host)||hs[n]===e||hs[n]||ou)return;hs[n]=e;function t(L){return`__firebase__banner__${L}`}const r="__firebase__banner",a=Md().prod.length>0;function u(){const L=document.getElementById(r);L&&L.remove()}function p(L){L.style.display="flex",L.style.background="#7faaf0",L.style.position="fixed",L.style.bottom="5px",L.style.left="5px",L.style.padding=".5em",L.style.borderRadius="5px",L.style.alignItems="center"}function _(L,K){L.setAttribute("width","24"),L.setAttribute("id",K),L.setAttribute("height","24"),L.setAttribute("viewBox","0 0 24 24"),L.setAttribute("fill","none"),L.style.marginLeft="-6px"}function v(){const L=document.createElement("span");return L.style.cursor="pointer",L.style.marginLeft="16px",L.style.fontSize="24px",L.innerHTML=" &times;",L.onclick=()=>{ou=!0,u()},L}function I(L,K){L.setAttribute("id",K),L.innerText="Learn more",L.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",L.setAttribute("target","__blank"),L.style.paddingLeft="5px",L.style.textDecoration="underline"}function P(){const L=Fd(r),K=t("text"),W=document.getElementById(K)||document.createElement("span"),Q=t("learnmore"),J=document.getElementById(Q)||document.createElement("a"),Y=t("preprendIcon"),ve=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(L.created){const Ee=L.element;p(Ee),I(J,Q);const xe=v();_(ve,Y),Ee.append(ve,W,J,xe),document.body.appendChild(Ee)}a?(W.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",K)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ud(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function jd(){const n=Wo()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bd(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $d(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hd(){const n=gt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function zd(){return!jd()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wd(){try{return typeof indexedDB=="object"}catch{return!1}}function Gd(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const Kd="FirebaseError";class An extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Kd,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cs.prototype.create)}}class Cs{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?Qd(a,r):"Error",p=`${this.serviceName}: ${u} (${i}).`;return new An(i,p,r)}}function Qd(n,e){return n.replace(Xd,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xd=/\{\$([^}]+)}/g;function Yd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],u=e[i];if(au(a)&&au(u)){if(!Pr(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function au(n){return n!==null&&typeof n=="object"}function Rs(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function is(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ss(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Jd(n,e){const t=new Zd(n,e);return t.subscribe.bind(t)}class Zd{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ep(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Aa),i.error===void 0&&(i.error=Aa),i.complete===void 0&&(i.complete=Aa);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ep(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Aa(){}function at(n){return n&&n._delegate?n._delegate:n}class kr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sr="[DEFAULT]";class tp{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Od;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rp(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);r===p&&u.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:np(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function np(n){return n===Sr?void 0:n}function rp(n){return n.instantiationMode==="EAGER"}class ip{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const sp={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},op=be.INFO,ap={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},cp=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=ap[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uc{constructor(e){this.name=e,this._logLevel=op,this._logHandler=cp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const up=(n,e)=>e.some(t=>n instanceof t);let cu,uu;function lp(){return cu||(cu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hp(){return uu||(uu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zl=new WeakMap,Fa=new WeakMap,Wl=new WeakMap,Sa=new WeakMap,lc=new WeakMap;function fp(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Xn(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&zl.set(t,n)}).catch(()=>{}),lc.set(e,n),e}function dp(n){if(Fa.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Fa.set(n,e)}let Ua={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fa.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Wl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pp(n){Ua=n(Ua)}function gp(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ca(this),e,...t);return Wl.set(r,e.sort?e.sort():[e]),Xn(r)}:hp().includes(n)?function(...e){return n.apply(Ca(this),e),Xn(zl.get(this))}:function(...e){return Xn(n.apply(Ca(this),e))}}function mp(n){return typeof n=="function"?gp(n):(n instanceof IDBTransaction&&dp(n),up(n,lp())?new Proxy(n,Ua):n)}function Xn(n){if(n instanceof IDBRequest)return fp(n);if(Sa.has(n))return Sa.get(n);const e=mp(n);return e!==n&&(Sa.set(n,e),lc.set(e,n)),e}const Ca=n=>lc.get(n);function yp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),p=Xn(u);return r&&u.addEventListener("upgradeneeded",_=>{r(Xn(u.result),_.oldVersion,_.newVersion,Xn(u.transaction),_)}),t&&u.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),p.then(_=>{a&&_.addEventListener("close",()=>a()),i&&_.addEventListener("versionchange",v=>i(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const _p=["get","getKey","getAll","getAllKeys","count"],vp=["put","add","delete","clear"],Ra=new Map;function lu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ra.get(e))return Ra.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=vp.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_p.includes(t)))return;const a=async function(u,...p){const _=this.transaction(u,i?"readwrite":"readonly");let v=_.store;return r&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),i&&_.done]))[0]};return Ra.set(e,a),a}pp(n=>({...n,get:(e,t,r)=>lu(e,t)||n.get(e,t,r),has:(e,t)=>!!lu(e,t)||n.has(e,t)}));class Ep{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Tp(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Tp(n){return n.getComponent()?.type==="VERSION"}const ja="@firebase/app",hu="0.14.5";const Tn=new uc("@firebase/app"),wp="@firebase/app-compat",Ip="@firebase/analytics-compat",bp="@firebase/analytics",Ap="@firebase/app-check-compat",Sp="@firebase/app-check",Cp="@firebase/auth",Rp="@firebase/auth-compat",Pp="@firebase/database",kp="@firebase/data-connect",xp="@firebase/database-compat",Dp="@firebase/functions",Np="@firebase/functions-compat",Vp="@firebase/installations",Op="@firebase/installations-compat",Lp="@firebase/messaging",Mp="@firebase/messaging-compat",Fp="@firebase/performance",Up="@firebase/performance-compat",jp="@firebase/remote-config",qp="@firebase/remote-config-compat",Bp="@firebase/storage",$p="@firebase/storage-compat",Hp="@firebase/firestore",zp="@firebase/ai",Wp="@firebase/firestore-compat",Gp="firebase",Kp="12.5.0";const qa="[DEFAULT]",Qp={[ja]:"fire-core",[wp]:"fire-core-compat",[bp]:"fire-analytics",[Ip]:"fire-analytics-compat",[Sp]:"fire-app-check",[Ap]:"fire-app-check-compat",[Cp]:"fire-auth",[Rp]:"fire-auth-compat",[Pp]:"fire-rtdb",[kp]:"fire-data-connect",[xp]:"fire-rtdb-compat",[Dp]:"fire-fn",[Np]:"fire-fn-compat",[Vp]:"fire-iid",[Op]:"fire-iid-compat",[Lp]:"fire-fcm",[Mp]:"fire-fcm-compat",[Fp]:"fire-perf",[Up]:"fire-perf-compat",[jp]:"fire-rc",[qp]:"fire-rc-compat",[Bp]:"fire-gcs",[$p]:"fire-gcs-compat",[Hp]:"fire-fst",[Wp]:"fire-fst-compat",[zp]:"fire-vertex","fire-js":"fire-js",[Gp]:"fire-js-all"};const Ro=new Map,Xp=new Map,Ba=new Map;function fu(n,e){try{n.container.addComponent(e)}catch(t){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ci(n){const e=n.name;if(Ba.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,n);for(const t of Ro.values())fu(t,n);for(const t of Xp.values())fu(t,n);return!0}function hc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pt(n){return n==null?!1:n.settings!==void 0}const Yp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yn=new Cs("app","Firebase",Yp);class Jp{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}const yi=Kp;function Gl(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:qa,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Yn.create("bad-app-name",{appName:String(i)});if(t||(t=ql()),!t)throw Yn.create("no-options");const a=Ro.get(i);if(a){if(Pr(t,a.options)&&Pr(r,a.config))return a;throw Yn.create("duplicate-app",{appName:i})}const u=new ip(i);for(const _ of Ba.values())u.addComponent(_);const p=new Jp(t,r,u);return Ro.set(i,p),p}function Kl(n=qa){const e=Ro.get(n);if(!e&&n===qa&&ql())return Gl();if(!e)throw Yn.create("no-app",{appName:n});return e}function Jn(n,e,t){let r=Qp[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(u.join(" "));return}ci(new kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Zp="firebase-heartbeat-database",eg=1,ys="firebase-heartbeat-store";let Pa=null;function Ql(){return Pa||(Pa=yp(Zp,eg,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ys)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yn.create("idb-open",{originalErrorMessage:n.message})})),Pa}async function tg(n){try{const t=(await Ql()).transaction(ys),r=await t.objectStore(ys).get(Xl(n));return await t.done,r}catch(e){if(e instanceof An)Tn.warn(e.message);else{const t=Yn.create("idb-get",{originalErrorMessage:e?.message});Tn.warn(t.message)}}}async function du(n,e){try{const r=(await Ql()).transaction(ys,"readwrite");await r.objectStore(ys).put(e,Xl(n)),await r.done}catch(t){if(t instanceof An)Tn.warn(t.message);else{const r=Yn.create("idb-set",{originalErrorMessage:t?.message});Tn.warn(r.message)}}}function Xl(n){return`${n.name}!${n.options.appId}`}const ng=1024,rg=30;class ig{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new og(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rg){const i=ag(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Tn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=pu(),{heartbeatsToSend:t,unsentEntries:r}=sg(this._heartbeatsCache.heartbeats),i=Co(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Tn.warn(e),""}}}function pu(){return new Date().toISOString().substring(0,10)}function sg(n,e=ng){const t=[];let r=n.slice();for(const i of n){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),gu(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class og{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wd()?Gd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return du(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return du(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gu(n){return Co(JSON.stringify({version:2,heartbeats:n})).length}function ag(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function cg(n){ci(new kr("platform-logger",e=>new Ep(e),"PRIVATE")),ci(new kr("heartbeat",e=>new ig(e),"PRIVATE")),Jn(ja,hu,n),Jn(ja,hu,"esm2020"),Jn("fire-js","")}cg("");var ug="firebase",lg="12.5.0";Jn(ug,lg,"app");function Yl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hg=Yl,Jl=new Cs("auth","Firebase",Yl());const Po=new uc("@firebase/auth");function fg(n,...e){Po.logLevel<=be.WARN&&Po.warn(`Auth (${yi}): ${n}`,...e)}function yo(n,...e){Po.logLevel<=be.ERROR&&Po.error(`Auth (${yi}): ${n}`,...e)}function qt(n,...e){throw fc(n,...e)}function Zt(n,...e){return fc(n,...e)}function Zl(n,e,t){const r={...hg(),[e]:t};return new Cs("auth","Firebase",r).create(e,{appName:n.name})}function vn(n){return Zl(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Jl.create(n,...e)}function le(n,e,...t){if(!n)throw fc(e,...t)}function yn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yo(e),new Error(e)}function wn(n,e){n||yn(e)}function $a(){return typeof self<"u"&&self.location?.href||""}function dg(){return mu()==="http:"||mu()==="https:"}function mu(){return typeof self<"u"&&self.location?.protocol||null}function pg(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dg()||Bd()||"connection"in navigator)?navigator.onLine:!0}function gg(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Ps{constructor(e,t){this.shortDelay=e,this.longDelay=t,wn(t>e,"Short delay should be less than long delay!"),this.isMobile=Ud()||$d()}get(){return pg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dc(n,e){wn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class eh{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_g=new Ps(3e4,6e4);function Sn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function cn(n,e,t,r,i={}){return th(n,i,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const p=Rs({key:n.config.apiKey,...u}).slice(1),_=await n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:_,...a};return qd()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&mi(n.emulatorConfig.host)&&(v.credentials="include"),eh.fetch()(await nh(n,n.config.apiHost,t,p),v)})}async function th(n,e,t){n._canInitEmulator=!1;const r={...mg,...e};try{const i=new Eg(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw uo(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const p=a.ok?u.errorMessage:u.error.message,[_,v]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw uo(n,"credential-already-in-use",u);if(_==="EMAIL_EXISTS")throw uo(n,"email-already-in-use",u);if(_==="USER_DISABLED")throw uo(n,"user-disabled",u);const I=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Zl(n,I,v);qt(n,I)}}catch(i){if(i instanceof An)throw i;qt(n,"network-request-failed",{message:String(i)})}}async function ks(n,e,t,r,i={}){const a=await cn(n,e,t,r,i);return"mfaPendingCredential"in a&&qt(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function nh(n,e,t,r){const i=`${e}${t}?${r}`,a=n,u=a.config.emulator?dc(n.config,i):`${n.config.apiScheme}://${i}`;return yg.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function vg(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Eg{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zt(this.auth,"network-request-failed")),_g.get())})}}function uo(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Zt(n,e,r);return i.customData._tokenResponse=t,i}function yu(n){return n!==void 0&&n.enterprise!==void 0}class Tg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vg(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wg(n,e){return cn(n,"GET","/v2/recaptchaConfig",Sn(n,e))}async function Ig(n,e){return cn(n,"POST","/v1/accounts:delete",e)}async function ko(n,e){return cn(n,"POST","/v1/accounts:lookup",e)}function fs(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bg(n,e=!1){const t=at(n),r=await t.getIdToken(e),i=pc(r);le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a?.sign_in_provider;return{claims:i,token:r,authTime:fs(ka(i.auth_time)),issuedAtTime:fs(ka(i.iat)),expirationTime:fs(ka(i.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function ka(n){return Number(n)*1e3}function pc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return yo("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ul(t);return i?JSON.parse(i):(yo("Failed to decode base64 JWT payload"),null)}catch(i){return yo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function _u(n){const e=pc(n);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ui(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof An&&Ag(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Ag({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Sg{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ha{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fs(this.lastLoginAt),this.creationTime=fs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xo(n){const e=n.auth,t=await n.getIdToken(),r=await ui(n,ko(e,{idToken:t}));le(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?rh(i.providerUserInfo):[],u=Rg(n.providerData,a),p=n.isAnonymous,_=!(n.email&&i.passwordHash)&&!u?.length,v=p?_:!1,I={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Ha(i.createdAt,i.lastLoginAt),isAnonymous:v};Object.assign(n,I)}async function Cg(n){const e=at(n);await xo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Rg(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rh(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Pg(n,e){const t=await th(n,{},async()=>{const r=Rs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=await nh(n,i,"/v1/token",`key=${a}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:r};return n.emulatorConfig&&mi(n.emulatorConfig.host)&&(_.credentials="include"),eh.fetch()(u,_)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kg(n,e){return cn(n,"POST","/v2/accounts:revokeToken",Sn(n,e))}class ri{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_u(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){le(e.length!==0,"internal-error");const t=_u(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await Pg(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,u=new ri;return r&&(le(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),a&&(le(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ri,this.toJSON())}_performRefresh(){return yn("not implemented")}}function Hn(n,e){le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ut{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Sg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ha(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ui(this,this.stsTokenManager.getToken(this.auth,e));return le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bg(this,e)}reload(){return Cg(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ut({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(vn(this.auth));const e=await this.getIdToken();return await ui(this,Ig(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,_=t._redirectEventId??void 0,v=t.createdAt??void 0,I=t.lastLoginAt??void 0,{uid:P,emailVerified:L,isAnonymous:K,providerData:W,stsTokenManager:Q}=t;le(P&&Q,e,"internal-error");const J=ri.fromJSON(this.name,Q);le(typeof P=="string",e,"internal-error"),Hn(r,e.name),Hn(i,e.name),le(typeof L=="boolean",e,"internal-error"),le(typeof K=="boolean",e,"internal-error"),Hn(a,e.name),Hn(u,e.name),Hn(p,e.name),Hn(_,e.name),Hn(v,e.name),Hn(I,e.name);const Y=new Ut({uid:P,auth:e,email:i,emailVerified:L,displayName:r,isAnonymous:K,photoURL:u,phoneNumber:a,tenantId:p,stsTokenManager:J,createdAt:v,lastLoginAt:I});return W&&Array.isArray(W)&&(Y.providerData=W.map(ve=>({...ve}))),_&&(Y._redirectEventId=_),Y}static async _fromIdTokenResponse(e,t,r=!1){const i=new ri;i.updateFromServerResponse(t);const a=new Ut({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xo(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];le(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?rh(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!a?.length,p=new ri;p.updateFromIdToken(r);const _=new Ut({uid:i.localId,auth:e,stsTokenManager:p,isAnonymous:u}),v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ha(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(_,v),_}}const vu=new Map;function _n(n){wn(n instanceof Function,"Expected a class definition");let e=vu.get(n);return e?(wn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vu.set(n,e),e)}class ih{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ih.type="NONE";const Eu=ih;function _o(n,e,t){return`firebase:${n}:${e}:${t}`}class ii{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=_o(this.userKey,i.apiKey,a),this.fullPersistenceKey=_o("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ko(this.auth,{idToken:e}).catch(()=>{});return t?Ut._fromGetAccountInfoResponse(this.auth,t,e):null}return Ut._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ii(_n(Eu),e,r);const i=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let a=i[0]||_n(Eu);const u=_o(r,e.config.apiKey,e.name);let p=null;for(const v of t)try{const I=await v._get(u);if(I){let P;if(typeof I=="string"){const L=await ko(e,{idToken:I}).catch(()=>{});if(!L)break;P=await Ut._fromGetAccountInfoResponse(e,L,I)}else P=Ut._fromJSON(e,I);v!==a&&(p=P),a=v;break}}catch{}const _=i.filter(v=>v._shouldAllowMigration);return!a._shouldAllowMigration||!_.length?new ii(a,e,r):(a=_[0],p&&await a._set(u,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==a)try{await v._remove(u)}catch{}})),new ii(a,e,r))}}function Tu(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ch(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lh(e))return"Blackberry";if(hh(e))return"Webos";if(oh(e))return"Safari";if((e.includes("chrome/")||ah(e))&&!e.includes("edge/"))return"Chrome";if(uh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function sh(n=gt()){return/firefox\//i.test(n)}function oh(n=gt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ah(n=gt()){return/crios\//i.test(n)}function ch(n=gt()){return/iemobile/i.test(n)}function uh(n=gt()){return/android/i.test(n)}function lh(n=gt()){return/blackberry/i.test(n)}function hh(n=gt()){return/webos/i.test(n)}function gc(n=gt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xg(n=gt()){return gc(n)&&!!window.navigator?.standalone}function Dg(){return Hd()&&document.documentMode===10}function fh(n=gt()){return gc(n)||uh(n)||hh(n)||lh(n)||/windows phone/i.test(n)||ch(n)}function dh(n,e=[]){let t;switch(n){case"Browser":t=Tu(gt());break;case"Worker":t=`${Tu(gt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yi}/${r}`}class Ng{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,p)=>{try{const _=e(a);u(_)}catch(_){p(_)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Vg(n,e={}){return cn(n,"GET","/v2/passwordPolicy",Sn(n,e))}const Og=6;class Lg{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Og,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Mg{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wu(this),this.idTokenSubscription=new wu(this),this.beforeStateQueue=new Ng(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jl,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_n(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ii.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ko(this,{idToken:e}),r=await Ut._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!a||a===u)&&p?.user&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gg()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(vn(this));const t=e?at(e):null;return t&&le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(vn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(vn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vg(this),t=new Lg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cs("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kg(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_n(e)||this._popupRedirectResolver;le(t,this,"argument-error"),this.redirectPersistenceManager=await ii.create(this,[_n(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(p,this,"internal-error"),p.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,r,i);return()=>{u=!0,_()}}else{const _=e.addObserver(t);return()=>{u=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fg(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cr(n){return at(n)}class wu{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jd(t=>this.observer=t)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Go={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fg(n){Go=n}function ph(n){return Go.loadJS(n)}function Ug(){return Go.recaptchaEnterpriseScript}function jg(){return Go.gapiScript}function qg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Bg{constructor(){this.enterprise=new $g}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $g{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Hg="recaptcha-enterprise",gh="NO_RECAPTCHA";class zg{constructor(e){this.type=Hg,this.auth=cr(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,p)=>{wg(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_=>{if(_.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new Tg(_);return a.tenantId==null?a._agentRecaptchaConfig=v:a._tenantRecaptchaConfigs[a.tenantId]=v,u(v.siteKey)}}).catch(_=>{p(_)})})}function i(a,u,p){const _=window.grecaptcha;yu(_)?_.enterprise.ready(()=>{_.enterprise.execute(a,{action:e}).then(v=>{u(v)}).catch(()=>{u(gh)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Bg().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(p=>{if(!t&&yu(window.grecaptcha))i(p,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let _=Ug();_.length!==0&&(_+=p),ph(_).then(()=>{i(p,a,u)}).catch(v=>{u(v)})}}).catch(p=>{u(p)})})}}async function Iu(n,e,t,r=!1,i=!1){const a=new zg(n);let u;if(i)u=gh;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const _=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:v,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const _=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:_,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Do(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Iu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Iu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}function Wg(n,e){const t=hc(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Pr(a,e??{}))return i;qt(i,"already-initialized")}return t.initialize({options:e})}function Gg(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_n);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Kg(n,e,t){const r=cr(n);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=mh(e),{host:u,port:p}=Qg(e),_=p===null?"":`:${p}`,v={url:`${a}//${u}${_}/`},I=Object.freeze({host:u,port:p,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Pr(v,r.config.emulator)&&Pr(I,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=I,r.settings.appVerificationDisabledForTesting=!0,mi(u)?($l(`${a}//${u}${_}`),Hl("Auth",!0)):Xg()}function mh(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Qg(n){const e=mh(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:bu(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:bu(u)}}}function bu(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Xg(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class mc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yn("not implemented")}_getIdTokenResponse(e){return yn("not implemented")}_linkToIdToken(e,t){return yn("not implemented")}_getReauthenticationResolver(e){return yn("not implemented")}}async function Yg(n,e){return cn(n,"POST","/v1/accounts:signUp",e)}async function Jg(n,e){return ks(n,"POST","/v1/accounts:signInWithPassword",Sn(n,e))}async function yh(n,e){return cn(n,"POST","/v1/accounts:sendOobCode",Sn(n,e))}async function Zg(n,e){return yh(n,e)}async function em(n,e){return yh(n,e)}async function tm(n,e){return ks(n,"POST","/v1/accounts:signInWithEmailLink",Sn(n,e))}async function nm(n,e){return ks(n,"POST","/v1/accounts:signInWithEmailLink",Sn(n,e))}class _s extends mc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _s(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new _s(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Do(e,t,"signInWithPassword",Jg);case"emailLink":return tm(e,{email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Do(e,r,"signUpPassword",Yg);case"emailLink":return nm(e,{idToken:t,email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function si(n,e){return ks(n,"POST","/v1/accounts:signInWithIdp",Sn(n,e))}const rm="http://localhost";class xr extends mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const u=new xr(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return si(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,si(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,si(e,t)}buildRequest(){const e={requestUri:rm,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rs(t)}return e}}function im(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sm(n){const e=is(ss(n)).link,t=e?is(ss(e)).deep_link_id:null,r=is(ss(n)).deep_link_id;return(r?is(ss(r)).link:null)||r||t||e||n}class yc{constructor(e){const t=is(ss(e)),r=t.apiKey??null,i=t.oobCode??null,a=im(t.mode??null);le(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=sm(e);try{return new yc(t)}catch{return null}}}class _i{constructor(){this.providerId=_i.PROVIDER_ID}static credential(e,t){return _s._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=yc.parseLink(t);return le(r,"argument-error"),_s._fromEmailAndCode(e,r.code,r.tenantId)}}_i.PROVIDER_ID="password";_i.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _h{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xs extends _h{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zn extends xs{constructor(){super("facebook.com")}static credential(e){return xr._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";zn.PROVIDER_ID="facebook.com";class Wn extends xs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xr._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Wn.credential(t,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";class Gn extends xs{constructor(){super("github.com")}static credential(e){return xr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.GITHUB_SIGN_IN_METHOD="github.com";Gn.PROVIDER_ID="github.com";class Kn extends xs{constructor(){super("twitter.com")}static credential(e,t){return xr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Kn.credential(t,r)}catch{return null}}}Kn.TWITTER_SIGN_IN_METHOD="twitter.com";Kn.PROVIDER_ID="twitter.com";async function om(n,e){return ks(n,"POST","/v1/accounts:signUp",Sn(n,e))}class Dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ut._fromIdTokenResponse(e,r,i),u=Au(r);return new Dr({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Au(r);return new Dr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Au(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class No extends An{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,No.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new No(e,t,r,i)}}function vh(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?No._fromErrorAndOperation(n,a,e,r):a})}async function am(n,e,t=!1){const r=await ui(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dr._forOperation(n,"link",r)}async function cm(n,e,t=!1){const{auth:r}=n;if(Pt(r.app))return Promise.reject(vn(r));const i="reauthenticate";try{const a=await ui(n,vh(r,i,e,n),t);le(a.idToken,r,"internal-error");const u=pc(a.idToken);le(u,r,"internal-error");const{sub:p}=u;return le(n.uid===p,r,"user-mismatch"),Dr._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&qt(r,"user-mismatch"),a}}async function Eh(n,e,t=!1){if(Pt(n.app))return Promise.reject(vn(n));const r="signIn",i=await vh(n,r,e),a=await Dr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function um(n,e){return Eh(cr(n),e)}async function Th(n){const e=cr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XE(n,e,t){const r=cr(n);await Do(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",em)}async function YE(n,e,t){if(Pt(n.app))return Promise.reject(vn(n));const r=cr(n),u=await Do(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",om).catch(_=>{throw _.code==="auth/password-does-not-meet-requirements"&&Th(n),_}),p=await Dr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(p.user),p}function JE(n,e,t){return Pt(n.app)?Promise.reject(vn(n)):um(at(n),_i.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Th(n),r})}async function ZE(n,e){const t=at(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await Zg(t.auth,i);a!==n.email&&await n.reload()}async function lm(n,e){return cn(n,"POST","/v1/accounts:update",e)}async function eT(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=at(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ui(r,lm(r.auth,a));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const p=r.providerData.find(({providerId:_})=>_==="password");p&&(p.displayName=r.displayName,p.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function hm(n,e,t,r){return at(n).onIdTokenChanged(e,t,r)}function fm(n,e,t){return at(n).beforeAuthStateChanged(e,t)}function tT(n,e,t,r){return at(n).onAuthStateChanged(e,t,r)}function nT(n){return at(n).signOut()}const Vo="__sak";class wh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dm=1e3,pm=10;class Ih extends wh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,_)=>{this.notifyListeners(u,_)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);Dg()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pm):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},dm)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ih.type="LOCAL";const gm=Ih;class bh extends wh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bh.type="SESSION";const Ah=bh;function mm(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Ko{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Ko(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const p=Array.from(u).map(async v=>v(t.origin,a)),_=await mm(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ko.receivers=[];function _c(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class ym{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((p,_)=>{const v=_c("",20);i.port1.start();const I=setTimeout(()=>{_(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(P){const L=P;if(L.data.eventId===v)switch(L.data.status){case"ack":clearTimeout(I),a=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),p(L.data.response);break;default:clearTimeout(I),clearTimeout(a),_(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function en(){return window}function _m(n){en().location.href=n}function Sh(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function vm(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Em(){return navigator?.serviceWorker?.controller||null}function Tm(){return Sh()?self:null}const Ch="firebaseLocalStorageDb",wm=1,Oo="firebaseLocalStorage",Rh="fbase_key";class Ds{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qo(n,e){return n.transaction([Oo],e?"readwrite":"readonly").objectStore(Oo)}function Im(){const n=indexedDB.deleteDatabase(Ch);return new Ds(n).toPromise()}function za(){const n=indexedDB.open(Ch,wm);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Oo,{keyPath:Rh})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Oo)?e(r):(r.close(),await Im(),e(await za()))})})}async function Su(n,e,t){const r=Qo(n,!0).put({[Rh]:e,value:t});return new Ds(r).toPromise()}async function bm(n,e){const t=Qo(n,!1).get(e),r=await new Ds(t).toPromise();return r===void 0?null:r.value}function Cu(n,e){const t=Qo(n,!0).delete(e);return new Ds(t).toPromise()}const Am=800,Sm=3;class Ph{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await za(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Sm)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ko._getInstance(Tm()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vm(),!this.activeServiceWorker)return;this.sender=new ym(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Em()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await za();return await Su(e,Vo,"1"),await Cu(e,Vo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Su(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>bm(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Cu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Qo(i,!1).getAll();return new Ds(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Am)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ph.type="LOCAL";const Cm=Ph;new Ps(3e4,6e4);function Rm(n,e){return e?_n(e):(le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class vc extends mc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,t){return si(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pm(n){return Eh(n.auth,new vc(n),n.bypassAuthState)}function km(n){const{auth:e,user:t}=n;return le(t,e,"internal-error"),cm(t,new vc(n),n.bypassAuthState)}async function xm(n){const{auth:e,user:t}=n;return le(t,e,"internal-error"),am(t,new vc(n),n.bypassAuthState)}class kh{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:u,type:p}=e;if(u){this.reject(u);return}const _={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pm;case"linkViaPopup":case"linkViaRedirect":return xm;case"reauthViaPopup":case"reauthViaRedirect":return km;default:qt(this.auth,"internal-error")}}resolve(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dm=new Ps(2e3,1e4);class ni extends kh{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ni.currentPopupAction&&ni.currentPopupAction.cancel(),ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){wn(this.filter.length===1,"Popup operations only handle one event");const e=_c();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Dm.get())};e()}}ni.currentPopupAction=null;const Nm="pendingRedirect",vo=new Map;class Vm extends kh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vo.get(this.auth._key());if(!e){try{const r=await Om(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vo.set(this.auth._key(),e)}return this.bypassAuthState||vo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Om(n,e){const t=Fm(e),r=Mm(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Lm(n,e){vo.set(n._key(),e)}function Mm(n){return _n(n._redirectPersistence)}function Fm(n){return _o(Nm,n.config.apiKey,n.name)}async function Um(n,e,t=!1){if(Pt(n.app))return Promise.reject(vn(n));const r=cr(n),i=Rm(r,e),u=await new Vm(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const jm=600*1e3;class qm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bm(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!xh(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Zt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jm&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ru(e))}saveEventToCache(e){this.cachedEventUids.add(Ru(e)),this.lastProcessedEventTime=Date.now()}}function Ru(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xh({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Bm(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xh(n);default:return!1}}async function $m(n,e={}){return cn(n,"GET","/v1/projects",e)}const Hm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zm=/^https?/;async function Wm(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $m(n);for(const t of e)try{if(Gm(t))return}catch{}qt(n,"unauthorized-domain")}function Gm(n){const e=$a(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!zm.test(t))return!1;if(Hm.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Km=new Ps(3e4,6e4);function Pu(){const n=en().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Qm(n){return new Promise((e,t)=>{function r(){Pu(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pu(),t(Zt(n,"network-request-failed"))},timeout:Km.get()})}if(en().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(en().gapi?.load)r();else{const i=qg("iframefcb");return en()[i]=()=>{gapi.load?r():t(Zt(n,"network-request-failed"))},ph(`${jg()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Eo=null,e})}let Eo=null;function Xm(n){return Eo=Eo||Qm(n),Eo}const Ym=new Ps(5e3,15e3),Jm="__/auth/iframe",Zm="emulator/auth/iframe",ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ty=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ny(n){const e=n.config;le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dc(e,Zm):`https://${n.config.authDomain}/${Jm}`,r={apiKey:e.apiKey,appName:n.name,v:yi},i=ty.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Rs(r).slice(1)}`}async function ry(n){const e=await Xm(n),t=en().gapi;return le(t,n,"internal-error"),e.open({where:document.body,url:ny(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ey,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=Zt(n,"network-request-failed"),p=en().setTimeout(()=>{a(u)},Ym.get());function _(){en().clearTimeout(p),i(r)}r.ping(_).then(_,()=>{a(u)})}))}const iy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sy=500,oy=600,ay="_blank",cy="http://localhost";class ku{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uy(n,e,t,r=sy,i=oy){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const _={...iy,width:r.toString(),height:i.toString(),top:a,left:u},v=gt().toLowerCase();t&&(p=ah(v)?ay:t),sh(v)&&(e=e||cy,_.scrollbars="yes");const I=Object.entries(_).reduce((L,[K,W])=>`${L}${K}=${W},`,"");if(xg(v)&&p!=="_self")return ly(e||"",p),new ku(null);const P=window.open(e||"",p,I);le(P,n,"popup-blocked");try{P.focus()}catch{}return new ku(P)}function ly(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const hy="__/auth/handler",fy="emulator/auth/handler",dy=encodeURIComponent("fac");async function xu(n,e,t,r,i,a){le(n.config.authDomain,n,"auth-domain-config-required"),le(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:yi,eventId:i};if(e instanceof _h){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Yd(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,P]of Object.entries({}))u[I]=P}if(e instanceof xs){const I=e.getScopes().filter(P=>P!=="");I.length>0&&(u.scopes=I.join(","))}n.tenantId&&(u.tid=n.tenantId);const p=u;for(const I of Object.keys(p))p[I]===void 0&&delete p[I];const _=await n._getAppCheckToken(),v=_?`#${dy}=${encodeURIComponent(_)}`:"";return`${py(n)}?${Rs(p).slice(1)}${v}`}function py({config:n}){return n.emulator?dc(n,fy):`https://${n.authDomain}/${hy}`}const xa="webStorageSupport";class gy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ah,this._completeRedirectFn=Um,this._overrideRedirectResult=Lm}async _openPopup(e,t,r,i){wn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await xu(e,t,r,$a(),i);return uy(e,a,_c())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await xu(e,t,r,$a(),i);return _m(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(wn(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ry(e),r=new qm(e);return t.register("authEvent",i=>(le(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xa,{type:xa},i=>{const a=i?.[0]?.[xa];a!==void 0&&t(!!a),qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fh()||oh()||gc()}}const my=gy;var Du="@firebase/auth",Nu="1.11.1";class yy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _y(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vy(n){ci(new kr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=r.options;le(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:u,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dh(n)},v=new Mg(r,i,a,_);return Gg(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ci(new kr("auth-internal",e=>{const t=cr(e.getProvider("auth").getImmediate());return(r=>new yy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(Du,Nu,_y(n)),Jn(Du,Nu,"esm2020")}const Ey=300,Ty=Bl("authIdTokenMaxAge")||Ey;let Vu=null;const wy=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ty)return;const i=t?.token;Vu!==i&&(Vu=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Iy(n=Kl()){const e=hc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Wg(n,{popupRedirectResolver:my,persistence:[Cm,gm,Ah]}),r=Bl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=wy(a.toString());fm(t,u,()=>u(t.currentUser)),hm(t,p=>u(p))}}const i=jl("auth");return i&&Kg(t,`http://${i}`),t}function by(){return document.getElementsByTagName("head")?.[0]??document}Fg({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Zt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",by().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vy("Browser");var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zn,Dh;(function(){var n;function e(l,C){function S(){}S.prototype=C.prototype,l.F=C.prototype,l.prototype=new S,l.prototype.constructor=l,l.D=function(N,x,M){for(var A=Array(arguments.length-2),We=2;We<arguments.length;We++)A[We-2]=arguments[We];return C.prototype[x].apply(N,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(l,C,S){S||(S=0);const N=Array(16);if(typeof C=="string")for(var x=0;x<16;++x)N[x]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(x=0;x<16;++x)N[x]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=l.g[0],S=l.g[1],x=l.g[2];let M=l.g[3],A;A=C+(M^S&(x^M))+N[0]+3614090360&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(x^C&(S^x))+N[1]+3905402710&4294967295,M=C+(A<<12&4294967295|A>>>20),A=x+(S^M&(C^S))+N[2]+606105819&4294967295,x=M+(A<<17&4294967295|A>>>15),A=S+(C^x&(M^C))+N[3]+3250441966&4294967295,S=x+(A<<22&4294967295|A>>>10),A=C+(M^S&(x^M))+N[4]+4118548399&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(x^C&(S^x))+N[5]+1200080426&4294967295,M=C+(A<<12&4294967295|A>>>20),A=x+(S^M&(C^S))+N[6]+2821735955&4294967295,x=M+(A<<17&4294967295|A>>>15),A=S+(C^x&(M^C))+N[7]+4249261313&4294967295,S=x+(A<<22&4294967295|A>>>10),A=C+(M^S&(x^M))+N[8]+1770035416&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(x^C&(S^x))+N[9]+2336552879&4294967295,M=C+(A<<12&4294967295|A>>>20),A=x+(S^M&(C^S))+N[10]+4294925233&4294967295,x=M+(A<<17&4294967295|A>>>15),A=S+(C^x&(M^C))+N[11]+2304563134&4294967295,S=x+(A<<22&4294967295|A>>>10),A=C+(M^S&(x^M))+N[12]+1804603682&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(x^C&(S^x))+N[13]+4254626195&4294967295,M=C+(A<<12&4294967295|A>>>20),A=x+(S^M&(C^S))+N[14]+2792965006&4294967295,x=M+(A<<17&4294967295|A>>>15),A=S+(C^x&(M^C))+N[15]+1236535329&4294967295,S=x+(A<<22&4294967295|A>>>10),A=C+(x^M&(S^x))+N[1]+4129170786&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^x&(C^S))+N[6]+3225465664&4294967295,M=C+(A<<9&4294967295|A>>>23),A=x+(C^S&(M^C))+N[11]+643717713&4294967295,x=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(x^M))+N[0]+3921069994&4294967295,S=x+(A<<20&4294967295|A>>>12),A=C+(x^M&(S^x))+N[5]+3593408605&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^x&(C^S))+N[10]+38016083&4294967295,M=C+(A<<9&4294967295|A>>>23),A=x+(C^S&(M^C))+N[15]+3634488961&4294967295,x=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(x^M))+N[4]+3889429448&4294967295,S=x+(A<<20&4294967295|A>>>12),A=C+(x^M&(S^x))+N[9]+568446438&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^x&(C^S))+N[14]+3275163606&4294967295,M=C+(A<<9&4294967295|A>>>23),A=x+(C^S&(M^C))+N[3]+4107603335&4294967295,x=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(x^M))+N[8]+1163531501&4294967295,S=x+(A<<20&4294967295|A>>>12),A=C+(x^M&(S^x))+N[13]+2850285829&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^x&(C^S))+N[2]+4243563512&4294967295,M=C+(A<<9&4294967295|A>>>23),A=x+(C^S&(M^C))+N[7]+1735328473&4294967295,x=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(x^M))+N[12]+2368359562&4294967295,S=x+(A<<20&4294967295|A>>>12),A=C+(S^x^M)+N[5]+4294588738&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^x)+N[8]+2272392833&4294967295,M=C+(A<<11&4294967295|A>>>21),A=x+(M^C^S)+N[11]+1839030562&4294967295,x=M+(A<<16&4294967295|A>>>16),A=S+(x^M^C)+N[14]+4259657740&4294967295,S=x+(A<<23&4294967295|A>>>9),A=C+(S^x^M)+N[1]+2763975236&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^x)+N[4]+1272893353&4294967295,M=C+(A<<11&4294967295|A>>>21),A=x+(M^C^S)+N[7]+4139469664&4294967295,x=M+(A<<16&4294967295|A>>>16),A=S+(x^M^C)+N[10]+3200236656&4294967295,S=x+(A<<23&4294967295|A>>>9),A=C+(S^x^M)+N[13]+681279174&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^x)+N[0]+3936430074&4294967295,M=C+(A<<11&4294967295|A>>>21),A=x+(M^C^S)+N[3]+3572445317&4294967295,x=M+(A<<16&4294967295|A>>>16),A=S+(x^M^C)+N[6]+76029189&4294967295,S=x+(A<<23&4294967295|A>>>9),A=C+(S^x^M)+N[9]+3654602809&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^x)+N[12]+3873151461&4294967295,M=C+(A<<11&4294967295|A>>>21),A=x+(M^C^S)+N[15]+530742520&4294967295,x=M+(A<<16&4294967295|A>>>16),A=S+(x^M^C)+N[2]+3299628645&4294967295,S=x+(A<<23&4294967295|A>>>9),A=C+(x^(S|~M))+N[0]+4096336452&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~x))+N[7]+1126891415&4294967295,M=C+(A<<10&4294967295|A>>>22),A=x+(C^(M|~S))+N[14]+2878612391&4294967295,x=M+(A<<15&4294967295|A>>>17),A=S+(M^(x|~C))+N[5]+4237533241&4294967295,S=x+(A<<21&4294967295|A>>>11),A=C+(x^(S|~M))+N[12]+1700485571&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~x))+N[3]+2399980690&4294967295,M=C+(A<<10&4294967295|A>>>22),A=x+(C^(M|~S))+N[10]+4293915773&4294967295,x=M+(A<<15&4294967295|A>>>17),A=S+(M^(x|~C))+N[1]+2240044497&4294967295,S=x+(A<<21&4294967295|A>>>11),A=C+(x^(S|~M))+N[8]+1873313359&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~x))+N[15]+4264355552&4294967295,M=C+(A<<10&4294967295|A>>>22),A=x+(C^(M|~S))+N[6]+2734768916&4294967295,x=M+(A<<15&4294967295|A>>>17),A=S+(M^(x|~C))+N[13]+1309151649&4294967295,S=x+(A<<21&4294967295|A>>>11),A=C+(x^(S|~M))+N[4]+4149444226&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~x))+N[11]+3174756917&4294967295,M=C+(A<<10&4294967295|A>>>22),A=x+(C^(M|~S))+N[2]+718787259&4294967295,x=M+(A<<15&4294967295|A>>>17),A=S+(M^(x|~C))+N[9]+3951481745&4294967295,l.g[0]=l.g[0]+C&4294967295,l.g[1]=l.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,l.g[2]=l.g[2]+x&4294967295,l.g[3]=l.g[3]+M&4294967295}r.prototype.v=function(l,C){C===void 0&&(C=l.length);const S=C-this.blockSize,N=this.C;let x=this.h,M=0;for(;M<C;){if(x==0)for(;M<=S;)i(this,l,M),M+=this.blockSize;if(typeof l=="string"){for(;M<C;)if(N[x++]=l.charCodeAt(M++),x==this.blockSize){i(this,N),x=0;break}}else for(;M<C;)if(N[x++]=l[M++],x==this.blockSize){i(this,N),x=0;break}}this.h=x,this.o+=C},r.prototype.A=function(){var l=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);l[0]=128;for(var C=1;C<l.length-8;++C)l[C]=0;C=this.o*8;for(var S=l.length-8;S<l.length;++S)l[S]=C&255,C/=256;for(this.v(l),l=Array(16),C=0,S=0;S<4;++S)for(let N=0;N<32;N+=8)l[C++]=this.g[S]>>>N&255;return l};function a(l,C){var S=p;return Object.prototype.hasOwnProperty.call(S,l)?S[l]:S[l]=C(l)}function u(l,C){this.h=C;const S=[];let N=!0;for(let x=l.length-1;x>=0;x--){const M=l[x]|0;N&&M==C||(S[x]=M,N=!1)}this.g=S}var p={};function _(l){return-128<=l&&l<128?a(l,function(C){return new u([C|0],C<0?-1:0)}):new u([l|0],l<0?-1:0)}function v(l){if(isNaN(l)||!isFinite(l))return P;if(l<0)return J(v(-l));const C=[];let S=1;for(let N=0;l>=S;N++)C[N]=l/S|0,S*=4294967296;return new u(C,0)}function I(l,C){if(l.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(l.charAt(0)=="-")return J(I(l.substring(1),C));if(l.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=v(Math.pow(C,8));let N=P;for(let M=0;M<l.length;M+=8){var x=Math.min(8,l.length-M);const A=parseInt(l.substring(M,M+x),C);x<8?(x=v(Math.pow(C,x)),N=N.j(x).add(v(A))):(N=N.j(S),N=N.add(v(A)))}return N}var P=_(0),L=_(1),K=_(16777216);n=u.prototype,n.m=function(){if(Q(this))return-J(this).m();let l=0,C=1;for(let S=0;S<this.g.length;S++){const N=this.i(S);l+=(N>=0?N:4294967296+N)*C,C*=4294967296}return l},n.toString=function(l){if(l=l||10,l<2||36<l)throw Error("radix out of range: "+l);if(W(this))return"0";if(Q(this))return"-"+J(this).toString(l);const C=v(Math.pow(l,6));var S=this;let N="";for(;;){const x=xe(S,C).g;S=Y(S,x.j(C));let M=((S.g.length>0?S.g[0]:S.h)>>>0).toString(l);if(S=x,W(S))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},n.i=function(l){return l<0?0:l<this.g.length?this.g[l]:this.h};function W(l){if(l.h!=0)return!1;for(let C=0;C<l.g.length;C++)if(l.g[C]!=0)return!1;return!0}function Q(l){return l.h==-1}n.l=function(l){return l=Y(this,l),Q(l)?-1:W(l)?0:1};function J(l){const C=l.g.length,S=[];for(let N=0;N<C;N++)S[N]=~l.g[N];return new u(S,~l.h).add(L)}n.abs=function(){return Q(this)?J(this):this},n.add=function(l){const C=Math.max(this.g.length,l.g.length),S=[];let N=0;for(let x=0;x<=C;x++){let M=N+(this.i(x)&65535)+(l.i(x)&65535),A=(M>>>16)+(this.i(x)>>>16)+(l.i(x)>>>16);N=A>>>16,M&=65535,A&=65535,S[x]=A<<16|M}return new u(S,S[S.length-1]&-2147483648?-1:0)};function Y(l,C){return l.add(J(C))}n.j=function(l){if(W(this)||W(l))return P;if(Q(this))return Q(l)?J(this).j(J(l)):J(J(this).j(l));if(Q(l))return J(this.j(J(l)));if(this.l(K)<0&&l.l(K)<0)return v(this.m()*l.m());const C=this.g.length+l.g.length,S=[];for(var N=0;N<2*C;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<l.g.length;x++){const M=this.i(N)>>>16,A=this.i(N)&65535,We=l.i(x)>>>16,un=l.i(x)&65535;S[2*N+2*x]+=A*un,ve(S,2*N+2*x),S[2*N+2*x+1]+=M*un,ve(S,2*N+2*x+1),S[2*N+2*x+1]+=A*We,ve(S,2*N+2*x+1),S[2*N+2*x+2]+=M*We,ve(S,2*N+2*x+2)}for(l=0;l<C;l++)S[l]=S[2*l+1]<<16|S[2*l];for(l=C;l<2*C;l++)S[l]=0;return new u(S,0)};function ve(l,C){for(;(l[C]&65535)!=l[C];)l[C+1]+=l[C]>>>16,l[C]&=65535,C++}function Ee(l,C){this.g=l,this.h=C}function xe(l,C){if(W(C))throw Error("division by zero");if(W(l))return new Ee(P,P);if(Q(l))return C=xe(J(l),C),new Ee(J(C.g),J(C.h));if(Q(C))return C=xe(l,J(C)),new Ee(J(C.g),C.h);if(l.g.length>30){if(Q(l)||Q(C))throw Error("slowDivide_ only works with positive integers.");for(var S=L,N=C;N.l(l)<=0;)S=Je(S),N=Je(N);var x=qe(S,1),M=qe(N,1);for(N=qe(N,2),S=qe(S,2);!W(N);){var A=M.add(N);A.l(l)<=0&&(x=x.add(S),M=A),N=qe(N,1),S=qe(S,1)}return C=Y(l,x.j(C)),new Ee(x,C)}for(x=P;l.l(C)>=0;){for(S=Math.max(1,Math.floor(l.m()/C.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=v(S),A=M.j(C);Q(A)||A.l(l)>0;)S-=N,M=v(S),A=M.j(C);W(M)&&(M=L),x=x.add(M),l=Y(l,A)}return new Ee(x,l)}n.B=function(l){return xe(this,l).h},n.and=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)&l.i(N);return new u(S,this.h&l.h)},n.or=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)|l.i(N);return new u(S,this.h|l.h)},n.xor=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let N=0;N<C;N++)S[N]=this.i(N)^l.i(N);return new u(S,this.h^l.h)};function Je(l){const C=l.g.length+1,S=[];for(let N=0;N<C;N++)S[N]=l.i(N)<<1|l.i(N-1)>>>31;return new u(S,l.h)}function qe(l,C){const S=C>>5;C%=32;const N=l.g.length-S,x=[];for(let M=0;M<N;M++)x[M]=C>0?l.i(M+S)>>>C|l.i(M+S+1)<<32-C:l.i(M+S);return new u(x,l.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Dh=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=v,u.fromString=I,Zn=u}).apply(typeof Ou<"u"?Ou:typeof self<"u"?self:typeof window<"u"?window:{});var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Nh,os,Vh,To,Wa,Oh,Lh,Mh;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof lo=="object"&&lo];for(var f=0;f<o.length;++f){var g=o[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(o,f){if(f)e:{var g=r;o=o.split(".");for(var T=0;T<o.length-1;T++){var O=o[T];if(!(O in g))break e;g=g[O]}o=o[o.length-1],T=g[o],f=f(T),f!=T&&f!=null&&e(g,o,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(f){var g=[],T;for(T in f)Object.prototype.hasOwnProperty.call(f,T)&&g.push([T,f[T]]);return g}});var a=a||{},u=this||self;function p(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function _(o,f,g){return o.call.apply(o.bind,arguments)}function v(o,f,g){return v=_,v.apply(null,arguments)}function I(o,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),o.apply(this,T)}}function P(o,f){function g(){}g.prototype=f.prototype,o.Z=f.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(T,O,V){for(var G=Array(arguments.length-2),de=2;de<arguments.length;de++)G[de-2]=arguments[de];return f.prototype[O].apply(T,G)}}var L=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function K(o){const f=o.length;if(f>0){const g=Array(f);for(let T=0;T<f;T++)g[T]=o[T];return g}return[]}function W(o,f){for(let T=1;T<arguments.length;T++){const O=arguments[T];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=o.length||0;const V=O.length||0;o.length=g+V;for(let G=0;G<V;G++)o[g+G]=O[G]}else o.push(O)}}class Q{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function J(o){u.setTimeout(()=>{throw o},0)}function Y(){var o=l;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class ve{constructor(){this.h=this.g=null}add(f,g){const T=Ee.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var Ee=new Q(()=>new xe,o=>o.reset());class xe{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Je,qe=!1,l=new ve,C=()=>{const o=Promise.resolve(void 0);Je=()=>{o.then(S)}};function S(){for(var o;o=Y();){try{o.h.call(o.g)}catch(g){J(g)}var f=Ee;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}qe=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};u.addEventListener("test",g,f),u.removeEventListener("test",g,f)}catch{}return o})();function A(o){return/^[\s\xa0]*$/.test(o)}function We(o,f){x.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}P(We,x),We.prototype.init=function(o,f){const g=this.type=o.type,T=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(g=="mouseover"?f=o.fromElement:g=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var un="closure_listenable_"+(Math.random()*1e6|0),ha=0;function Dt(o,f,g,T,O){this.listener=o,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=O,this.key=++ha,this.da=this.fa=!1}function Cn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Nt(o,f,g){for(const T in o)f.call(g,o[T],T,o)}function Us(o,f){for(const g in o)f.call(void 0,o[g],g,o)}function bi(o){const f={};for(const g in o)f[g]=o[g];return f}const Ai="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jr(o,f){let g,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(g in T)o[g]=T[g];for(let V=0;V<Ai.length;V++)g=Ai[V],Object.prototype.hasOwnProperty.call(T,g)&&(o[g]=T[g])}}function ur(o){this.src=o,this.g={},this.h=0}ur.prototype.add=function(o,f,g,T,O){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const G=Ci(o,f,T,O);return G>-1?(f=o[G],g||(f.fa=!1)):(f=new Dt(f,this.src,V,!!T,O),f.fa=g,o.push(f)),f};function Si(o,f){const g=f.type;if(g in o.g){var T=o.g[g],O=Array.prototype.indexOf.call(T,f,void 0),V;(V=O>=0)&&Array.prototype.splice.call(T,O,1),V&&(Cn(f),o.g[g].length==0&&(delete o.g[g],o.h--))}}function Ci(o,f,g,T){for(let O=0;O<o.length;++O){const V=o[O];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==T)return O}return-1}var Ri="closure_lm_"+(Math.random()*1e6|0),Pi={};function ki(o,f,g,T,O){if(Array.isArray(f)){for(let V=0;V<f.length;V++)ki(o,f[V],g,T,O);return null}return g=At(g),o&&o[un]?o.J(f,g,p(T)?!!T.capture:!1,O):bt(o,f,g,!1,T,O)}function bt(o,f,g,T,O,V){if(!f)throw Error("Invalid event type");const G=p(O)?!!O.capture:!!O;let de=lr(o);if(de||(o[Ri]=de=new ur(o)),g=de.add(f,g,T,G,V),g.proxy)return g;if(T=fa(),g.proxy=T,T.src=o,T.listener=g,o.addEventListener)M||(O=G),O===void 0&&(O=!1),o.addEventListener(f.toString(),T,O);else if(o.attachEvent)o.attachEvent(xi(f.toString()),T);else if(o.addListener&&o.removeListener)o.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function fa(){function o(g){return f.call(o.src,o.listener,g)}const f=da;return o}function ln(o,f,g,T,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)ln(o,f[V],g,T,O);else T=p(T)?!!T.capture:!!T,g=At(g),o&&o[un]?(o=o.i,V=String(f).toString(),V in o.g&&(f=o.g[V],g=Ci(f,g,T,O),g>-1&&(Cn(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete o.g[V],o.h--)))):o&&(o=lr(o))&&(f=o.g[f.toString()],o=-1,f&&(o=Ci(f,g,T,O)),(g=o>-1?f[o]:null)&&Rn(g))}function Rn(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[un])Si(f.i,o);else{var g=o.type,T=o.proxy;f.removeEventListener?f.removeEventListener(g,T,o.capture):f.detachEvent?f.detachEvent(xi(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=lr(f))?(Si(g,o),g.h==0&&(g.src=null,f[Ri]=null)):Cn(o)}}}function xi(o){return o in Pi?Pi[o]:Pi[o]="on"+o}function da(o,f){if(o.da)o=!0;else{f=new We(f,this);const g=o.listener,T=o.ha||o.src;o.fa&&Rn(o),o=g.call(T,f)}return o}function lr(o){return o=o[Ri],o instanceof ur?o:null}var Pn="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(o){return typeof o=="function"?o:(o[Pn]||(o[Pn]=function(f){return o.handleEvent(f)}),o[Pn])}function Ze(){N.call(this),this.i=new ur(this),this.M=this,this.G=null}P(Ze,N),Ze.prototype[un]=!0,Ze.prototype.removeEventListener=function(o,f,g,T){ln(this,o,f,g,T)};function nt(o,f){var g,T=o.G;if(T)for(g=[];T;T=T.G)g.push(T);if(o=o.M,T=f.type||f,typeof f=="string")f=new x(f,o);else if(f instanceof x)f.target=f.target||o;else{var O=f;f=new x(T,o),jr(f,O)}O=!0;let V,G;if(g)for(G=g.length-1;G>=0;G--)V=f.g=g[G],O=qr(V,T,!0,f)&&O;if(V=f.g=o,O=qr(V,T,!0,f)&&O,O=qr(V,T,!1,f)&&O,g)for(G=0;G<g.length;G++)V=f.g=g[G],O=qr(V,T,!1,f)&&O}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const g=o.g[f];for(let T=0;T<g.length;T++)Cn(g[T]);delete o.g[f],o.h--}}this.G=null},Ze.prototype.J=function(o,f,g,T){return this.i.add(String(o),f,!1,g,T)},Ze.prototype.K=function(o,f,g,T){return this.i.add(String(o),f,!0,g,T)};function qr(o,f,g,T){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let V=0;V<f.length;++V){const G=f[V];if(G&&!G.da&&G.capture==g){const de=G.listener,Ue=G.ha||G.src;G.fa&&Si(o.i,G),O=de.call(Ue,T)!==!1&&O}}return O&&!T.defaultPrevented}function St(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:u.setTimeout(o,f||0)}function kn(o){o.g=St(()=>{o.g=null,o.i&&(o.i=!1,kn(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class hr extends N{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:kn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(o){N.call(this),this.h=o,this.g={}}P(ie,N);var rt=[];function js(o){Nt(o.g,function(f,g){this.g.hasOwnProperty(g)&&Rn(f)},o),o.g={}}ie.prototype.N=function(){ie.Z.N.call(this),js(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=u.JSON.stringify,pa=u.JSON.parse,qs=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function Ni(){}function xn(){}var mt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vt(){x.call(this,"d")}P(Vt,x);function $t(){x.call(this,"c")}P($t,x);var hn={},fr=null;function dr(){return fr=fr||new Ze}hn.Ia="serverreachability";function Vi(o){x.call(this,hn.Ia,o)}P(Vi,x);function pr(o){const f=dr();nt(f,new Vi(f))}hn.STAT_EVENT="statevent";function fn(o,f){x.call(this,hn.STAT_EVENT,o),this.stat=f}P(fn,x);function Be(o){const f=dr();nt(f,new fn(f,o))}hn.Ja="timingevent";function Oi(o,f){x.call(this,hn.Ja,o),this.size=f}P(Oi,x);function Dn(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},f)}function et(){this.g=!0}et.prototype.ua=function(){this.g=!1};function ut(o,f,g,T,O,V){o.info(function(){if(o.g)if(V){var G="",de=V.split("&");for(let _e=0;_e<de.length;_e++){var Ue=de[_e].split("=");if(Ue.length>1){const Fe=Ue[0];Ue=Ue[1];const $e=Fe.split("_");G=$e.length>=2&&$e[1]=="type"?G+(Fe+"="+Ue+"&"):G+(Fe+"=redacted&")}}}else G=null;else G=V;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+g+`
`+G})}function Li(o,f,g,T,O,V,G){o.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+g+`
`+V+" "+G})}function Nn(o,f,g,T){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+$s(o,g)+(T?" "+T:"")})}function Bs(o,f){o.info(function(){return"TIMEOUT: "+f})}et.prototype.info=function(){};function $s(o,f){if(!o.g)return f;if(!f)return null;try{const V=JSON.parse(f);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var g=V[o];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var O=T[0];if(O!="noop"&&O!="stop"&&O!="close")for(let G=1;G<T.length;G++)T[G]=""}}}}return Di(V)}catch{return f}}var Ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Br;function Vn(){}P(Vn,Ni),Vn.prototype.g=function(){return new XMLHttpRequest},Br=new Vn;function gr(o){return encodeURIComponent(String(o))}function ga(o){var f=1;o=o.split(":");const g=[];for(;f>0&&o.length;)g.push(o.shift()),f--;return o.length&&g.push(o.join(":")),g}function Ht(o,f,g,T){this.j=o,this.i=f,this.l=g,this.S=T||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mi}function Mi(){this.i=null,this.g="",this.h=!1}var Hs={},Fi={};function $r(o,f,g){o.M=1,o.A=Mn(Ve(f)),o.u=g,o.R=!0,zs(o,null)}function zs(o,f){o.F=Date.now(),Ln(o),o.B=Ve(o.A);var g=o.B,T=o.S;Array.isArray(T)||(T=[String(T)]),Js(g.i,"t",T),o.C=0,g=o.j.L,o.h=new Mi,o.g=B(o.j,g?f:null,!o.u),o.P>0&&(o.O=new hr(v(o.Y,o,o.g),o.P)),f=o.V,g=o.g,T=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(rt[0]=O.toString()),O=rt);for(let V=0;V<O.length;V++){const G=ki(g,O[V],T||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=o.J?bi(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),pr(),ut(o.i,o.v,o.B,o.l,o.S,o.u)}Ht.prototype.ba=function(o){o=o.target;const f=this.O;f&&Mt(o)==3?f.j():this.Y(o)},Ht.prototype.Y=function(o){try{if(o==this.g)e:{const de=Mt(this.g),Ue=this.g.ya(),_e=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||Zi(this.g)))){this.K||de!=4||Ue==7||(Ue==8||_e<=0?pr(3):pr(2)),Hr(this);var f=this.g.ca();this.X=f;var g=On(this);if(this.o=f==200,Li(this.i,this.v,this.B,this.l,this.S,de,f),this.o){if(this.U&&!this.L){t:{if(this.g){var T,O=this.g;if((T=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var V=T;break t}}V=null}if(o=V)Nn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zr(this,o);else{this.o=!1,this.m=3,Be(12),Et(this),yr(this);break e}}if(this.R){o=!0;let Fe;for(;!this.K&&this.C<g.length;)if(Fe=ji(this,g),Fe==Fi){de==4&&(this.m=4,Be(14),o=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==Hs){this.m=4,Be(15),Nn(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else Nn(this.i,this.l,Fe,null),zr(this,Fe);if(Ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||g.length!=0||this.h.h||(this.m=1,Be(16),o=!1),this.o=this.o&&o,!o)Nn(this.i,this.l,g,"[Invalid Chunked Response]"),Et(this),yr(this);else if(g.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),d(G),G.P=!0,Be(11))}}else Nn(this.i,this.l,g,null),zr(this,g);de==4&&Et(this),this.o&&!this.K&&(de==4?E(this.j,this):(this.o=!1,Ln(this)))}else es(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Be(12)):(this.m=0,Be(13)),Et(this),yr(this)}}}catch{}finally{}};function On(o){if(!Ui(o))return o.g.la();const f=Zi(o.g);if(f==="")return"";let g="";const T=f.length,O=Mt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Et(o),yr(o),"";o.h.i=new u.TextDecoder}for(let V=0;V<T;V++)o.h.h=!0,g+=o.h.i.decode(f[V],{stream:!(O&&V==T-1)});return f.length=0,o.h.g+=g,o.C=0,o.h.g}function Ui(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function ji(o,f){var g=o.C,T=f.indexOf(`
`,g);return T==-1?Fi:(g=Number(f.substring(g,T)),isNaN(g)?Hs:(T+=1,T+g>f.length?Fi:(f=f.slice(T,T+g),o.C=T+g,f)))}Ht.prototype.cancel=function(){this.K=!0,Et(this)};function Ln(o){o.T=Date.now()+o.H,mr(o,o.H)}function mr(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Dn(v(o.aa,o),f)}function Hr(o){o.D&&(u.clearTimeout(o.D),o.D=null)}Ht.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Bs(this.i,this.B),this.M!=2&&(pr(),Be(17)),Et(this),this.m=2,yr(this)):mr(this,this.T-o)};function yr(o){o.j.I==0||o.K||E(o.j,o)}function Et(o){Hr(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,js(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function zr(o,f){try{var g=o.j;if(g.I!=0&&(g.g==o||_r(g.h,o))){if(!o.L&&_r(g.h,o)&&g.I==3){try{var T=g.Ba.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)y(g),Xt(g);else break e;h(g),Be(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Dn(v(g.Va,g),6e3));Gs(g.h)<=1&&g.ta&&(g.ta=void 0)}else b(g,11)}else if((o.L||g.g==o)&&y(g),!A(f))for(O=g.Ba.g.parse(f),f=0;f<O.length;f++){let _e=O[f];const Fe=_e[0];if(!(Fe<=g.K))if(g.K=Fe,_e=_e[1],g.I==2)if(_e[0]=="c"){g.M=_e[1],g.ba=_e[2];const $e=_e[3];$e!=null&&(g.ka=$e,g.j.info("VER="+g.ka));const lt=_e[4];lt!=null&&(g.za=lt,g.j.info("SVER="+g.za));const it=_e[5];it!=null&&typeof it=="number"&&it>0&&(T=1.5*it,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const He=o.g;if(He){const Bn=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bn){var V=T.h;V.g||Bn.indexOf("spdy")==-1&&Bn.indexOf("quic")==-1&&Bn.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&($i(V,V.h),V.h=null))}if(T.G){const wt=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;wt&&(T.wa=wt,ke(T.J,T.G,wt))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var G=o;if(T.na=q(T,T.L?T.ba:null,T.W),G.L){Ks(T.h,G);var de=G,Ue=T.O;Ue&&(de.H=Ue),de.D&&(Hr(de),Ln(de)),T.g=G}else c(T);g.i.length>0&&qn(g)}else _e[0]!="stop"&&_e[0]!="close"||b(g,7);else g.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?b(g,7):ts(g):_e[0]!="noop"&&g.l&&g.l.qa(_e),g.A=0)}}pr(4)}catch{}}var Ws=class{constructor(o,f){this.g=o,this.map=f}};function qi(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gs(o){return o.h?1:o.g?o.g.size:0}function _r(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function $i(o,f){o.g?o.g.add(f):o.h=f}function Ks(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}qi.prototype.cancel=function(){if(this.i=Hi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Hi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const g of o.g.values())f=f.concat(g.G);return f}return K(o.i)}var zi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wi(o,f){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const T=o[g].indexOf("=");let O,V=null;T>=0?(O=o[g].substring(0,T),V=o[g].substring(T+1)):O=o[g],f(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Lt(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof Lt?(this.l=o.l,Ct(this,o.j),this.o=o.o,this.g=o.g,zt(this,o.u),this.h=o.h,Gi(this,Un(o.i)),this.m=o.m):o&&(f=String(o).match(zi))?(this.l=!1,Ct(this,f[1]||"",!0),this.o=Fn(f[2]||""),this.g=Fn(f[3]||"",!0),zt(this,f[4]),this.h=Fn(f[5]||"",!0),Gi(this,f[6]||"",!0),this.m=Fn(f[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}Lt.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(Wt(f,Xs,!0),":");var g=this.g;return(g||f=="file")&&(o.push("//"),(f=this.o)&&o.push(Wt(f,Xs,!0),"@"),o.push(gr(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(Wt(g,g.charAt(0)=="/"?Tt:ma,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",Wt(g,vr)),o.join("")},Lt.prototype.resolve=function(o){const f=Ve(this);let g=!!o.j;g?Ct(f,o.j):g=!!o.o,g?f.o=o.o:g=!!o.g,g?f.g=o.g:g=o.u!=null;var T=o.h;if(g)zt(f,o.u);else if(g=!!o.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var O=f.h.lastIndexOf("/");O!=-1&&(T=f.h.slice(0,O+1)+T)}if(O=T,O==".."||O==".")T="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){T=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let G=0;G<O.length;){const de=O[G++];de=="."?T&&G==O.length&&V.push(""):de==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),T&&G==O.length&&V.push("")):(V.push(de),T=!0)}T=V.join("/")}else T=O}return g?f.h=T:g=o.i.toString()!=="",g?Gi(f,Un(o.i)):g=!!o.m,g&&(f.m=o.m),f};function Ve(o){return new Lt(o)}function Ct(o,f,g){o.j=g?Fn(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function zt(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Gi(o,f,g){f instanceof Er?(o.i=f,Ki(o.i,o.l)):(g||(f=Wt(f,Ys)),o.i=new Er(f,o.l))}function ke(o,f,g){o.i.set(f,g)}function Mn(o){return ke(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Fn(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Wt(o,f,g){return typeof o=="string"?(o=encodeURI(o).replace(f,Qs),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Qs(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Xs=/[#\/\?@]/g,ma=/[#\?:]/g,Tt=/[#\?]/g,Ys=/[#\?@]/g,vr=/#/g;function Er(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function pn(o){o.g||(o.g=new Map,o.h=0,o.i&&Wi(o.i,function(f,g){o.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Er.prototype,n.add=function(o,f){pn(this),this.i=null,o=gn(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(f),this.h+=1,this};function Gt(o,f){pn(o),f=gn(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function Kt(o,f){return pn(o),f=gn(o,f),o.g.has(f)}n.forEach=function(o,f){pn(this),this.g.forEach(function(g,T){g.forEach(function(O){o.call(f,O,T,this)},this)},this)};function Wr(o,f){pn(o);let g=[];if(typeof f=="string")Kt(o,f)&&(g=g.concat(o.g.get(gn(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)g=g.concat(o[f]);return g}n.set=function(o,f){return pn(this),this.i=null,o=gn(this,o),Kt(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},n.get=function(o,f){return o?(o=Wr(this,o),o.length>0?String(o[0]):f):f};function Js(o,f,g){Gt(o,f),g.length>0&&(o.i=null,o.g.set(gn(o,f),K(g)),o.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let T=0;T<f.length;T++){var g=f[T];const O=gr(g);g=Wr(this,g);for(let V=0;V<g.length;V++){let G=O;g[V]!==""&&(G+="="+gr(g[V])),o.push(G)}}return this.i=o.join("&")};function Un(o){const f=new Er;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function gn(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function Ki(o,f){f&&!o.j&&(pn(o),o.i=null,o.g.forEach(function(g,T){const O=T.toLowerCase();T!=O&&(Gt(this,T),Js(this,O,g))},o)),o.j=f}function Zs(o,f){const g=new et;if(u.Image){const T=new Image;T.onload=I(Qt,g,"TestLoadImage: loaded",!0,f,T),T.onerror=I(Qt,g,"TestLoadImage: error",!1,f,T),T.onabort=I(Qt,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=I(Qt,g,"TestLoadImage: timeout",!1,f,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=o}else f(!1)}function eo(o,f){const g=new et,T=new AbortController,O=setTimeout(()=>{T.abort(),Qt(g,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:T.signal}).then(V=>{clearTimeout(O),V.ok?Qt(g,"TestPingServer: ok",!0,f):Qt(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Qt(g,"TestPingServer: error",!1,f)})}function Qt(o,f,g,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(g)}catch{}}function to(){this.g=new qs}function Qi(o){this.i=o.Sb||null,this.h=o.ab||!1}P(Qi,Ni),Qi.prototype.g=function(){return new Gr(this.i,this.h)};function Gr(o,f){Ze.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}P(Gr,Ze),n=Gr.prototype,n.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,wr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||u).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?Tr(this):wr(this),this.readyState==3&&Kr(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,Tr(this))},n.Na=function(o){this.g&&(this.response=o,Tr(this))},n.ga=function(){this.g&&Tr(this)};function Tr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,wr(o)}n.setRequestHeader=function(o,f){this.A.append(o,f)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=f.next();return o.join(`\r
`)};function wr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function no(o){let f="";return Nt(o,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function Xi(o,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=no(g),typeof o=="string"?g!=null&&gr(g):ke(o,f,g))}function Le(o){Ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}P(Le,Ze);var ya=/^https?$/i,_a=["POST","PUT"];n=Le.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Br.g(),this.g.onreadystatechange=L(v(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(V){Yi(this,V);return}if(o=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)g.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())g.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=u.FormData&&o instanceof u.FormData,!(Array.prototype.indexOf.call(_a,f,void 0)>=0)||T||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,G]of g)this.g.setRequestHeader(V,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){Yi(this,V)}};function Yi(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,Qr(o),jn(o)}function Qr(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,nt(this,"complete"),nt(this,"abort"),jn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jn(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ji(this):this.Xa())},n.Xa=function(){Ji(this)};function Ji(o){if(o.h&&typeof a<"u"){if(o.v&&Mt(o)==4)setTimeout(o.Ca.bind(o),0);else if(nt(o,"readystatechange"),Mt(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=V===0){let G=String(o.D).match(zi)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),T=!ya.test(G?G.toLowerCase():"")}g=T}if(g)nt(o,"complete"),nt(o,"success");else{o.o=6;try{var O=Mt(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Qr(o)}}finally{jn(o)}}}}function jn(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,f||nt(o,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Mt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Mt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),pa(f)}};function Zi(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function es(o){const f={};o=(o.g&&Mt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<o.length;T++){if(A(o[T]))continue;var g=ga(o[T]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[O]||[];f[O]=V,V.push(g)}Us(f,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(o,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||f}function ro(o){this.za=0,this.i=[],this.j=new et,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,o),this.Za=Ir("retryDelaySeedMs",1e4,o),this.Ta=Ir("forwardChannelMaxRetries",2,o),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new qi(o&&o.concurrentRequestLimit),this.Ba=new to,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ro.prototype,n.ka=8,n.I=1,n.connect=function(o,f,g,T){Be(0),this.W=o,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=q(this,null,this.W),qn(this)};function ts(o){if(ns(o),o.I==3){var f=o.V++,g=Ve(o.J);if(ke(g,"SID",o.M),ke(g,"RID",f),ke(g,"TYPE","terminate"),br(o,g),f=new Ht(o,o.j,f),f.M=2,f.A=Mn(Ve(g)),g=!1,u.navigator&&u.navigator.sendBeacon)try{g=u.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&u.Image&&(new Image().src=f.A,g=!0),g||(f.g=B(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Ln(f)}D(o)}function Xt(o){o.g&&(d(o),o.g.cancel(),o.g=null)}function ns(o){Xt(o),o.v&&(u.clearTimeout(o.v),o.v=null),y(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&u.clearTimeout(o.m),o.m=null)}function qn(o){if(!Bi(o.h)&&!o.m){o.m=!0;var f=o.Ea;Je||C(),qe||(Je(),qe=!0),l.add(f,o),o.D=0}}function va(o,f){return Gs(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Dn(v(o.Ea,o,f),R(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new Ht(this,this.j,o);let V=this.o;if(this.U&&(V?(V=bi(V),jr(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=s(this,O,f),g=Ve(this.J),ke(g,"RID",o),ke(g,"CVER",22),this.G&&ke(g,"X-HTTP-Session-Id",this.G),br(this,g),V&&(this.R?f="headers="+gr(no(V))+"&"+f:this.u&&Xi(g,this.u,V)),$i(this.h,O),this.Ra&&ke(g,"TYPE","init"),this.S?(ke(g,"$req",f),ke(g,"SID","null"),O.U=!0,$r(O,g,null)):$r(O,g,f),this.I=2}}else this.I==3&&(o?io(this,o):this.i.length==0||Bi(this.h)||io(this))};function io(o,f){var g;f?g=f.l:g=o.V++;const T=Ve(o.J);ke(T,"SID",o.M),ke(T,"RID",g),ke(T,"AID",o.K),br(o,T),o.u&&o.o&&Xi(T,o.u,o.o),g=new Ht(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),f&&(o.i=f.G.concat(o.i)),f=s(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),$i(o.h,g),$r(g,T,f)}function br(o,f){o.H&&Nt(o.H,function(g,T){ke(f,T,g)}),o.l&&Nt({},function(g,T){ke(f,T,g)})}function s(o,f,g){g=Math.min(o.i.length,g);const T=o.l?v(o.l.Ka,o.l,o):null;e:{var O=o.i;let de=-1;for(;;){const Ue=["count="+g];de==-1?g>0?(de=O[0].g,Ue.push("ofs="+de)):de=0:Ue.push("ofs="+de);let _e=!0;for(let Fe=0;Fe<g;Fe++){var V=O[Fe].g;const $e=O[Fe].map;if(V-=de,V<0)de=Math.max(0,O[Fe].g-100),_e=!1;else try{V="req"+V+"_"||"";try{var G=$e instanceof Map?$e:Object.entries($e);for(const[lt,it]of G){let He=it;p(it)&&(He=Di(it)),Ue.push(V+lt+"="+encodeURIComponent(He))}}catch(lt){throw Ue.push(V+"type="+encodeURIComponent("_badmap")),lt}}catch{T&&T($e)}}if(_e){G=Ue.join("&");break e}}G=void 0}return o=o.i.splice(0,g),f.G=o,G}function c(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;Je||C(),qe||(Je(),qe=!0),l.add(f,o),o.A=0}}function h(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Dn(v(o.Da,o),R(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,m(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Dn(v(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Be(10),Xt(this),m(this))};function d(o){o.B!=null&&(u.clearTimeout(o.B),o.B=null)}function m(o){o.g=new Ht(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=Ve(o.na);ke(f,"RID","rpc"),ke(f,"SID",o.M),ke(f,"AID",o.K),ke(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&ke(f,"TO",o.ia),ke(f,"TYPE","xmlhttp"),br(o,f),o.u&&o.o&&Xi(f,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=Mn(Ve(f)),g.u=null,g.R=!0,zs(g,o)}n.Va=function(){this.C!=null&&(this.C=null,Xt(this),h(this),Be(19))};function y(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function E(o,f){var g=null;if(o.g==f){y(o),d(o),o.g=null;var T=2}else if(_r(o.h,f))g=f.G,Ks(o.h,f),T=1;else return;if(o.I!=0){if(f.o)if(T==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var O=o.D;T=dr(),nt(T,new Oi(T,g)),qn(o)}else c(o);else if(O=f.m,O==3||O==0&&f.X>0||!(T==1&&va(o,f)||T==2&&h(o)))switch(g&&g.length>0&&(f=o.h,f.i=f.i.concat(g)),O){case 1:b(o,5);break;case 4:b(o,10);break;case 3:b(o,6);break;default:b(o,2)}}}function R(o,f){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*f}function b(o,f){if(o.j.info("Error code "+f),f==2){var g=v(o.bb,o),T=o.Ua;const O=!T;T=new Lt(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ct(T,"https"),Mn(T),O?Zs(T.toString(),g):eo(T.toString(),g)}else Be(2);o.I=0,o.l&&o.l.pa(f),D(o),ns(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function D(o){if(o.I=0,o.ja=[],o.l){const f=Hi(o.h);(f.length!=0||o.i.length!=0)&&(W(o.ja,f),W(o.ja,o.i),o.h.i.length=0,K(o.i),o.i.length=0),o.l.oa()}}function q(o,f,g){var T=g instanceof Lt?Ve(g):new Lt(g);if(T.g!="")f&&(T.g=f+"."+T.g),zt(T,T.u);else{var O=u.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const V=new Lt(null);T&&Ct(V,T),f&&(V.g=f),O&&zt(V,O),g&&(V.h=g),T=V}return g=o.G,f=o.wa,g&&f&&ke(T,g,f),ke(T,"VER",o.ka),br(o,T),T}function B(o,f,g){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new Le(new Qi({ab:g})):new Le(o.ma),f.Fa(o.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function U(){}n=U.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function X(){}X.prototype.g=function(o,f){return new oe(o,f)};function oe(o,f){Ze.call(this),this.g=new ro(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!A(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Me(this)}P(oe,Ze),oe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},oe.prototype.close=function(){ts(this.g)},oe.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=Di(o),o=g);f.i.push(new Ws(f.Ya++,o)),f.I==3&&qn(f)},oe.prototype.N=function(){this.g.l=null,delete this.j,ts(this.g),delete this.g,oe.Z.N.call(this)};function Te(o){Vt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){e:{for(const g in f){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}P(Te,Vt);function ye(){$t.call(this),this.status=1}P(ye,$t);function Me(o){this.g=o}P(Me,U),Me.prototype.ra=function(){nt(this.g,"a")},Me.prototype.qa=function(o){nt(this.g,new Te(o))},Me.prototype.pa=function(o){nt(this.g,new ye)},Me.prototype.oa=function(){nt(this.g,"b")},X.prototype.createWebChannel=X.prototype.g,oe.prototype.send=oe.prototype.o,oe.prototype.open=oe.prototype.m,oe.prototype.close=oe.prototype.close,Mh=function(){return new X},Lh=function(){return dr()},Oh=hn,Wa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ot.NO_ERROR=0,Ot.TIMEOUT=8,Ot.HTTP_ERROR=6,To=Ot,dn.COMPLETE="complete",Vh=dn,xn.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,os=xn,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,Nh=Le}).apply(typeof lo<"u"?lo:typeof self<"u"?self:typeof window<"u"?window:{});const Lu="@firebase/firestore",Mu="4.9.2";class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");let vi="12.3.0";const Nr=new uc("@firebase/firestore");function Jr(){return Nr.logLevel}function re(n,...e){if(Nr.logLevel<=be.DEBUG){const t=e.map(Ec);Nr.debug(`Firestore (${vi}): ${n}`,...t)}}function In(n,...e){if(Nr.logLevel<=be.ERROR){const t=e.map(Ec);Nr.error(`Firestore (${vi}): ${n}`,...t)}}function li(n,...e){if(Nr.logLevel<=be.WARN){const t=e.map(Ec);Nr.warn(`Firestore (${vi}): ${n}`,...t)}}function Ec(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Fh(n,r,t)}function Fh(n,e,t){let r=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw In(r),new Error(r)}function Re(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Fh(e,i,r)}function me(n,e){return n}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class En{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Uh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ay{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dt.UNAUTHENTICATED)))}shutdown(){}}class Sy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Cy{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i;const i=_=>this.i!==r?(r=this.i,t(_)):Promise.resolve();let a=new En;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new En,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const _=a;e.enqueueRetryable((async()=>{await _.promise,await i(this.currentUser)}))},p=_=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new En)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new Uh(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class Ry{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Py{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ry(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ky{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const r=a=>{a.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fu(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fu(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function xy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Tc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xy(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Ae(n,e){return n<e?-1:n>e?1:0}function Ga(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Da(i)===Da(a)?Ae(i,a):Da(i)?1:-1}return Ae(n.length,e.length)}const Dy=55296,Ny=57343;function Da(n){const e=n.charCodeAt(0);return e>=Dy&&e<=Ny}function hi(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const Uu="__name__";class Jt{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Jt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Jt.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Ae(e.length,t.length)}static compareSegments(e,t){const r=Jt.isNumericId(e),i=Jt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Jt.extractNumericId(e).compare(Jt.extractNumericId(t)):Ga(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zn.fromString(e.substring(4,e.length-2))}}class Ne extends Jt{construct(e,t,r){return new Ne(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ne(t)}static emptyPath(){return new Ne([])}}const Vy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Jt{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return Vy.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uu}static keyField(){return new ot([Uu])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const p=e[i];if(p==="\\"){if(i+1===e.length)throw new ee(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ee(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else p==="`"?(u=!u,i++):p!=="."||u?(r+=p,i++):(a(),i++)}if(a(),u)throw new ee(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ne.fromString(e))}static fromName(e){return new ce(Ne.fromString(e).popFirst(5))}static empty(){return new ce(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ne(e.slice()))}}function jh(n,e,t){if(!t)throw new ee(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Oy(n,e,t,r){if(e===!0&&r===!0)throw new ee(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ju(n){if(!ce.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qu(n){if(ce.isDocumentKey(n))throw new ee(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qh(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xo(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xo(n);throw new ee(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qe(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ns(n,e){if(!qh(n))throw new ee(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ee(H.INVALID_ARGUMENT,t);return!0}const Bu=-62135596800,$u=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*$u);return new Oe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Bu)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$u}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ns(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Bu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:Qe("string",Oe._jsonSchemaVersion),seconds:Qe("number"),nanoseconds:Qe("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Oe(0,0))}static max(){return new ge(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vs=-1;function Ly(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new nr(i,ce.empty(),e)}function My(n){return new nr(n.readTime,n.key,vs)}class nr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nr(ge.min(),ce.empty(),vs)}static max(){return new nr(ge.max(),ce.empty(),vs)}}function Fy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}const Uy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ei(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==Uy)throw n;re("LocalStore","Unexpectedly lost primary lease")}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let i=0,a=0,u=!1;e.forEach((p=>{++i,p.next((()=>{++a,u&&a===i&&t()}),(_=>r(_)))})),u=!0,a===i&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((i=>i?z.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,i)=>{const a=e.length,u=new Array(a);let p=0;for(let _=0;_<a;_++){const v=_;t(e[v]).next((I=>{u[v]=I,++p,p===a&&r(u)}),(I=>i(I)))}}))}static doWhile(e,t){return new z(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function qy(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ti(n){return n.name==="IndexedDbTransactionError"}class Yo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yo.ce=-1;const wc=-1;function Jo(n){return n==null}function Lo(n){return n===0&&1/n==-1/0}function By(n){return typeof n=="number"&&Number.isInteger(n)&&!Lo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Bh="";function $y(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hu(e)),e=Hy(n.get(t),e);return Hu(e)}function Hy(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Bh:t+="";break;default:t+=a}}return t}function Hu(n){return n+Bh+""}function zu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Or(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $h(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class je{constructor(e,t){this.comparator=e,this.root=t||st.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ho(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ho(this.root,e,this.comparator,!1)}getReverseIterator(){return new ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ho(this.root,e,this.comparator,!0)}}class ho{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=a??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new st(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new st(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ye{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wu(this.data.getIterator())}getIteratorFrom(e){return new Wu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ye(this.comparator);return t.data=e,t}}class Wu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new jt([])}unionWith(e){let t=new Ye(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hi(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Hh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Hh("Invalid base64 string: "+a):a}})(e);return new ct(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a})(e);return new ct(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const zy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(Re(!!n,39018),typeof n=="string"){let e=0;const t=zy.exec(n);if(Re(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}const zh="server_timestamp",Wh="__type__",Gh="__previous_value__",Kh="__local_write_time__";function Ic(n){return(n?.mapValue?.fields||{})[Wh]?.stringValue===zh}function Zo(n){const e=n.mapValue.fields[Gh];return Ic(e)?Zo(e):e}function Es(n){const e=rr(n.mapValue.fields[Kh].timestampValue);return new Oe(e.seconds,e.nanos)}class Wy{constructor(e,t,r,i,a,u,p,_,v,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=v,this.isUsingEmulator=I}}const Mo="(default)";class Ts{constructor(e,t){this.projectId=e,this.database=t||Mo}static empty(){return new Ts("","")}get isDefaultDatabase(){return this.database===Mo}isEqual(e){return e instanceof Ts&&e.projectId===this.projectId&&e.database===this.database}}const Qh="__type__",Gy="__max__",fo={mapValue:{}},Xh="__vector__",Fo="value";function sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ic(n)?4:Qy(n)?9007199254740991:Ky(n)?10:11:he(28295,{value:n})}function an(n,e){if(n===e)return!0;const t=sr(n);if(t!==sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Es(n).isEqual(Es(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=rr(i.timestampValue),p=rr(a.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return ir(i.bytesValue).isEqual(ir(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return ze(i.geoPointValue.latitude)===ze(a.geoPointValue.latitude)&&ze(i.geoPointValue.longitude)===ze(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return ze(i.integerValue)===ze(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=ze(i.doubleValue),p=ze(a.doubleValue);return u===p?Lo(u)===Lo(p):isNaN(u)&&isNaN(p)}return!1})(n,e);case 9:return hi(n.arrayValue.values||[],e.arrayValue.values||[],an);case 10:case 11:return(function(i,a){const u=i.mapValue.fields||{},p=a.mapValue.fields||{};if(zu(u)!==zu(p))return!1;for(const _ in u)if(u.hasOwnProperty(_)&&(p[_]===void 0||!an(u[_],p[_])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function ws(n,e){return(n.values||[]).find((t=>an(t,e)))!==void 0}function fi(n,e){if(n===e)return 0;const t=sr(n),r=sr(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const p=ze(a.integerValue||a.doubleValue),_=ze(u.integerValue||u.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(n,e);case 3:return Gu(n.timestampValue,e.timestampValue);case 4:return Gu(Es(n),Es(e));case 5:return Ga(n.stringValue,e.stringValue);case 6:return(function(a,u){const p=ir(a),_=ir(u);return p.compareTo(_)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const p=a.split("/"),_=u.split("/");for(let v=0;v<p.length&&v<_.length;v++){const I=Ae(p[v],_[v]);if(I!==0)return I}return Ae(p.length,_.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const p=Ae(ze(a.latitude),ze(u.latitude));return p!==0?p:Ae(ze(a.longitude),ze(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ku(n.arrayValue,e.arrayValue);case 10:return(function(a,u){const p=a.fields||{},_=u.fields||{},v=p[Fo]?.arrayValue,I=_[Fo]?.arrayValue,P=Ae(v?.values?.length||0,I?.values?.length||0);return P!==0?P:Ku(v,I)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===fo.mapValue&&u===fo.mapValue)return 0;if(a===fo.mapValue)return 1;if(u===fo.mapValue)return-1;const p=a.fields||{},_=Object.keys(p),v=u.fields||{},I=Object.keys(v);_.sort(),I.sort();for(let P=0;P<_.length&&P<I.length;++P){const L=Ga(_[P],I[P]);if(L!==0)return L;const K=fi(p[_[P]],v[I[P]]);if(K!==0)return K}return Ae(_.length,I.length)})(n.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function Gu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);const t=rr(n),r=rr(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function Ku(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=fi(t[i],r[i]);if(a)return a}return Ae(t.length,r.length)}function di(n){return Ka(n)}function Ka(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=rr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Ka(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${Ka(t.fields[u])}`;return i+"}"})(n.mapValue):he(61005,{value:n})}function wo(n){switch(sr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zo(n);return e?16+wo(e):16;case 5:return 2*n.stringValue.length;case 6:return ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+wo(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Or(r.fields,((a,u)=>{i+=a.length+wo(u)})),i})(n.mapValue);default:throw he(13486,{value:n})}}function Qu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qa(n){return!!n&&"integerValue"in n}function bc(n){return!!n&&"arrayValue"in n}function Xu(n){return!!n&&"nullValue"in n}function Yu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Io(n){return!!n&&"mapValue"in n}function Ky(n){return(n?.mapValue?.fields||{})[Qh]?.stringValue===Xh}function ds(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Or(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ds(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ds(n.arrayValue.values[t]);return e}return{...n}}function Qy(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Gy}class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Io(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ds(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}u?r[p.lastSegment()]=ds(u):i.push(p.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Io(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Io(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Or(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new kt(ds(this.value))}}function Yh(n){const e=[];return Or(n.fields,((t,r)=>{const i=new ot([t]);if(Io(r)){const a=Yh(r.mapValue).fields;if(a.length===0)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)})),new jt(e)}class pt{constructor(e,t,r,i,a,u,p){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=p}static newInvalidDocument(e){return new pt(e,0,ge.min(),ge.min(),ge.min(),kt.empty(),0)}static newFoundDocument(e,t,r,i){return new pt(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new pt(e,2,t,ge.min(),ge.min(),kt.empty(),0)}static newUnknownDocument(e,t){return new pt(e,3,t,ge.min(),ge.min(),kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Uo{constructor(e,t){this.position=e,this.inclusive=t}}function Ju(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(a.field.isKeyField()?r=ce.comparator(ce.fromName(u.referenceValue),t.key):r=fi(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zu(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!an(n.position[t],e.position[t]))return!1;return!0}class Is{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xy(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Jh{}class Ke extends Jh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jy(e,t,r):t==="array-contains"?new t_(e,r):t==="in"?new n_(e,r):t==="not-in"?new r_(e,r):t==="array-contains-any"?new i_(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zy(e,r):new e_(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fi(t,this.value)):t!==null&&sr(this.value)===sr(t)&&this.matchesComparison(fi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends Jh{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bt(e,t)}matches(e){return Zh(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zh(n){return n.op==="and"}function ef(n){return Yy(n)&&Zh(n)}function Yy(n){for(const e of n.filters)if(e instanceof Bt)return!1;return!0}function Xa(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+di(n.value);if(ef(n))return n.filters.map((e=>Xa(e))).join(",");{const e=n.filters.map((t=>Xa(t))).join(",");return`${n.op}(${e})`}}function tf(n,e){return n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&an(r.value,i.value)})(n,e):n instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,u,p)=>a&&tf(u,i.filters[p])),!0):!1})(n,e):void he(19439)}function nf(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${di(t.value)}`})(n):n instanceof Bt?(function(t){return t.op.toString()+" {"+t.getFilters().map(nf).join(" ,")+"}"})(n):"Filter"}class Jy extends Ke{constructor(e,t,r){super(e,t,r),this.key=ce.fromName(r.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zy extends Ke{constructor(e,t){super(e,"in",t),this.keys=rf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class e_ extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=rf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rf(n,e){return(e.arrayValue?.values||[]).map((t=>ce.fromName(t.referenceValue)))}class t_ extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bc(t)&&ws(t.arrayValue,this.value)}}class n_ extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ws(this.value.arrayValue,t)}}class r_ extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ws(this.value.arrayValue,t)}}class i_ extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ws(this.value.arrayValue,r)))}}class s_{constructor(e,t=null,r=[],i=[],a=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=p,this.Te=null}}function el(n,e=null,t=[],r=[],i=null,a=null,u=null){return new s_(n,e,t,r,i,a,u)}function Ac(n){const e=me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Xa(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Jo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>di(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>di(r))).join(",")),e.Te=t}return e.Te}function Sc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xy(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zu(n.startAt,e.startAt)&&Zu(n.endAt,e.endAt)}function Ya(n){return ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class wi{constructor(e,t=null,r=[],i=[],a=null,u="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function o_(n,e,t,r,i,a,u,p){return new wi(n,e,t,r,i,a,u,p)}function Cc(n){return new wi(n)}function tl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sf(n){return n.collectionGroup!==null}function ps(n){const e=me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new Ye(ot.comparator);return u.filters.forEach((_=>{_.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Is(a,r))})),t.has(ot.keyField().canonicalString())||e.Ie.push(new Is(ot.keyField(),r))}return e.Ie}function tn(n){const e=me(n);return e.Ee||(e.Ee=a_(e,ps(n))),e.Ee}function a_(n,e){if(n.limitType==="F")return el(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Is(i.field,a)}));const t=n.endAt?new Uo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Uo(n.startAt.position,n.startAt.inclusive):null;return el(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ja(n,e){const t=n.filters.concat([e]);return new wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Za(n,e,t){return new wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ea(n,e){return Sc(tn(n),tn(e))&&n.limitType===e.limitType}function of(n){return`${Ac(tn(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>nf(i))).join(", ")}]`),Jo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>di(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>di(i))).join(",")),`Target(${r})`})(tn(n))}; limitType=${n.limitType})`}function ta(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of ps(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(u,p,_){const v=Ju(u,p,_);return u.inclusive?v<=0:v<0})(r.startAt,ps(r),i)||r.endAt&&!(function(u,p,_){const v=Ju(u,p,_);return u.inclusive?v>=0:v>0})(r.endAt,ps(r),i))})(n,e)}function c_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function af(n){return(e,t)=>{let r=!1;for(const i of ps(n)){const a=u_(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function u_(n,e,t){const r=n.field.isKeyField()?ce.comparator(e.key,t.key):(function(a,u,p){const _=u.data.field(a),v=p.data.field(a);return _!==null&&v!==null?fi(_,v):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}class Lr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Or(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return $h(this.inner)}size(){return this.innerSize}}const l_=new je(ce.comparator);function bn(){return l_}const cf=new je(ce.comparator);function as(...n){let e=cf;for(const t of n)e=e.insert(t.key,t);return e}function uf(n){let e=cf;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Cr(){return gs()}function lf(){return gs()}function gs(){return new Lr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const h_=new je(ce.comparator),f_=new Ye(ce.comparator);function Se(...n){let e=f_;for(const t of n)e=e.add(t);return e}const d_=new Ye(Ae);function p_(){return d_}function Rc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lo(e)?"-0":e}}function hf(n){return{integerValue:""+n}}function g_(n,e){return By(e)?hf(e):Rc(n,e)}class na{constructor(){this._=void 0}}function m_(n,e,t){return n instanceof bs?(function(i,a){const u={fields:{[Wh]:{stringValue:zh},[Kh]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ic(a)&&(a=Zo(a)),a&&(u.fields[Gh]=a),{mapValue:u}})(t,e):n instanceof As?df(n,e):n instanceof Ss?pf(n,e):(function(i,a){const u=ff(i,a),p=nl(u)+nl(i.Ae);return Qa(u)&&Qa(i.Ae)?hf(p):Rc(i.serializer,p)})(n,e)}function y_(n,e,t){return n instanceof As?df(n,e):n instanceof Ss?pf(n,e):t}function ff(n,e){return n instanceof jo?(function(r){return Qa(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class bs extends na{}class As extends na{constructor(e){super(),this.elements=e}}function df(n,e){const t=gf(e);for(const r of n.elements)t.some((i=>an(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ss extends na{constructor(e){super(),this.elements=e}}function pf(n,e){let t=gf(e);for(const r of n.elements)t=t.filter((i=>!an(i,r)));return{arrayValue:{values:t}}}class jo extends na{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function nl(n){return ze(n.integerValue||n.doubleValue)}function gf(n){return bc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class __{constructor(e,t){this.field=e,this.transform=t}}function v_(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof As&&i instanceof As||r instanceof Ss&&i instanceof Ss?hi(r.elements,i.elements,an):r instanceof jo&&i instanceof jo?an(r.Ae,i.Ae):r instanceof bs&&i instanceof bs})(n.transform,e.transform)}class E_{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ra{}function mf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pc(n.key,nn.none()):new Vs(n.key,n.data,nn.none());{const t=n.data,r=kt.empty();let i=new Ye(ot.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new Mr(n.key,r,new jt(i.toArray()),nn.none())}}function T_(n,e,t){n instanceof Vs?(function(i,a,u){const p=i.value.clone(),_=il(i.fieldTransforms,a,u.transformResults);p.setAll(_),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Mr?(function(i,a,u){if(!bo(i.precondition,a))return void a.convertToUnknownDocument(u.version);const p=il(i.fieldTransforms,a,u.transformResults),_=a.data;_.setAll(yf(i)),_.setAll(p),a.convertToFoundDocument(u.version,_).setHasCommittedMutations()})(n,e,t):(function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function ms(n,e,t,r){return n instanceof Vs?(function(a,u,p,_){if(!bo(a.precondition,u))return p;const v=a.value.clone(),I=sl(a.fieldTransforms,_,u);return v.setAll(I),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mr?(function(a,u,p,_){if(!bo(a.precondition,u))return p;const v=sl(a.fieldTransforms,_,u),I=u.data;return I.setAll(yf(a)),I.setAll(v),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),p===null?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((P=>P.field)))})(n,e,t,r):(function(a,u,p){return bo(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(n,e,t)}function w_(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ff(r.transform,i||null);a!=null&&(t===null&&(t=kt.empty()),t.set(r.field,a))}return t||null}function rl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hi(r,i,((a,u)=>v_(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vs extends ra{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mr extends ra{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function yf(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function il(n,e,t){const r=new Map;Re(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,p=e.data.field(a.field);r.set(a.field,y_(u,p,t[i]))}return r}function sl(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,m_(a,u,e))}return r}class Pc extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I_ extends ra{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class b_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&T_(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ms(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ms(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lf();return this.mutations.forEach((i=>{const a=e.get(i.key),u=a.overlayedDocument;let p=this.applyToLocalView(u,a.mutatedFields);p=t.has(i.key)?null:p;const _=mf(u,p);_!==null&&r.set(i.key,_),u.isValidDocument()||u.convertToNoDocument(ge.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Se())}isEqual(e){return this.batchId===e.batchId&&hi(this.mutations,e.mutations,((t,r)=>rl(t,r)))&&hi(this.baseMutations,e.baseMutations,((t,r)=>rl(t,r)))}}class kc{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return h_})();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new kc(e,t,r,i)}}class A_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class S_{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ge,Ce;function C_(n){switch(n){case H.OK:return he(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function _f(n){if(n===void 0)return In("GRPC error has no .code"),H.UNKNOWN;switch(n){case Ge.OK:return H.OK;case Ge.CANCELLED:return H.CANCELLED;case Ge.UNKNOWN:return H.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return H.INTERNAL;case Ge.UNAVAILABLE:return H.UNAVAILABLE;case Ge.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Ge.NOT_FOUND:return H.NOT_FOUND;case Ge.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Ge.ABORTED:return H.ABORTED;case Ge.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Ge.DATA_LOSS:return H.DATA_LOSS;default:return he(39323,{code:n})}}(Ce=Ge||(Ge={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";function R_(){return new TextEncoder}const P_=new Zn([4294967295,4294967295],0);function ol(n){const e=R_().encode(n),t=new Dh;return t.update(e),new Uint8Array(t.digest())}function al(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zn([t,r],0),new Zn([i,a],0)]}class xc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cs(`Invalid padding: ${t}`);if(r<0)throw new cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Zn.fromNumber(r)));return i.compare(P_)===1&&(i=new Zn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ol(e),[r,i]=al(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);if(!this.we(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new xc(a,i,t);return r.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=ol(e),[r,i]=al(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ia{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Os.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ia(ge.min(),i,new je(Ae),bn(),Se())}}class Os{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Os(r,t,Se(),Se(),Se())}}class Ao{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class vf{constructor(e,t){this.targetId=e,this.Ce=t}}class Ef{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cl{constructor(){this.ve=0,this.Fe=ul(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),t=Se(),r=Se();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:a})}})),new Os(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=ul()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class k_{constructor(e){this.Ge=e,this.ze=new Map,this.je=bn(),this.Je=po(),this.He=po(),this.Ye=new je(Ae)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Ya(a))if(r===0){const u=new ce(a.path);this.et(t,u,pt.newNoDocument(u,ge.min()))}else Re(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const p=this.ut(e),_=p?this.ct(p,e,u):1;if(_!==0){this.it(t);const v=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let u,p;try{u=ir(r).toUint8Array()}catch(_){if(_ instanceof Hh)return li("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new xc(u,i,a)}catch(_){return li(_ instanceof cs?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(p)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const p=this.ot(u);if(p){if(a.current&&Ya(p.target)){const _=new ce(p.target.path);this.It(_).has(u)||this.Et(u,_)||this.et(u,_,pt.newNoDocument(_,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let r=Se();this.He.forEach(((a,u)=>{let p=!0;u.forEachWhile((_=>{const v=this.ot(_);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const i=new ia(e,t,this.Ye,this.je,r);return this.je=bn(),this.Je=po(),this.He=po(),this.Ye=new je(Ae),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ye(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ye(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cl),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function po(){return new je(ce.comparator)}function ul(){return new je(ce.comparator)}const x_={asc:"ASCENDING",desc:"DESCENDING"},D_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N_={and:"AND",or:"OR"};class V_{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ec(n,e){return n.useProto3Json||Jo(e)?e:{value:e}}function qo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O_(n,e){return qo(n,e.toTimestamp())}function rn(n){return Re(!!n,49232),ge.fromTimestamp((function(t){const r=rr(t);return new Oe(r.seconds,r.nanos)})(n))}function Dc(n,e){return tc(n,e).canonicalString()}function tc(n,e){const t=(function(i){return new Ne(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wf(n){const e=Ne.fromString(n);return Re(Cf(e),10190,{key:e.toString()}),e}function nc(n,e){return Dc(n.databaseId,e.path)}function Na(n,e){const t=wf(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ce(bf(t))}function If(n,e){return Dc(n.databaseId,e)}function L_(n){const e=wf(n);return e.length===4?Ne.emptyPath():bf(e)}function rc(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bf(n){return Re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ll(n,e,t){return{name:nc(n,e),fields:t.value.mapValue.fields}}function M_(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:he(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(v,I){return v.useProto3Json?(Re(I===void 0||typeof I=="string",58123),ct.fromBase64String(I||"")):(Re(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),ct.fromUint8Array(I||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(v){const I=v.code===void 0?H.UNKNOWN:_f(v.code);return new ee(I,v.message||"")})(u);t=new Ef(r,i,a,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Na(n,r.document.name),a=rn(r.document.updateTime),u=r.document.createTime?rn(r.document.createTime):ge.min(),p=new kt({mapValue:{fields:r.document.fields}}),_=pt.newFoundDocument(i,a,u,p),v=r.targetIds||[],I=r.removedTargetIds||[];t=new Ao(v,I,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Na(n,r.document),a=r.readTime?rn(r.readTime):ge.min(),u=pt.newNoDocument(i,a),p=r.removedTargetIds||[];t=new Ao([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Na(n,r.document),a=r.removedTargetIds||[];t=new Ao([],a,i,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new S_(i,a),p=r.targetId;t=new vf(p,u)}}return t}function F_(n,e){let t;if(e instanceof Vs)t={update:ll(n,e.key,e.value)};else if(e instanceof Pc)t={delete:nc(n,e.key)};else if(e instanceof Mr)t={update:ll(n,e.key,e.data),updateMask:G_(e.fieldMask)};else{if(!(e instanceof I_))return he(16599,{Vt:e.type});t={verify:nc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const p=u.transform;if(p instanceof bs)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof As)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ss)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jo)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw he(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:O_(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:he(27497)})(n,e.precondition)),t}function U_(n,e){return n&&n.length>0?(Re(e!==void 0,14353),n.map((t=>(function(i,a){let u=i.updateTime?rn(i.updateTime):rn(a);return u.isEqual(ge.min())&&(u=rn(a)),new E_(u,i.transformResults||[])})(t,e)))):[]}function j_(n,e){return{documents:[If(n,e.path)]}}function q_(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=If(n,i);const a=(function(v){if(v.length!==0)return Sf(Bt.create(v,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(v){if(v.length!==0)return v.map((I=>(function(L){return{field:ei(L.field),direction:H_(L.dir)}})(I)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=ec(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:i}}function B_(n){let e=L_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Re(r===1,65062);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=(function(P){const L=Af(P);return L instanceof Bt&&ef(L)?L.getFilters():[L]})(t.where));let u=[];t.orderBy&&(u=(function(P){return P.map((L=>(function(W){return new Is(ti(W.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(L)))})(t.orderBy));let p=null;t.limit&&(p=(function(P){let L;return L=typeof P=="object"?P.value:P,Jo(L)?null:L})(t.limit));let _=null;t.startAt&&(_=(function(P){const L=!!P.before,K=P.values||[];return new Uo(K,L)})(t.startAt));let v=null;return t.endAt&&(v=(function(P){const L=!P.before,K=P.values||[];return new Uo(K,L)})(t.endAt)),o_(e,i,u,a,p,"F",_,v)}function $_(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Af(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ti(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ti(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ti(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ti(t.unaryFilter.field);return Ke.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(ti(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bt.create(t.compositeFilter.filters.map((r=>Af(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function H_(n){return x_[n]}function z_(n){return D_[n]}function W_(n){return N_[n]}function ei(n){return{fieldPath:n.canonicalString()}}function ti(n){return ot.fromServerFormat(n.fieldPath)}function Sf(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(Yu(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NAN"}};if(Xu(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Yu(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NOT_NAN"}};if(Xu(t.value))return{unaryFilter:{field:ei(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(t.field),op:z_(t.op),value:t.value}}})(n):n instanceof Bt?(function(t){const r=t.getFilters().map((i=>Sf(i)));return r.length===1?r[0]:{compositeFilter:{op:W_(t.op),filters:r}}})(n):he(54877,{filter:n})}function G_(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Qn{constructor(e,t,r,i,a=ge.min(),u=ge.min(),p=ct.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class K_{constructor(e){this.yt=e}}function Q_(n){const e=B_({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Za(e,e.limit,"L"):e}class X_{constructor(){this.Cn=new Y_}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(nr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(nr.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class Y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ye(Ne.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ne.comparator)).toArray()}}const hl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rf=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(Rf,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);class pi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pi(0)}static cr(){return new pi(-1)}}const fl="LruGarbageCollector",J_=1048576;function dl([n,e],[t,r]){const i=Ae(n,t);return i===0?Ae(e,r):i}class Z_{constructor(e){this.Ir=e,this.buffer=new Ye(dl),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dl(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ev{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(fl,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ti(t)?re(fl,"Ignoring IndexedDB error during garbage collection: ",t):await Ei(t)}await this.Vr(3e5)}))}}class tv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Yo.ce);const r=new Z_(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(hl)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hl):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,u,p,_,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),i=this.params.maximumSequenceNumbersToCollect):i=P,u=Date.now(),this.nthSequenceNumber(e,i)))).next((P=>(r=P,p=Date.now(),this.removeTargets(e,r,t)))).next((P=>(a=P,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((P=>(v=Date.now(),Jr()<=be.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-I}ms
	Determined least recently used ${i} in `+(p-u)+`ms
	Removed ${a} targets in `+(_-p)+`ms
	Removed ${P} documents in `+(v-_)+`ms
Total Duration: ${v-I}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:P}))))}}function nv(n,e){return new tv(n,e)}class rv{constructor(){this.changes=new Lr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sv{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ms(r.mutation,i,jt.empty(),Oe.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Se()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Se()){const i=Cr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let u=as();return a.forEach(((p,_)=>{u=u.insert(p,_.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Cr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Se())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,r,i){let a=bn();const u=gs(),p=(function(){return gs()})();return t.forEach(((_,v)=>{const I=r.get(v.key);i.has(v.key)&&(I===void 0||I.mutation instanceof Mr)?a=a.insert(v.key,v):I!==void 0?(u.set(v.key,I.mutation.getFieldMask()),ms(I.mutation,v,I.mutation.getFieldMask(),Oe.now())):u.set(v.key,jt.empty())})),this.recalculateAndSaveOverlays(e,a).next((_=>(_.forEach(((v,I)=>u.set(v,I))),t.forEach(((v,I)=>p.set(v,new iv(I,u.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=gs();let i=new je(((u,p)=>u-p)),a=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((_=>{const v=t.get(_);if(v===null)return;let I=r.get(_)||jt.empty();I=p.applyToLocalView(v,I),r.set(_,I);const P=(i.get(p.batchId)||Se()).add(_);i=i.insert(p.batchId,P)}))})).next((()=>{const u=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),v=_.key,I=_.value,P=lf();I.forEach((L=>{if(!a.has(L)){const K=mf(t.get(L),r.get(L));K!==null&&P.set(L,K),a=a.add(L)}})),u.push(this.documentOverlayCache.saveOverlays(e,v,P))}return z.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(u){return ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):z.resolve(Cr());let p=vs,_=a;return u.next((v=>z.forEach(v,((I,P)=>(p<P.largestBatchId&&(p=P.largestBatchId),a.get(I)?z.resolve():this.remoteDocumentCache.getEntry(e,I).next((L=>{_=_.insert(I,L)}))))).next((()=>this.populateOverlays(e,v,a))).next((()=>this.computeViews(e,_,v,Se()))).next((I=>({batchId:p,changes:uf(I)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((r=>{let i=as();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let u=as();return this.indexManager.getCollectionParents(e,a).next((p=>z.forEach(p,(_=>{const v=(function(P,L){return new wi(L,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(t,_.child(a));return this.getDocumentsMatchingCollectionQuery(e,v,r,i).next((I=>{I.forEach(((P,L)=>{u=u.insert(P,L)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((u=>{a.forEach(((_,v)=>{const I=v.getKey();u.get(I)===null&&(u=u.insert(I,pt.newInvalidDocument(I)))}));let p=as();return u.forEach(((_,v)=>{const I=a.get(_);I!==void 0&&ms(I.mutation,v,jt.empty(),Oe.now()),ta(t,v)&&(p=p.insert(_,v))})),p}))}}class ov{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:rn(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Q_(i.bundledQuery),readTime:rn(i.readTime)}})(t)),z.resolve()}}class av{constructor(){this.overlays=new je(ce.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Cr();return z.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const i=Cr(),a=t.length+1,u=new ce(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const _=p.getNext().value,v=_.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new je(((v,I)=>v-I));const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let I=a.get(v.largestBatchId);I===null&&(I=Cr(),a=a.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const p=Cr(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((v,I)=>p.set(v,I))),!(p.size()>=i)););return z.resolve(p)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new A_(t,r));let a=this.qr.get(t);a===void 0&&(a=Se(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class cv{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class Nc{constructor(){this.Qr=new Ye(tt.$r),this.Ur=new Ye(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new tt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new tt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ce(new Ne([])),r=new tt(t,e),i=new tt(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ne([])),r=new tt(t,e),i=new tt(t,e+1);let a=Se();return this.Ur.forEachInRange([r,i],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new tt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}class uv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(tt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new b_(a,t,r,i);this.mutationQueue.push(u);for(const p of i)this.Zr=this.Zr.add(new tt(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return z.resolve(u)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?wc:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(u=>{const p=this.Xr(u.Yr);a.push(p)})),z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ye(Ae);return t.forEach((i=>{const a=new tt(i,0),u=new tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(p=>{r=r.add(p.Yr)}))})),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ce.isDocumentKey(a)||(a=a.child(""));const u=new tt(new ce(a),0);let p=new Ye(Ae);return this.Zr.forEachWhile((_=>{const v=_.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(p=p.add(_.Yr)),!0)}),u),z.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(t.mutations,(i=>{const a=new tt(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new tt(t,0),i=this.Zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lv{constructor(e){this.ri=e,this.docs=(function(){return new je(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=bn();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():pt.newInvalidDocument(i))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=bn();const u=t.path,p=new ce(u.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:v,value:{document:I}}=_.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||Fy(My(I),r)<=0||(i.has(I.key)||ta(t,I))&&(a=a.insert(I.key,I.mutableCopy()))}return z.resolve(a)}getAllFromCollectionGroup(e,t,r,i){he(9500)}ii(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new hv(this)}getSize(e){return z.resolve(this.size)}}class hv extends rv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class fv{constructor(e){this.persistence=e,this.si=new Lr((t=>Ac(t)),Sc),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Nc,this.targetCount=0,this.ai=pi.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pi(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((u,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)})),z.waitFor(a).next((()=>i))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((u=>{a.push(i.markPotentiallyOrphaned(e,u))})),z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}}class Pf{constructor(e,t){this.ui={},this.overlays={},this.ci=new Yo(0),this.li=!1,this.li=!0,this.hi=new cv,this.referenceDelegate=e(this),this.Pi=new fv(this),this.indexManager=new X_,this.remoteDocumentCache=(function(i){return new lv(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new K_(t),this.Ii=new ov(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new av,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new uv(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){re("MemoryPersistence","Starting transaction:",e);const i=new dv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dv extends jy{constructor(e){super(),this.currentSequenceNumber=e}}class Vc{constructor(e){this.persistence=e,this.Ri=new Nc,this.Vi=null}static mi(e){return new Vc(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(r=>{const i=ce.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,ge.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bo{constructor(e,t){this.persistence=e,this.pi=new Lr((r=>$y(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=nv(this,t)}static mi(e,t){return new Bo(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return z.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?z.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,t).next((p=>{p||(r++,a.removeEntry(u,ge.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wo(e.data.value)),t}br(e,t,r){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Oc{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Se(),i=Se();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Oc(e,t.fromCache,r,i)}}class pv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zd()?8:qy(gt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new pv;return this.Ss(e,t,u).next((p=>{if(a.result=p,this.Vs)return this.bs(e,t,u,p.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Jr()<=be.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(Jr()<=be.DEBUG&&re("QueryEngine","Query:",Zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Jr()<=be.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(t))):z.resolve())}ys(e,t){if(tl(t))return z.resolve(null);let r=tn(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Za(t,null,"F"),r=tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Se(...a);return this.ps.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,r).next((_=>{const v=this.Ds(t,p);return this.Cs(t,v,u,_.readTime)?this.ys(e,Za(t,null,"F")):this.vs(e,v,t,_)}))))})))))}ws(e,t,r,i){return tl(t)||i.isEqual(ge.min())?z.resolve(null):this.ps.getDocuments(e,r).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,r,i)?z.resolve(null):(Jr()<=be.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(t)),this.vs(e,u,t,Ly(i,vs)).next((p=>p)))}))}Ds(e,t){let r=new Ye(af(e));return t.forEach(((i,a)=>{ta(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Jr()<=be.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.ps.getDocumentsMatchingQuery(e,t,nr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const Lc="LocalStore",mv=3e8;class yv{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new je(Ae),this.xs=new Lr((a=>Ac(a)),Sc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _v(n,e,t,r){return new yv(n,e,t,r)}async function kf(n,e){const t=me(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],p=[];let _=Se();for(const v of i){u.push(v.batchId);for(const I of v.mutations)_=_.add(I.key)}for(const v of a){p.push(v.batchId);for(const I of v.mutations)_=_.add(I.key)}return t.localDocuments.getDocuments(r,_).next((v=>({Ls:v,removedBatchIds:u,addedBatchIds:p})))}))}))}function vv(n,e){const t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,v,I){const P=v.batch,L=P.keys();let K=z.resolve();return L.forEach((W=>{K=K.next((()=>I.getEntry(_,W))).next((Q=>{const J=v.docVersions.get(W);Re(J!==null,48541),Q.version.compareTo(J)<0&&(P.applyToRemoteDocument(Q,v),Q.isValidDocument()&&(Q.setReadTime(v.commitVersion),I.addEntry(Q)))}))})),K.next((()=>p.mutationQueue.removeMutationBatch(_,P)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let _=Se();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(_=_.add(p.batch.mutations[v].key));return _})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function xf(n){const e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Ev(n,e){const t=me(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach(((I,P)=>{const L=i.get(P);if(!L)return;p.push(t.Pi.removeMatchingKeys(a,I.removedDocuments,P).next((()=>t.Pi.addMatchingKeys(a,I.addedDocuments,P))));let K=L.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(P)!==null?K=K.withResumeToken(ct.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):I.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(I.resumeToken,r)),i=i.insert(P,K),(function(Q,J,Y){return Q.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=mv?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(L,K,I)&&p.push(t.Pi.updateTargetData(a,K))}));let _=bn(),v=Se();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,I))})),p.push(Tv(a,u,e.documentUpdates).next((I=>{_=I.ks,v=I.qs}))),!r.isEqual(ge.min())){const I=t.Pi.getLastRemoteSnapshotVersion(a).next((P=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));p.push(I)}return z.waitFor(p).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,_,v))).next((()=>_))})).then((a=>(t.Ms=i,a)))}function Tv(n,e,t){let r=Se(),i=Se();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=bn();return t.forEach(((p,_)=>{const v=a.get(p);_.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(ge.min())?(e.removeEntry(p,_.readTime),u=u.insert(p,_)):!v.isValidDocument()||_.version.compareTo(v.version)>0||_.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(_),u=u.insert(p,_)):re(Lc,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",_.version)})),{ks:u,qs:i}}))}function wv(n,e){const t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Iv(n,e){const t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,z.resolve(i)):t.Pi.allocateTargetId(r).next((u=>(i=new Qn(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ic(n,e,t){const r=me(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ti(u))throw u;re(Lc,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function pl(n,e,t){const r=me(n);let i=ge.min(),a=Se();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(_,v,I){const P=me(_),L=P.xs.get(I);return L!==void 0?z.resolve(P.Ms.get(L)):P.Pi.getTargetData(v,I)})(r,u,tn(e)).next((p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,p.targetId).next((_=>{a=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?i:ge.min(),t?a:Se()))).next((p=>(bv(r,c_(e),p),{documents:p,Qs:a})))))}function bv(n,e,t){let r=n.Os.get(e)||ge.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class gl{constructor(){this.activeTargetIds=p_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Av{constructor(){this.Mo=new gl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sv{Oo(e){}shutdown(){}}const ml="ConnectivityMonitor";class yl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(ml,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(ml,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let go=null;function sc(){return go===null?go=(function(){return 268435456+Math.round(2147483648*Math.random())})():go++,"0x"+go.toString(16)}const Va="RestConnection",Cv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rv{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Mo?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const u=sc(),p=this.zo(e,t.toUriEncodedString());re(Va,`Sending RPC '${e}' ${u}:`,p,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,i,a);const{host:v}=new URL(p),I=mi(v);return this.Jo(e,p,_,r,I).then((P=>(re(Va,`Received RPC '${e}' ${u}: `,P),P)),(P=>{throw li(Va,`RPC '${e}' ${u} failed with error: `,P,"url: ",p,"request:",r),P}))}Ho(e,t,r,i,a,u){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+vi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=Cv[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class Pv{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ft="WebChannelConnection";class kv extends Rv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const u=sc();return new Promise(((p,_)=>{const v=new Nh;v.setWithCredentials(!0),v.listenOnce(Vh.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case To.NO_ERROR:const P=v.getResponseJson();re(ft,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(P)),p(P);break;case To.TIMEOUT:re(ft,`RPC '${e}' ${u} timed out`),_(new ee(H.DEADLINE_EXCEEDED,"Request time out"));break;case To.HTTP_ERROR:const L=v.getStatus();if(re(ft,`RPC '${e}' ${u} failed with status:`,L,"response text:",v.getResponseText()),L>0){let K=v.getResponseJson();Array.isArray(K)&&(K=K[0]);const W=K?.error;if(W&&W.status&&W.message){const Q=(function(Y){const ve=Y.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ve)>=0?ve:H.UNKNOWN})(W.status);_(new ee(Q,W.message))}else _(new ee(H.UNKNOWN,"Server responded with status "+v.getStatus()))}else _(new ee(H.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:u,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{re(ft,`RPC '${e}' ${u} completed.`)}}));const I=JSON.stringify(i);re(ft,`RPC '${e}' ${u} sending request:`,i),v.send(t,"POST",I,r,15)}))}T_(e,t,r){const i=sc(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Mh(),p=Lh(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(_.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const I=a.join("");re(ft,`Creating RPC '${e}' stream ${i}: ${I}`,_);const P=u.createWebChannel(I,_);this.I_(P);let L=!1,K=!1;const W=new Pv({Yo:J=>{K?re(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(L||(re(ft,`Opening RPC '${e}' stream ${i} transport.`),P.open(),L=!0),re(ft,`RPC '${e}' stream ${i} sending:`,J),P.send(J))},Zo:()=>P.close()}),Q=(J,Y,ve)=>{J.listen(Y,(Ee=>{try{ve(Ee)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return Q(P,os.EventType.OPEN,(()=>{K||(re(ft,`RPC '${e}' stream ${i} transport opened.`),W.o_())})),Q(P,os.EventType.CLOSE,(()=>{K||(K=!0,re(ft,`RPC '${e}' stream ${i} transport closed`),W.a_(),this.E_(P))})),Q(P,os.EventType.ERROR,(J=>{K||(K=!0,li(ft,`RPC '${e}' stream ${i} transport errored. Name:`,J.name,"Message:",J.message),W.a_(new ee(H.UNAVAILABLE,"The operation could not be completed")))})),Q(P,os.EventType.MESSAGE,(J=>{if(!K){const Y=J.data[0];Re(!!Y,16349);const ve=Y,Ee=ve?.error||ve[0]?.error;if(Ee){re(ft,`RPC '${e}' stream ${i} received error:`,Ee);const xe=Ee.status;let Je=(function(C){const S=Ge[C];if(S!==void 0)return _f(S)})(xe),qe=Ee.message;Je===void 0&&(Je=H.INTERNAL,qe="Unknown error status: "+xe+" with message "+Ee.message),K=!0,W.a_(new ee(Je,qe)),P.close()}else re(ft,`RPC '${e}' stream ${i} received:`,Y),W.u_(Y)}})),Q(p,Oh.STAT_EVENT,(J=>{J.stat===Wa.PROXY?re(ft,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===Wa.NOPROXY&&re(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Oa(){return typeof document<"u"?document:null}function sa(n){return new V_(n,!0)}class Df{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const _l="PersistentStream";class Nf{constructor(e,t,r,i,a,u,p,_){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Df(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(In(t.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ee(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(_l,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(_l,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xv extends Nf{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=M_(this.serializer,e),r=(function(a){if(!("targetChange"in a))return ge.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?ge.min():u.readTime?rn(u.readTime):ge.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=rc(this.serializer),t.addTarget=(function(a,u){let p;const _=u.target;if(p=Ya(_)?{documents:j_(a,_)}:{query:q_(a,_).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=Tf(a,u.resumeToken);const v=ec(a,u.expectedCount);v!==null&&(p.expectedCount=v)}else if(u.snapshotVersion.compareTo(ge.min())>0){p.readTime=qo(a,u.snapshotVersion.toTimestamp());const v=ec(a,u.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const r=$_(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=rc(this.serializer),t.removeTarget=e,this.q_(t)}}class Dv extends Nf{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=U_(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=rc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>F_(this.serializer,r)))};this.q_(t)}}class Nv{}class Vv extends Nv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,tc(t,r),i,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(H.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.Ho(e,tc(t,r),i,u,p,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ee(H.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ov{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(In(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vr="RemoteStore";class Lv{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Fr(this)&&(re(Vr,"Restarting streams for network reachability change."),await(async function(_){const v=me(_);v.Ea.add(4),await Ls(v),v.Ra.set("Unknown"),v.Ea.delete(4),await oa(v)})(this))}))})),this.Ra=new Ov(r,i)}}async function oa(n){if(Fr(n))for(const e of n.da)await e(!0)}async function Ls(n){for(const e of n.da)await e(!1)}function Vf(n,e){const t=me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jc(t)?Uc(t):Ii(t).O_()&&Fc(t,e))}function Mc(n,e){const t=me(n),r=Ii(t);t.Ia.delete(e),r.O_()&&Of(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fr(t)&&t.Ra.set("Unknown"))}function Fc(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ii(n).Y_(e)}function Of(n,e){n.Va.Ue(e),Ii(n).Z_(e)}function Uc(n){n.Va=new k_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ii(n).start(),n.Ra.ua()}function jc(n){return Fr(n)&&!Ii(n).x_()&&n.Ia.size>0}function Fr(n){return me(n).Ea.size===0}function Lf(n){n.Va=void 0}async function Mv(n){n.Ra.set("Online")}async function Fv(n){n.Ia.forEach(((e,t)=>{Fc(n,e)}))}async function Uv(n,e){Lf(n),jc(n)?(n.Ra.ha(e),Uc(n)):n.Ra.set("Unknown")}async function jv(n,e,t){if(n.Ra.set("Online"),e instanceof Ef&&e.state===2&&e.cause)try{await(async function(i,a){const u=a.cause;for(const p of a.targetIds)i.Ia.has(p)&&(await i.remoteSyncer.rejectListen(p,u),i.Ia.delete(p),i.Va.removeTarget(p))})(n,e)}catch(r){re(Vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $o(n,r)}else if(e instanceof Ao?n.Va.Ze(e):e instanceof vf?n.Va.st(e):n.Va.tt(e),!t.isEqual(ge.min()))try{const r=await xf(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const p=a.Va.Tt(u);return p.targetChanges.forEach(((_,v)=>{if(_.resumeToken.approximateByteSize()>0){const I=a.Ia.get(v);I&&a.Ia.set(v,I.withResumeToken(_.resumeToken,u))}})),p.targetMismatches.forEach(((_,v)=>{const I=a.Ia.get(_);if(!I)return;a.Ia.set(_,I.withResumeToken(ct.EMPTY_BYTE_STRING,I.snapshotVersion)),Of(a,_);const P=new Qn(I.target,_,v,I.sequenceNumber);Fc(a,P)})),a.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(r){re(Vr,"Failed to raise snapshot:",r),await $o(n,r)}}async function $o(n,e,t){if(!Ti(e))throw e;n.Ea.add(1),await Ls(n),n.Ra.set("Offline"),t||(t=()=>xf(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{re(Vr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await oa(n)}))}function Mf(n,e){return e().catch((t=>$o(n,t,e)))}async function aa(n){const e=me(n),t=or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wc;for(;qv(e);)try{const i=await wv(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Bv(e,i)}catch(i){await $o(e,i)}Ff(e)&&Uf(e)}function qv(n){return Fr(n)&&n.Ta.length<10}function Bv(n,e){n.Ta.push(e);const t=or(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ff(n){return Fr(n)&&!or(n).x_()&&n.Ta.length>0}function Uf(n){or(n).start()}async function $v(n){or(n).ra()}async function Hv(n){const e=or(n);for(const t of n.Ta)e.ea(t.mutations)}async function zv(n,e,t){const r=n.Ta.shift(),i=kc.from(r,e,t);await Mf(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await aa(n)}async function Wv(n,e){e&&or(n).X_&&await(async function(r,i){if((function(u){return C_(u)&&u!==H.ABORTED})(i.code)){const a=r.Ta.shift();or(r).B_(),await Mf(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await aa(r)}})(n,e),Ff(n)&&Uf(n)}async function vl(n,e){const t=me(n);t.asyncQueue.verifyOperationInProgress(),re(Vr,"RemoteStore received new credentials");const r=Fr(t);t.Ea.add(3),await Ls(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await oa(t)}async function Gv(n,e){const t=me(n);e?(t.Ea.delete(2),await oa(t)):e||(t.Ea.add(2),await Ls(t),t.Ra.set("Unknown"))}function Ii(n){return n.ma||(n.ma=(function(t,r,i){const a=me(t);return a.sa(),new xv(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Mv.bind(null,n),t_:Fv.bind(null,n),r_:Uv.bind(null,n),H_:jv.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),jc(n)?Uc(n):n.Ra.set("Unknown")):(await n.ma.stop(),Lf(n))}))),n.ma}function or(n){return n.fa||(n.fa=(function(t,r,i){const a=me(t);return a.sa(),new Dv(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:$v.bind(null,n),r_:Wv.bind(null,n),ta:Hv.bind(null,n),na:zv.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await aa(n)):(await n.fa.stop(),n.Ta.length>0&&(re(Vr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class qc{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,p=new qc(e,t,u,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bc(n,e){if(In("AsyncQueue",`${e}: ${n}`),Ti(n))return new ee(H.UNAVAILABLE,`${e}: ${n}`);throw n}class oi{static emptySet(e){return new oi(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ce.comparator(t.key,r.key):(t,r)=>ce.comparator(t.key,r.key),this.keyedMap=as(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class El{constructor(){this.ga=new je(ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class gi{constructor(e,t,r,i,a,u,p,_,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new gi(e,t,oi.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ea(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Kv{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Qv{constructor(){this.queries=Tl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=me(t),a=i.queries;i.queries=Tl(),a.forEach(((u,p)=>{for(const _ of p.Sa)_.onError(r)}))})(this,new ee(H.ABORTED,"Firestore shutting down"))}}function Tl(){return new Lr((n=>of(n)),ea)}async function jf(n,e){const t=me(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Kv,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const p=Bc(u,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(p)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&$c(t)}async function qf(n,e){const t=me(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Xv(n,e){const t=me(n);let r=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const p of u.Sa)p.Fa(i)&&(r=!0);u.wa=i}}r&&$c(t)}function Yv(n,e,t){const r=me(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function $c(n){n.Ca.forEach((e=>{e.next()}))}var oc,wl;(wl=oc||(oc={})).Ma="default",wl.Cache="cache";class Bf{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=gi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oc.Cache}}class $f{constructor(e){this.key=e}}class Hf{constructor(e){this.key=e}}class Jv{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Se(),this.mutatedKeys=Se(),this.eu=af(e),this.tu=new oi(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new El,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,p=!1;const _=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,v=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((I,P)=>{const L=i.get(I),K=ta(this.query,P)?P:null,W=!!L&&this.mutatedKeys.has(L.key),Q=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let J=!1;L&&K?L.data.isEqual(K.data)?W!==Q&&(r.track({type:3,doc:K}),J=!0):this.su(L,K)||(r.track({type:2,doc:K}),J=!0,(_&&this.eu(K,_)>0||v&&this.eu(K,v)<0)&&(p=!0)):!L&&K?(r.track({type:0,doc:K}),J=!0):L&&!K&&(r.track({type:1,doc:L}),J=!0,(_||v)&&(p=!0)),J&&(K?(u=u.add(K),a=Q?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const I=this.query.limitType==="F"?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{tu:u,iu:r,Cs:p,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((I,P)=>(function(K,W){const Q=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:J})}};return Q(K)-Q(W)})(I.type,P.type)||this.eu(I.doc,P.doc))),this.ou(r),i=i??!1;const p=t&&!i?this._u():[],_=this.Xa.size===0&&this.current&&!i?1:0,v=_!==this.Za;return this.Za=_,u.length!==0||v?{snapshot:new gi(this.query,e.tu,a,u,e.mutatedKeys,_===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new El,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Se(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Hf(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new $f(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Se();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return gi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hc="SyncEngine";class Zv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eE{constructor(e){this.key=e,this.hu=!1}}class tE{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Lr((p=>of(p)),ea),this.Iu=new Map,this.Eu=new Set,this.du=new je(ce.comparator),this.Au=new Map,this.Ru=new Nc,this.Vu={},this.mu=new Map,this.fu=pi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nE(n,e,t=!0){const r=Xf(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await zf(r,e,t,!0),i}async function rE(n,e){const t=Xf(n);await zf(t,e,!0,!1)}async function zf(n,e,t,r){const i=await Iv(n.localStore,tn(e)),a=i.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let p;return r&&(p=await iE(n,e,a,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vf(n.remoteStore,i),p}async function iE(n,e,t,r,i){n.pu=(P,L,K)=>(async function(Q,J,Y,ve){let Ee=J.view.ru(Y);Ee.Cs&&(Ee=await pl(Q.localStore,J.query,!1).then((({documents:l})=>J.view.ru(l,Ee))));const xe=ve&&ve.targetChanges.get(J.targetId),Je=ve&&ve.targetMismatches.get(J.targetId)!=null,qe=J.view.applyChanges(Ee,Q.isPrimaryClient,xe,Je);return bl(Q,J.targetId,qe.au),qe.snapshot})(n,P,L,K);const a=await pl(n.localStore,e,!0),u=new Jv(e,a.Qs),p=u.ru(a.documents),_=Os.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),v=u.applyChanges(p,n.isPrimaryClient,_);bl(n,t,v.au);const I=new Zv(e,t,u);return n.Tu.set(e,I),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function sE(n,e,t){const r=me(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((u=>!ea(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ic(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Mc(r.remoteStore,i.targetId),ac(r,i.targetId)})).catch(Ei)):(ac(r,i.targetId),await ic(r.localStore,i.targetId,!0))}async function oE(n,e){const t=me(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mc(t.remoteStore,r.targetId))}async function aE(n,e,t){const r=pE(n);try{const i=await(function(u,p){const _=me(u),v=Oe.now(),I=p.reduce(((K,W)=>K.add(W.key)),Se());let P,L;return _.persistence.runTransaction("Locally write mutations","readwrite",(K=>{let W=bn(),Q=Se();return _.Ns.getEntries(K,I).next((J=>{W=J,W.forEach(((Y,ve)=>{ve.isValidDocument()||(Q=Q.add(Y))}))})).next((()=>_.localDocuments.getOverlayedDocuments(K,W))).next((J=>{P=J;const Y=[];for(const ve of p){const Ee=w_(ve,P.get(ve.key).overlayedDocument);Ee!=null&&Y.push(new Mr(ve.key,Ee,Yh(Ee.value.mapValue),nn.exists(!0)))}return _.mutationQueue.addMutationBatch(K,v,Y,p)})).next((J=>{L=J;const Y=J.applyToLocalDocumentSet(P,Q);return _.documentOverlayCache.saveOverlays(K,J.batchId,Y)}))})).then((()=>({batchId:L.batchId,changes:uf(P)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,p,_){let v=u.Vu[u.currentUser.toKey()];v||(v=new je(Ae)),v=v.insert(p,_),u.Vu[u.currentUser.toKey()]=v})(r,i.batchId,t),await Ms(r,i.changes),await aa(r.remoteStore)}catch(i){const a=Bc(i,"Failed to persist write");t.reject(a)}}async function Wf(n,e){const t=me(n);try{const r=await Ev(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const u=t.Au.get(a);u&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Re(u.hu,14607):i.removedDocuments.size>0&&(Re(u.hu,42227),u.hu=!1))})),await Ms(t,r,e)}catch(r){await Ei(r)}}function Il(n,e,t){const r=me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,u)=>{const p=u.view.va(e);p.snapshot&&i.push(p.snapshot)})),(function(u,p){const _=me(u);_.onlineState=p;let v=!1;_.queries.forEach(((I,P)=>{for(const L of P.Sa)L.va(p)&&(v=!0)})),v&&$c(_)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cE(n,e,t){const r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let u=new je(ce.comparator);u=u.insert(a,pt.newNoDocument(a,ge.min()));const p=Se().add(a),_=new ia(ge.min(),new Map,new je(Ae),u,p);await Wf(r,_),r.du=r.du.remove(a),r.Au.delete(e),zc(r)}else await ic(r.localStore,e,!1).then((()=>ac(r,e,t))).catch(Ei)}async function uE(n,e){const t=me(n),r=e.batch.batchId;try{const i=await vv(t.localStore,e);Kf(t,r,null),Gf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ms(t,i)}catch(i){await Ei(i)}}async function lE(n,e,t){const r=me(n);try{const i=await(function(u,p){const _=me(u);return _.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let I;return _.mutationQueue.lookupMutationBatch(v,p).next((P=>(Re(P!==null,37113),I=P.keys(),_.mutationQueue.removeMutationBatch(v,P)))).next((()=>_.mutationQueue.performConsistencyCheck(v))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(v,I,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I))).next((()=>_.localDocuments.getDocuments(v,I)))}))})(r.localStore,e);Kf(r,e,t),Gf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ms(r,i)}catch(i){await Ei(i)}}function Gf(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Kf(n,e,t){const r=me(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ac(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Qf(n,r)}))}function Qf(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),zc(n))}function bl(n,e,t){for(const r of t)r instanceof $f?(n.Ru.addReference(r.key,e),hE(n,r)):r instanceof Hf?(re(Hc,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Qf(n,r.key)):he(19791,{wu:r})}function hE(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(re(Hc,"New document in limbo: "+t),n.Eu.add(r),zc(n))}function zc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ce(Ne.fromString(e)),r=n.fu.next();n.Au.set(r,new eE(t)),n.du=n.du.insert(t,r),Vf(n.remoteStore,new Qn(tn(Cc(t.path)),r,"TargetPurposeLimboResolution",Yo.ce))}}async function Ms(n,e,t){const r=me(n),i=[],a=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,_)=>{u.push(r.pu(_,e,t).then((v=>{if((v||t)&&r.isPrimaryClient){const I=v?!v.fromCache:t?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,I?"current":"not-current")}if(v){i.push(v);const I=Oc.As(_.targetId,v);a.push(I)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(_,v){const I=me(_);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>z.forEach(v,(L=>z.forEach(L.Es,(K=>I.persistence.referenceDelegate.addReference(P,L.targetId,K))).next((()=>z.forEach(L.ds,(K=>I.persistence.referenceDelegate.removeReference(P,L.targetId,K)))))))))}catch(P){if(!Ti(P))throw P;re(Lc,"Failed to update sequence numbers: "+P)}for(const P of v){const L=P.targetId;if(!P.fromCache){const K=I.Ms.get(L),W=K.snapshotVersion,Q=K.withLastLimboFreeSnapshotVersion(W);I.Ms=I.Ms.insert(L,Q)}}})(r.localStore,a))}async function fE(n,e){const t=me(n);if(!t.currentUser.isEqual(e)){re(Hc,"User change. New user:",e.toKey());const r=await kf(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((p=>{p.forEach((_=>{_.reject(new ee(H.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ms(t,r.Ls)}}function dE(n,e){const t=me(n),r=t.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let i=Se();const a=t.Iu.get(e);if(!a)return i;for(const u of a){const p=t.Tu.get(u);i=i.unionWith(p.view.nu)}return i}}function Xf(n){const e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cE.bind(null,e),e.Pu.H_=Xv.bind(null,e.eventManager),e.Pu.yu=Yv.bind(null,e.eventManager),e}function pE(n){const e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lE.bind(null,e),e}class Ho{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sa(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _v(this.persistence,new gv,e.initialUser,this.serializer)}Cu(e){return new Pf(Vc.mi,this.serializer)}Du(e){return new Av}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ho.provider={build:()=>new Ho};class gE extends Ho{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof Bo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ev(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Pf((r=>Bo.mi(r,t)),this.serializer)}}class cc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Il(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fE.bind(null,this.syncEngine),await Gv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qv})()}createDatastore(e){const t=sa(e.databaseInfo.databaseId),r=(function(a){return new kv(a)})(e.databaseInfo);return(function(a,u,p,_){return new Vv(a,u,p,_)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,u,p){return new Lv(r,i,a,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Il(this.syncEngine,t,0)),(function(){return yl.v()?new yl:new Sv})())}createSyncEngine(e,t){return(function(i,a,u,p,_,v,I){const P=new tE(i,a,u,p,_,v);return I&&(P.gu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=me(t);re(Vr,"RemoteStore shutting down."),r.Ea.add(5),await Ls(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cc.provider={build:()=>new cc};class Yf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ar="FirestoreClient";class mE{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{re(ar,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(re(ar,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function La(n,e){n.asyncQueue.verifyOperationInProgress(),re(ar,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await kf(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Al(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yE(n);re(ar,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>vl(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>vl(e.remoteStore,i))),n._onlineComponents=e}async function yE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){re(ar,"Using user provided OfflineComponentProvider");try{await La(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;li("Error using user provided cache. Falling back to memory cache: "+t),await La(n,new Ho)}}else re(ar,"Using default OfflineComponentProvider"),await La(n,new gE(void 0));return n._offlineComponents}async function Jf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(re(ar,"Using user provided OnlineComponentProvider"),await Al(n,n._uninitializedComponentsProvider._online)):(re(ar,"Using default OnlineComponentProvider"),await Al(n,new cc))),n._onlineComponents}function _E(n){return Jf(n).then((e=>e.syncEngine))}async function Zf(n){const e=await Jf(n),t=e.eventManager;return t.onListen=nE.bind(null,e.syncEngine),t.onUnlisten=sE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oE.bind(null,e.syncEngine),t}function vE(n,e,t={}){const r=new En;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,p,_,v){const I=new Yf({next:L=>{I.Nu(),u.enqueueAndForget((()=>qf(a,P)));const K=L.docs.has(p);!K&&L.fromCache?v.reject(new ee(H.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&L.fromCache&&_&&_.source==="server"?v.reject(new ee(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(L)},error:L=>v.reject(L)}),P=new Bf(Cc(p.path),I,{includeMetadataChanges:!0,qa:!0});return jf(a,P)})(await Zf(n),n.asyncQueue,e,t,r))),r.promise}function EE(n,e,t={}){const r=new En;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,p,_,v){const I=new Yf({next:L=>{I.Nu(),u.enqueueAndForget((()=>qf(a,P))),L.fromCache&&_.source==="server"?v.reject(new ee(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(L)},error:L=>v.reject(L)}),P=new Bf(p,I,{includeMetadataChanges:!0,qa:!0});return jf(a,P)})(await Zf(n),n.asyncQueue,e,t,r))),r.promise}function ed(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Sl=new Map;const td="firestore.googleapis.com",Cl=!0;class Rl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ee(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=td,this.ssl=Cl}else this.host=e.host,this.ssl=e.ssl??Cl;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J_)throw new ee(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Oy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ed(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ee(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ca{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Ay;switch(r.type){case"firstParty":return new Py(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Sl.get(t);r&&(re("ComponentProvider","Removing Datastore"),Sl.delete(t),r.terminate())})(this),Promise.resolve()}}function TE(n,e,t,r={}){n=tr(n,ca);const i=mi(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;i&&($l(`https://${p}`),Hl("Firestore",!0)),a.host!==td&&a.host!==p&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...a,host:p,ssl:i,emulatorOptions:r};if(!Pr(_,u)&&(n._setSettings(_),r.mockUserToken)){let v,I;if(typeof r.mockUserToken=="string")v=r.mockUserToken,I=dt.MOCK_USER;else{v=Ld(r.mockUserToken,n._app?.options.projectId);const P=r.mockUserToken.sub||r.mockUserToken.user_id;if(!P)throw new ee(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new dt(P)}n._authCredentials=new Sy(new Uh(v,I))}}class Ur{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class Xe{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ns(t,Xe._jsonSchema))return new Xe(e,r||null,new ce(Ne.fromString(t.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Qe("string",Xe._jsonSchemaVersion),referencePath:Qe("string")};class er extends Ur{constructor(e,t,r){super(e,t,Cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new ce(e))}withConverter(e){return new er(this.firestore,e,this._path)}}function iT(n,e,...t){if(n=at(n),jh("collection","path",e),n instanceof ca){const r=Ne.fromString(e,...t);return qu(r),new er(n,null,r)}{if(!(n instanceof Xe||n instanceof er))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return qu(r),new er(n.firestore,null,r)}}function sT(n,e,...t){if(n=at(n),arguments.length===1&&(e=Tc.newId()),jh("doc","path",e),n instanceof ca){const r=Ne.fromString(e,...t);return ju(r),new Xe(n,null,new ce(r))}{if(!(n instanceof Xe||n instanceof er))throw new ee(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return ju(r),new Xe(n.firestore,n instanceof er?n.converter:null,new ce(r))}}const Pl="AsyncQueue";class kl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Df(this,"async_queue_retry"),this._c=()=>{const r=Oa();r&&re(Pl,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Oa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Oa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new En;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ti(e))throw e;re(Pl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,In("INTERNAL UNHANDLED ERROR: ",xl(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=qc.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&he(47125,{Pc:xl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xl(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Fs extends ca{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kl,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kl(e),this._firestoreClient=void 0,await e}}}function wE(n,e){const t=typeof n=="object"?n:Kl(),r=typeof n=="string"?n:Mo,i=hc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Vd("firestore");a&&TE(i,...a)}return i}function Wc(n){if(n._terminated)throw new ee(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IE(n),n._firestoreClient}function IE(n){const e=n._freezeSettings(),t=(function(i,a,u,p){return new Wy(i,a,u,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ed(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mE(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xt(ct.fromBase64String(e))}catch(t){throw new ee(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xt(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ns(e,xt._jsonSchema))return xt.fromBase64String(e.bytes)}}xt._jsonSchemaVersion="firestore/bytes/1.0",xt._jsonSchema={type:Qe("string",xt._jsonSchemaVersion),bytes:Qe("string")};class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kc{constructor(e){this._methodName=e}}class sn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sn._jsonSchemaVersion}}static fromJSON(e){if(Ns(e,sn._jsonSchema))return new sn(e.latitude,e.longitude)}}sn._jsonSchemaVersion="firestore/geoPoint/1.0",sn._jsonSchema={type:Qe("string",sn._jsonSchemaVersion),latitude:Qe("number"),longitude:Qe("number")};class on{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:on._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ns(e,on._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new on(e.vectorValues);throw new ee(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}on._jsonSchemaVersion="firestore/vectorValue/1.0",on._jsonSchema={type:Qe("string",on._jsonSchemaVersion),vectorValues:Qe("object")};const bE=/^__.*__$/;class AE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vs(e,this.data,t,this.fieldTransforms)}}function nd(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:n})}}class Qc{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zo(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nd(this.Ac)&&bE.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SE{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sa(e)}Cc(e,t,r,i=!1){return new Qc({Ac:e,methodName:t,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rd(n){const e=n._freezeSettings(),t=sa(n._databaseId);return new SE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CE(n,e,t,r,i,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);od("Data must be an object, but it was:",u,r);const p=id(r,u);let _,v;if(a.merge)_=new jt(u.fieldMask),v=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const P of a.mergeFields){const L=PE(e,P,t);if(!u.contains(L))throw new ee(H.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);xE(I,L)||I.push(L)}_=new jt(I),v=u.fieldTransforms.filter((P=>_.covers(P.field)))}else _=null,v=u.fieldTransforms;return new AE(new kt(p),_,v)}class Xc extends Kc{_toFieldTransform(e){return new __(e.path,new bs)}isEqual(e){return e instanceof Xc}}function RE(n,e,t,r=!1){return Yc(t,n.Cc(r?4:3,e))}function Yc(n,e){if(sd(n=at(n)))return od("Unsupported field value:",e,n),id(n,e);if(n instanceof Kc)return(function(r,i){if(!nd(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let u=0;for(const p of r){let _=Yc(p,i.wc(u));_==null&&(_={nullValue:"NULL_VALUE"}),a.push(_),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g_(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Oe.fromDate(r);return{timestampValue:qo(i.serializer,a)}}if(r instanceof Oe){const a=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qo(i.serializer,a)}}if(r instanceof sn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xt)return{bytesValue:Tf(i.serializer,r._byteString)};if(r instanceof Xe){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof on)return(function(u,p){return{mapValue:{fields:{[Qh]:{stringValue:Xh},[Fo]:{arrayValue:{values:u.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return Rc(p.serializer,v)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Xo(r)}`)})(n,e)}function id(n,e){const t={};return $h(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Or(n,((r,i)=>{const a=Yc(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function sd(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof sn||n instanceof xt||n instanceof Xe||n instanceof Kc||n instanceof on)}function od(n,e,t){if(!sd(t)||!qh(t)){const r=Xo(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function PE(n,e,t){if((e=at(e))instanceof Gc)return e._internalPath;if(typeof e=="string")return ad(n,e);throw zo("Field path arguments must be of type string or ",n,!1,void 0,t)}const kE=new RegExp("[~\\*/\\[\\]]");function ad(n,e,t){if(e.search(kE)>=0)throw zo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch{throw zo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zo(n,e,t,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new ee(H.INVALID_ARGUMENT,p+n+_)}function xE(n,e){return n.some((t=>t.isEqual(e)))}class cd{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ua("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DE extends cd{data(){return super.data()}}function ua(n,e){return typeof e=="string"?ad(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}function NE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jc{}class ud extends Jc{}function oT(n,e,...t){let r=[];e instanceof Jc&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((_=>_ instanceof Zc)).length,p=a.filter((_=>_ instanceof la)).length;if(u>1||u>0&&p>0)throw new ee(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class la extends ud{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new la(e,t,r)}_apply(e){const t=this._parse(e);return ld(e._query,t),new Ur(e.firestore,e.converter,Ja(e._query,t))}_parse(e){const t=rd(e.firestore);return(function(a,u,p,_,v,I,P){let L;if(v.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new ee(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){Nl(P,I);const W=[];for(const Q of P)W.push(Dl(_,a,Q));L={arrayValue:{values:W}}}else L=Dl(_,a,P)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||Nl(P,I),L=RE(p,u,P,I==="in"||I==="not-in");return Ke.create(v,I,L)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function aT(n,e,t){const r=e,i=ua("where",n);return la._create(i,r,t)}class Zc extends Jc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zc(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Bt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let u=i;const p=a.getFlattenedFilters();for(const _ of p)ld(u,_),u=Ja(u,_)})(e._query,t),new Ur(e.firestore,e.converter,Ja(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class eu extends ud{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new eu(e,t)}_apply(e){const t=(function(i,a,u){if(i.startAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Is(a,u)})(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,(function(i,a){const u=i.explicitOrderBy.concat([a]);return new wi(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function cT(n,e="asc"){const t=e,r=ua("orderBy",n);return eu._create(r,t)}function Dl(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new ee(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sf(e)&&t.indexOf("/")!==-1)throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ne.fromString(t));if(!ce.isDocumentKey(r))throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qu(n,new ce(r))}if(t instanceof Xe)return Qu(n,t._key);throw new ee(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xo(t)}.`)}function Nl(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ld(n,e){const t=(function(i,a){for(const u of i)for(const p of u.getFlattenedFilters())if(a.indexOf(p.op)>=0)return p.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VE{convertValue(e,t="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Or(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Fo].arrayValue?.values?.map((r=>ze(r.doubleValue)));return new on(t)}convertGeoPoint(e){return new sn(ze(e.latitude),ze(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Es(e));default:return null}}convertTimestamp(e){const t=rr(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ne.fromString(e);Re(Cf(r),9688,{name:e});const i=new Ts(r.get(1),r.get(3)),a=new ce(r.popFirst(5));return i.isEqual(t)||In(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function OE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class us{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rr extends cd{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new So(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ua("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Rr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Rr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rr._jsonSchema={type:Qe("string",Rr._jsonSchemaVersion),bundleSource:Qe("string","DocumentSnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class So extends Rr{data(e={}){return super.data(e)}}class ai{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new us(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new So(this._firestore,this._userDataWriter,r.key,r,new us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((p=>{const _=new So(i._firestore,i._userDataWriter,p.doc.key,p.doc,new us(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((p=>a||p.type!==3)).map((p=>{const _=new So(i._firestore,i._userDataWriter,p.doc.key,p.doc,new us(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let v=-1,I=-1;return p.type!==0&&(v=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),I=u.indexOf(p.doc.key)),{type:LE(p.type),doc:_,oldIndex:v,newIndex:I}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function uT(n){n=tr(n,Xe);const e=tr(n.firestore,Fs);return vE(Wc(e),n._key).then((t=>ME(e,n,t)))}ai._jsonSchemaVersion="firestore/querySnapshot/1.0",ai._jsonSchema={type:Qe("string",ai._jsonSchemaVersion),bundleSource:Qe("string","QuerySnapshot"),bundleName:Qe("string"),bundle:Qe("string")};class hd extends VE{constructor(e){super(),this.firestore=e}convertBytes(e){return new xt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,t)}}function lT(n){n=tr(n,Ur);const e=tr(n.firestore,Fs),t=Wc(e),r=new hd(e);return NE(n._query),EE(t,n._query).then((i=>new ai(e,r,n,i)))}function hT(n,e,t){n=tr(n,Xe);const r=tr(n.firestore,Fs),i=OE(n.converter,e,t);return fd(r,[CE(rd(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,nn.none())])}function fT(n){return fd(tr(n.firestore,Fs),[new Pc(n._key,nn.none())])}function fd(n,e){return(function(r,i){const a=new En;return r.asyncQueue.enqueueAndForget((async()=>aE(await _E(r),i,a))),a.promise})(Wc(n),e)}function ME(n,e,t){const r=t.docs.get(e._key),i=new hd(n);return new Rr(n,i,e._key,r,new us(t.hasPendingWrites,t.fromCache),e.converter)}function dT(){return new Xc("serverTimestamp")}(function(e,t=!0){(function(i){vi=i})(yi),ci(new kr("firestore",((r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),p=new Fs(new Cy(r.getProvider("auth-internal")),new ky(u,r.getProvider("app-check-internal")),(function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ee(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ts(v.options.projectId,I)})(u,i),u);return a={useFetchStreams:t,...a},p._setSettings(a),p}),"PUBLIC").setMultipleInstances(!0)),Jn(Lu,Mu,e),Jn(Lu,Mu,"esm2020")})();const FE={apiKey:"AIzaSyBY_knF8M51NlWhlf_nJ_RdTzduvbWFWxI",authDomain:"wiilove.firebaseapp.com",projectId:"wiilove",storageBucket:"wiilove.firebasestorage.app",messagingSenderId:"788669311154",appId:"1:788669311154:web:2d435bf7d6652ff13741ab"},dd=Gl(FE),pT=Iy(dd),gT=wE(dd);(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]],e=r=>{const[i,a]=se(r).data("tema").split("|");se("html").attr("data-theme",i),(se('meta[name="theme-color"]')[0]||se('<meta name="theme-color">').appendTo("head")[0]).content=a,UE("wiTema",`${i}|${a}`,720),se(".mtha").removeClass("mtha"),se(r).addClass("mtha")},t=()=>{se(".witemas").html(n.map(([a,u])=>`<div class="tema" data-tema="${a}|${u}" style="background:${u}"></div>`).join(""));const r=jE("wiTema"),i=se(`[data-tema="${r}"]`)[0]||se(".tema").first()[0];i&&e(i),se(document).off("click.witema").on("click.witema",".tema",a=>e(a.currentTarget))};return se(".witemas").length?t():new MutationObserver(r=>r.some(({addedNodes:i})=>[...i].some(a=>a.querySelector?.(".witemas")))&&(t(),!0)).observe(document.body,{childList:1,subtree:1}),{set:e}})();const mT=n=>{window.location.href=new URL("/",window.location.href).toString()};function ls(n,e="error",t=3e3){const r={success:"fa-check-circle",error:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"},i={success:"#2E7D32",error:"#D32F2F",warning:"#F9A825",info:"#0288D1"};se("#notificationsContainer").length||se("body").append('<div id="notificationsContainer" style="position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;"></div>');const a=se(`
    <div class="notification" style="background:#fff;border-left:4px solid ${i[e]};box-shadow:0 4px 12px rgba(0,0,0,.1);border-radius:8px;padding:1rem;display:flex;align-items:center;gap:.5rem;opacity:0;transform:translateX(20px);transition:all .3s ease;">
      <i class="fas ${r[e]}" style="color:${i[e]};"></i>
      <span style="flex:1">${n}</span>
      <button style="background:none;border:none;font-size:1.2rem;cursor:pointer;">&times;</button>
    </div>
  `);se("#notificationsContainer").append(a),requestAnimationFrame(()=>a.css({opacity:1,transform:"translateX(0)"})),a.find("button").on("click",()=>{a.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>a.remove(),300)}),setTimeout(()=>{a.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>a.remove(),300)},t)}const Vl=(n,e="success")=>{se(".alert-box").remove();const t={error:{bg:"#FFE8E6",txt:"#D32F2F",border:"#FFCDD2",icon:"fa-circle-exclamation"},success:{bg:"#E8F5E9",txt:"#2E7D32",border:"#C8E6C9",icon:"fa-circle-check"}},{bg:r,txt:i,border:a,icon:u}=t[e]||t.error,p=se(`
        <div class="alert-box" style="
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 8px;
            background: ${r};
            color: ${i};
            border-left: 4px solid ${a};
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 300px;
            max-width: 90%;
            
        ">
            <i class="fas ${u}"></i>
            <span>${n}</span>
        </div>
    `).appendTo("body").hide().fadeIn(300);setTimeout(()=>p.fadeOut(300,()=>p.remove()),3e3)};function UE(n,e,t){try{localStorage.setItem(n,JSON.stringify({value:e,expiry:Date.now()+t*36e5,type:typeof e,isArray:Array.isArray(e)}))}catch(r){console.error("Error savels",r)}}function jE(n){try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return!t||Date.now()>t.expiry?(localStorage.removeItem(n),null):t.value}catch(e){return console.error("Error getls:",e),qE(n),null}}function qE(...n){n.forEach(e=>{e&&typeof e=="string"&&localStorage.removeItem(e)})}function BE(n,e,t="top",r=1800){const i={success:"--success",error:"--error",warning:"--warning",info:"--info"},a=i[t]?t:null,u=a?"top":t;if(se("#witip-styles").length||se('<style id="witip-styles">.witip{position:fixed;background:var(--mco);color:var(--txa);z-index:10000;padding:8px 12px;border-radius:4px;font-size:.85rem;max-width:250px;box-shadow:0 2px 8px rgba(0,0,0,.2);opacity:0;transition:opacity .2s;pointer-events:none}.witip::after{content:"";position:absolute;border:6px solid transparent}.witip.show{opacity:1}.witip.top::after{top:100%;left:50%;margin-left:-6px;border-top-color:inherit}.witip.bottom::after{bottom:100%;left:50%;margin-left:-6px;border-bottom-color:inherit}.witip.left::after{left:100%;top:50%;margin-top:-6px;border-left-color:inherit}.witip.right::after{right:100%;top:50%;margin-top:-6px;border-right-color:inherit}.witip.success{background:var(--success);color:#fff}.witip.error{background:var(--error);color:#fff}.witip.warning{background:var(--warning);color:#000}.witip.info{background:var(--info);color:#fff}</style>').appendTo("head"),typeof n=="string"&&(n.includes(",")||n.match(/^[.#a-z]/i)))return se(n).each((Je,qe)=>BE(qe,e,t,r)),se(n);const p=se(n);if(!p.length)return;clearTimeout(p.data("witip-timer")),se(".witip").remove();const _=p.attr("id")||p.attr("id",`wtip-${Date.now()}-${Math.floor(Math.random()*1e3)}`).attr("id"),v=se("<div>",{class:`witip ${u} ${a||""}`,"data-for":_,html:e,css:{"border-color":a?`var(${i[a]})`:"var(--mco)"}});a&&v.css("background-color",`var(${i[a]})`),se("body").append(v);const{left:I,top:P,right:L,bottom:K,width:W,height:Q}=p[0].getBoundingClientRect(),J=v.outerWidth(),Y=v.outerHeight(),ve={top:{x:I+W/2-J/2,y:P-Y-8},bottom:{x:I+W/2-J/2,y:K+8},left:{x:I-J-8,y:P+Q/2-Y/2},right:{x:L+8,y:P+Q/2-Y/2}};let{x:Ee,y:xe}=ve[u];return Ee=Math.max(8,Math.min(Ee,window.innerWidth-J-8)),xe=Math.max(8,Math.min(xe,window.innerHeight-Y-8)),v.css({left:Ee,top:xe}),p.data("witip-timer",setTimeout(()=>{v.addClass("show"),r>0&&setTimeout(()=>{v.removeClass("show"),setTimeout(()=>v.remove(),200)},r)},10)),p}let $E=2024,HE="@wilder.taype",zE="https://wtaype.github.io/",WE="v12";function yT(){const n=new Date;return`
<footer class="foo wb txc psa">
  <span>Creado con <i class="fas fa-heart"></i> by <a class="ftx lkme" href="${zE}" target="_blank">${HE}</a> </span>
  <span> ${$E} - <span class="wty">${n.getFullYear()}</span><span>
  <span class="abw"> | Acerca del app ${WE} | actualizado:
  <span class="wtu" id="7209768286404563606">${n.toLocaleString()}</span>
</footer>
  `}se("style").append(".foo{width:100%;text-align:center;padding-block:1.5vh 1vh;background:var(--wb);border-radius:1vh 1vh 0 0;}.foo *{font-size:var(--fz_s2);margin-inline:.3vh;}.foo a{color:var(--bg2);}.foo i{color:var(--mco);}.abwc{background:var(--bg);top:0;width:99%;height:100%;padding:2vh 2vw;overflow:scroll;line-height:1.80;}.abwok{background:var(--mco);color:var(--txa);}");const It={overlayActual:null,modalActual:null,callbacks:{},estilosInyectados:!1};function GE(){if(It.estilosInyectados)return;se("head").append(`
    <style id="wimodal-styles">
      .wimodal-overlay {
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      
      .wimodal-overlay.activo {
        opacity: 1;
      }
      
      .wimodal-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(30px);
        border: 1px solid var(--bg1);
        border-radius: 2vh;
        padding: 3vh 3vw;
        max-width: 60vw;
        width: 100%;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 2vh 6vh rgba(0,0,0,0.3);
        transform: translateY(5vh);
        opacity: 0;
        transition: all 0.4s ease;
        position: relative;
      }
      
      .wimodal-container.activo {
        transform: translateY(0);
        opacity: 1;
      }
      
      .wimodal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 3vh;
        padding-bottom: 2vh;
        border-bottom: 2px solid var(--bg);
      }
      
      .wimodal-title {
        color: var(--mco);
        font-size: clamp(1.5rem, 2vw, 1.8rem);
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 1vh;
      }
      
      .wimodal-close {
        width: 4vh;
        height: 4vh;
        border-radius: 50%;
        border: none;
        background: rgba(239, 68, 68, 0.1);
        color: var(--error);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(1.1rem, 1.3vw, 1.2rem);
      }
      
      .wimodal-close:hover {
        background: var(--error);
        color: white;
        transform: rotate(90deg);
      }
      
      .wimodal-body {
        margin-bottom: 2vh;
      }
      
      .wimodal-footer {
        display: flex;
        gap: 1.5vh;
        justify-content: flex-end;
        margin-top: 2vh;
      }
      
      .wimodal-btn {
        border: none;
        padding: 1.2vh 2.5vw;
        border-radius: 1vh;
        font-weight: 700;
        font-size: clamp(0.9rem, 1.05vw, 1rem);
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--ff_pop);
        box-shadow: 0 0.3vh 1vh rgba(0,0,0,0.2);
      }
      
      .wimodal-btn:hover {
        transform: translateY(-0.3vh);
        box-shadow: 0 0.5vh 1.5vh rgba(0,0,0,0.3);
      }
      
      .wimodal-btn-primary {
        background: linear-gradient(135deg, var(--mco), var(--hv));
        color: white;
      }
      
      .wimodal-btn-secondary {
        background: rgba(107, 114, 128, 0.2);
        color: var(--bg4);
      }
      
      .wimodal-btn-danger {
        background: linear-gradient(135deg, #ff3849, #dc2626);
        color: white;
      }
      
      .wimodal-btn-success {
        background: linear-gradient(135deg, #3cd741, #16a34a);
        color: white;
      }
      
      /* Estilos para formulario de proyecto */
      .wimodal-form-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2vh;
        margin-bottom: 2vh;
      }
      
      .wimodal-form-group {
        display: flex;
        flex-direction: column;
        gap: 0.8vh;
      }
      
      .wimodal-form-group label {
        color: var(--bg4);
        font-weight: 600;
        font-size: clamp(0.85rem, 1vw, 0.95rem);
        display: flex;
        align-items: center;
        gap: 0.8vh;
      }
      
      .wimodal-form-group label i {
        color: var(--mco);
      }
      
      .wimodal-form-group input,
      .wimodal-form-group textarea {
        width: 100%;
        padding: 1.2vh 1.2vw;
        border: 2px solid var(--bdr);
        border-radius: 1vh;
        outline: none;
        background: rgba(255, 255, 255, 0.8);
        font-size: clamp(0.85rem, 1vw, 0.95rem);
        font-family: var(--ff_pop);
        font-weight: 500;
        color: var(--txe);
        transition: all 0.3s ease;
      }
      
      .wimodal-form-group textarea {
        min-height: 15vh;
        font-family: 'Courier New', monospace;
        resize: vertical;
      }
      
      .wimodal-form-group input:focus,
      .wimodal-form-group textarea:focus {
        border-color: var(--mco);
        box-shadow: 0 0 0 0.4vh var(--bg1);
        background: white;
      }
      
      .wimodal-preview-img {
        width: 100%;
        max-height: 25vh;
        object-fit: cover;
        border-radius: 1vh;
        margin-top: 1vh;
        display: none;
      }
      
      @media (max-width: 768px) {
        .wimodal-container {
          max-width: 90vw;
          padding: 2vh 4vw;
        }
      }
    </style>
  `),It.estilosInyectados=!0}function pd(n={}){GE();const t={...{titulo:"Modal",contenido:"",icono:"fa-window-maximize",botones:[],cerrarAlClickFuera:!0,onAbrir:null,onCerrar:null},...n},r=se("<div>",{class:"wimodal-overlay"}),i=se("<div>",{class:"wimodal-container"}),a=se(`
    <div class="wimodal-header">
      <h3 class="wimodal-title">
        <i class="fa-solid ${t.icono}"></i>
        ${t.titulo}
      </h3>
      <button class="wimodal-close">
        <i class="fa-solid fa-times"></i>
      </button>
    </div>
  `),u=se("<div>",{class:"wimodal-body",html:t.contenido}),p=se("<div>",{class:"wimodal-footer"});return t.botones.length>0&&t.botones.forEach(_=>{const v=se("<button>",{class:`wimodal-btn wimodal-btn-${_.tipo||"primary"}`,text:_.texto,click:function(){_.onClick&&_.onClick(),_.cerrarAlClick!==!1&&Ma()}});p.append(v)}),i.append(a,u),t.botones.length>0&&i.append(p),r.append(i),se("body").append(r),a.find(".wimodal-close").on("click",Ma),t.cerrarAlClickFuera&&r.on("click",function(_){_.target===this&&Ma()}),It.overlayActual=r,It.modalActual=i,t.onCerrar&&(It.callbacks.onCerrar=t.onCerrar),setTimeout(()=>{r.addClass("activo"),i.addClass("activo"),se("body").css("overflow","hidden"),t.onAbrir&&t.onAbrir(i)},10),i}function Ma(){if(!It.overlayActual)return;const n=It.overlayActual,e=It.modalActual;It.callbacks.onCerrar&&(It.callbacks.onCerrar(),It.callbacks.onCerrar=null),n.removeClass("activo"),e.removeClass("activo"),setTimeout(()=>{n.remove(),se("body").css("overflow",""),It.overlayActual=null,It.modalActual=null},300)}function _T(n={}){const t={...{titulo:"Â¿EstÃ¡ seguro?",mensaje:"Â¿Desea continuar con esta acciÃ³n?",textoConfirmar:"Confirmar",textoCancelar:"Cancelar",tipo:"warning",onConfirmar:null,onCancelar:null},...n},r={warning:"fa-triangle-exclamation",danger:"fa-circle-xmark",info:"fa-circle-info"},i=`
    <div style="text-align: center; padding: 2vh 0;">
      <p style="font-size: clamp(1rem, 1.2vw, 1.15rem); color: var(--tx); line-height: 1.6;">
        ${t.mensaje}
      </p>
    </div>
  `;return pd({titulo:t.titulo,contenido:i,icono:r[t.tipo]||r.warning,cerrarAlClickFuera:!1,botones:[{texto:t.textoCancelar,tipo:"secondary",onClick:t.onCancelar},{texto:t.textoConfirmar,tipo:t.tipo==="danger"?"danger":"primary",onClick:t.onConfirmar}]})}const Ol={flores_amarillas:[{id:"amor",texto:"ð» Como estas flores amarillas iluminan mi dÃ­a, tÃº iluminas mi vida cada momento. Â¡Feliz dÃ­a de las flores amarillas! ð"},{id:"amistad",texto:"ð» En este dÃ­a tan especial, quiero regalarte estas flores amarillas que representan nuestra hermosa amistad. Â¡Eres increÃ­ble! ð"},{id:"especial",texto:"ð» Las flores amarillas son sÃ­mbolo de alegrÃ­a y esperanza, igual que tÃº en mi vida. Â¡Feliz 21 de septiembre! â¨"}],dia_padre:[{id:"amor",texto:"ð¨âð§âð¦ PapÃ¡, eres mi hÃ©roe y mi ejemplo a seguir. Gracias por todo tu amor y dedicaciÃ³n. Â¡Feliz DÃ­a del Padre! ð"},{id:"gratitud",texto:"ð¨âð§âð¦ Gracias papÃ¡ por cada consejo, cada abrazo y cada momento compartido. Eres el mejor padre del mundo. Te amo! â¤ï¸"},{id:"especial",texto:"ð¨âð§âð¦ En este dÃ­a tan especial quiero decirte que eres mi mayor inspiraciÃ³n. Â¡Feliz dÃ­a papÃ¡! ð"}],dia_madre:[{id:"amor",texto:"ð©âð§âð¦ MamÃ¡, tu amor incondicional es mi mayor tesoro. Gracias por ser mi guÃ­a y mi luz. Â¡Feliz DÃ­a de la Madre! ð"},{id:"gratitud",texto:"ð©âð§âð¦ Gracias mamÃ¡ por cada sacrificio, cada sonrisa y cada palabra de aliento. Eres mi superhÃ©roe. Te adoro! ð¹"},{id:"especial",texto:"ð©âð§âð¦ No hay palabras suficientes para expresar lo mucho que te amo mamÃ¡. Â¡Feliz dÃ­a! ð¸"}],navidad:[{id:"amor",texto:"ð Que esta Navidad estÃ© llena de amor, paz y alegrÃ­a. Gracias por ser parte de mi vida. Â¡Feliz Navidad! ð"},{id:"familia",texto:"ð En esta Ã©poca navideÃ±a quiero desearte lo mejor junto a tus seres queridos. Â¡Felices fiestas! â­"},{id:"especial",texto:"ð Que la magia de la Navidad ilumine tu camino y te llene de bendiciones. Â¡Feliz Navidad! ð"}],ano_nuevo:[{id:"amor",texto:"ð Que este nuevo aÃ±o traiga a tu vida mucha felicidad, Ã©xitos y amor. Â¡Feliz AÃ±o Nuevo! ð"},{id:"deseos",texto:"ð Brindo por un aÃ±o lleno de oportunidades y sueÃ±os cumplidos. Â¡Feliz 2025! ð¥"},{id:"especial",texto:"ð Que cada dÃ­a del nuevo aÃ±o sea una aventura maravillosa. Â¡Feliz AÃ±o Nuevo! ð"}],default:[{id:"amor",texto:"â¤ï¸ Quiero que sepas lo especial que eres para mÃ­. Este mensaje es para celebrar nuestra conexiÃ³n Ãºnica. ð"},{id:"amistad",texto:"â­ Eres una persona increÃ­ble y quiero celebrar contigo este dÃ­a especial. Â¡Gracias por existir! ð"},{id:"especial",texto:"â¨ En este dÃ­a tan especial quiero enviarte todo mi cariÃ±o y buenos deseos. Â¡Eres genial! ð"}]};function Ll(n){const e=n,r=`
    <form id="wimodal-form-biwin">
      <div class="wimodal-form-grid">
        
        <!-- MENSAJE PREDEFINIDO -->
        <div class="wimodal-form-group" style="grid-column: 1 / -1;">
          <label><i class="fa-solid fa-comment-dots"></i> Mensaje Predefinido</label>
          <div class="mensaje-selector" style="display:grid;gap:1vh;margin-top:1vh;">
            ${(Ol[e.nombreId]||Ol.default).map((i,a)=>`
              <label class="mensaje-option" style="display:flex;align-items:start;gap:1vh;padding:1.5vh;border:2px solid var(--bdr);border-radius:1vh;cursor:pointer;transition:all 0.3s;">
                <input type="radio" name="mensaje-tipo" value="${i.id}" data-texto="${i.texto}" ${a===0?"checked":""} 
                       style="margin-top:0.5vh;">
                <div style="flex:1;">
                  <strong style="text-transform:capitalize;color:var(--mco);">${i.id}</strong>
                  <p style="margin:0.5vh 0 0 0;font-size:0.9rem;color:var(--txs);">${i.texto}</p>
                </div>
              </label>
            `).join("")}
            <label class="mensaje-option" style="display:flex;align-items:start;gap:1vh;padding:1.5vh;border:2px solid var(--bdr);border-radius:1vh;cursor:pointer;transition:all 0.3s;">
              <input type="radio" name="mensaje-tipo" value="custom" data-texto="">
              <div style="flex:1;">
                <strong style="color:var(--mco);">âï¸ Mensaje Personalizado</strong>
                <textarea id="wi-mensaje-custom" placeholder="Escribe tu mensaje aquÃ­ (mÃ¡x. 500 caracteres)..." 
                          rows="3" maxlength="500" disabled
                          style="width:100%;margin-top:0.5vh;padding:1vh;border:2px solid var(--bdr);border-radius:0.8vh;outline:none;resize:vertical;font-family:var(--ff_P);"></textarea>
                <small class="char-count" style="color:var(--txs);font-size:0.85rem;">0 / 500 caracteres</small>
              </div>
            </label>
          </div>
        </div>
        
        <!-- DE -->
        <div class="wimodal-form-group">
          <label><i class="fa-solid fa-user"></i> De:</label>
          <input type="text" id="wi-de" placeholder="Tu nombre" required minlength="2" maxlength="50">
        </div>
        
        <!-- PARA -->
        <div class="wimodal-form-group">
          <label><i class="fa-solid fa-heart"></i> Para:</label>
          <input type="text" id="wi-para" placeholder="Nombre especial" required minlength="2" maxlength="50">
        </div>
        
        <!-- AUDIO (opcional) -->
        <div class="wimodal-form-group" style="grid-column: 1 / -1;">
          <label><i class="fa-solid fa-music"></i> Audio (URL MP3 - opcional)</label>
          <input type="url" id="wi-audio" placeholder="https://ejemplo.com/audio.mp3" 
                 value="${e.audioUrl||""}" pattern="https?://.+.mp3$">
          <small style="color:var(--txs);font-size:0.85rem;">Deja vacÃ­o para usar audio por defecto</small>
        </div>
        
      </div>
      
      <!-- BOTONES -->
      <div style="display:flex;gap:1vh;margin-top:2vh;">
        <button type="submit" class="wimodal-btn wimodal-btn-primary" style="flex:1;">
          <i class="fa-solid fa-link"></i> Generar Link
        </button>
      </div>
      
      <!-- RESULTADO (oculto inicialmente) -->
      <div id="resultado-link" style="display:none;margin-top:2vh;padding:2vh;background:var(--bg);border-radius:1vh;border:2px solid var(--success);">
        <label style="display:block;margin-bottom:1vh;font-weight:600;color:var(--success);">
          <i class="fa-solid fa-check-circle"></i> Â¡Link generado!
        </label>
        <div style="display:flex;gap:1vh;margin-bottom:1vh;">
          <input type="text" id="link-generado" readonly 
                 style="flex:1;padding:1vh;border:2px solid var(--bdr);border-radius:0.8vh;background:#fff;font-family:monospace;font-size:0.85rem;">
          <button type="button" id="btn-copiar" class="wimodal-btn wimodal-btn-secondary">
            <i class="fa-solid fa-copy"></i> Copiar
          </button>
        </div>
        <div style="display:flex;gap:1vh;">
          <button type="button" class="btn-compartir wimodal-btn wimodal-btn-success" data-red="whatsapp" style="flex:1;">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </button>
          <button type="button" class="btn-compartir wimodal-btn wimodal-btn-primary" data-red="facebook" style="flex:1;">
            <i class="fab fa-facebook"></i> Facebook
          </button>
        </div>
      </div>
    </form>
  `;pd({titulo:`${e.emoji} Personalizar ${e.nombre}`,contenido:r,icono:"fa-edit",botones:[]}),KE(e)}function KE(n){se('input[name="mensaje-tipo"]').on("change",function(){const e=se(this).val()==="custom";se("#wi-mensaje-custom").prop("disabled",!e),e&&se("#wi-mensaje-custom").focus()}),se("#wi-mensaje-custom").on("input",function(){const e=se(this).val().length;se(this).siblings(".char-count").text(`${e} / 500 caracteres`)}),se(".mensaje-option").on("click",function(){se(".mensaje-option").css("border-color","var(--bdr)"),se(this).css("border-color","var(--mco)")}),se("#wimodal-form-biwin").on("submit",function(e){e.preventDefault();const t=se("#wi-de").val().trim(),r=se("#wi-para").val().trim(),i=se('input[name="mensaje-tipo"]:checked'),a=i.val(),u=a==="custom"?se("#wi-mensaje-custom").val().trim():i,p=se("#wi-audio").val().trim();if(t.length<2)return ls('El nombre "De" debe tener al menos 2 caracteres',"error");if(r.length<2)return ls('El nombre "Para" debe tener al menos 2 caracteres',"error");if(a==="custom"&&u.length<10)return ls("El mensaje personalizado debe tener al menos 10 caracteres","error");const _=QE(n,t,r,u,p);se("#link-generado").val(_),se("#resultado-link").slideDown(300),Vl("Â¡Link generado exitosamente! ð")}),se(document).on("click","#btn-copiar",function(){const e=se("#link-generado").val();navigator.clipboard.writeText(e).then(()=>{Vl("Â¡Link copiado al portapapeles! ð"),se(this).html('<i class="fa-solid fa-check"></i> Copiado').prop("disabled",!0),setTimeout(()=>{se(this).html('<i class="fa-solid fa-copy"></i> Copiar').prop("disabled",!1)},2e3)}).catch(()=>{ls("Error al copiar","error")})}),se(document).on("click",".btn-compartir",function(){const e=se(this).data("red"),t=se("#link-generado").val(),r=`${n.emoji} Â¡Te envÃ­o un mensaje especial! ${n.nombre}`;let i;e==="whatsapp"?i=`https://wa.me/?text=${encodeURIComponent(r+`
`+t)}`:e==="facebook"&&(i=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`),window.open(i,"_blank","width=600,height=400")})}function QE(n,e,t,r,i){const a=window.location.origin+window.location.pathname,u=new URLSearchParams;return u.set("fest",n.nombreId),u.set("de",e),u.set("para",t),["amor","amistad","especial","gratitud","familia","deseos"].includes(r)?u.set("msg",r):(u.set("msg","custom"),u.set("txt",r)),i&&u.set("audio",i),`${a}?${u.toString()}`}se(document).on("click",".btn_pers",function(){const n=se(this).closest(".fest_card"),e=n.data("id"),t=n.data("fest");if(window.festividadesGlobal){const r=window.festividadesGlobal.find(i=>i.id===e||i.nombreId===t);r?Ll(r):ls("Festividad no encontrada","error")}else{const r={nombreId:t,nombre:n.find(".card_tit").text(),emoji:n.find(".card_ico").text(),audioUrl:""};Ll(r)}});export{se as $,XE as A,Vl as M,ls as N,Oe as T,gT as a,dT as b,_T as c,sT as d,UE as e,pd as f,Ma as g,jE as h,lT as i,iT as j,fT as k,tT as l,pT as m,nT as n,cT as o,yT as p,oT as q,BE as r,hT as s,uT as t,YE as u,eT as v,aT as w,ZE as x,mT as y,JE as z};
